!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=151)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.METADATA_KEY=void 0;var o=n(7);e.METADATA_KEY=o;var r=n(154);Object.defineProperty(e,"Container",{enumerable:!0,get:function(){return r.Container}});var i=n(18);Object.defineProperty(e,"BindingScopeEnum",{enumerable:!0,get:function(){return i.BindingScopeEnum}}),Object.defineProperty(e,"BindingTypeEnum",{enumerable:!0,get:function(){return i.BindingTypeEnum}}),Object.defineProperty(e,"TargetTypeEnum",{enumerable:!0,get:function(){return i.TargetTypeEnum}});var a=n(170);Object.defineProperty(e,"AsyncContainerModule",{enumerable:!0,get:function(){return a.AsyncContainerModule}}),Object.defineProperty(e,"ContainerModule",{enumerable:!0,get:function(){return a.ContainerModule}});var s=n(171);Object.defineProperty(e,"injectable",{enumerable:!0,get:function(){return s.injectable}});var u=n(172);Object.defineProperty(e,"tagged",{enumerable:!0,get:function(){return u.tagged}});var c=n(173);Object.defineProperty(e,"named",{enumerable:!0,get:function(){return c.named}});var d=n(91);Object.defineProperty(e,"inject",{enumerable:!0,get:function(){return d.inject}}),Object.defineProperty(e,"LazyServiceIdentifer",{enumerable:!0,get:function(){return d.LazyServiceIdentifer}});var l=n(174);Object.defineProperty(e,"optional",{enumerable:!0,get:function(){return l.optional}});var f=n(175);Object.defineProperty(e,"unmanaged",{enumerable:!0,get:function(){return f.unmanaged}});var p=n(176);Object.defineProperty(e,"multiInject",{enumerable:!0,get:function(){return p.multiInject}});var h=n(177);Object.defineProperty(e,"targetName",{enumerable:!0,get:function(){return h.targetName}});var y=n(178);Object.defineProperty(e,"postConstruct",{enumerable:!0,get:function(){return y.postConstruct}});var g=n(89);Object.defineProperty(e,"MetadataReader",{enumerable:!0,get:function(){return g.MetadataReader}});var v=n(26);Object.defineProperty(e,"id",{enumerable:!0,get:function(){return v.id}});var m=n(25);Object.defineProperty(e,"decorate",{enumerable:!0,get:function(){return m.decorate}});var b=n(94);Object.defineProperty(e,"traverseAncerstors",{enumerable:!0,get:function(){return b.traverseAncerstors}}),Object.defineProperty(e,"taggedConstraint",{enumerable:!0,get:function(){return b.taggedConstraint}}),Object.defineProperty(e,"namedConstraint",{enumerable:!0,get:function(){return b.namedConstraint}}),Object.defineProperty(e,"typeConstraint",{enumerable:!0,get:function(){return b.typeConstraint}});var _=n(38);Object.defineProperty(e,"getServiceIdentifierAsString",{enumerable:!0,get:function(){return _.getServiceIdentifierAsString}});var w=n(179);Object.defineProperty(e,"multiBindToService",{enumerable:!0,get:function(){return w.multiBindToService}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TYPES={Action:Symbol("Action"),IActionDispatcher:Symbol("IActionDispatcher"),IActionDispatcherProvider:Symbol("IActionDispatcherProvider"),IActionHandlerInitializer:Symbol("IActionHandlerInitializer"),ActionHandlerRegistration:Symbol("ActionHandlerRegistration"),ActionHandlerRegistryProvider:Symbol("ActionHandlerRegistryProvider"),IAnchorComputer:Symbol("IAnchor"),AnimationFrameSyncer:Symbol("AnimationFrameSyncer"),IButtonHandler:Symbol("IButtonHandler"),ICommandPaletteActionProvider:Symbol("ICommandPaletteActionProvider"),ICommandPaletteActionProviderRegistry:Symbol("ICommandPaletteActionProviderRegistry"),CommandRegistration:Symbol("CommandRegistration"),ICommandStack:Symbol("ICommandStack"),CommandStackOptions:Symbol("CommandStackOptions"),ICommandStackProvider:Symbol("ICommandStackProvider"),IContextMenuItemProvider:Symbol.for("IContextMenuProvider"),IContextMenuProviderRegistry:Symbol.for("IContextMenuProviderRegistry"),IContextMenuService:Symbol.for("IContextMenuService"),IContextMenuServiceProvider:Symbol.for("IContextMenuServiceProvider"),DOMHelper:Symbol("DOMHelper"),IDiagramLocker:Symbol("IDiagramLocker"),IEdgeRouter:Symbol("IEdgeRouter"),IEditLabelValidationDecorator:Symbol("IEditLabelValidationDecorator"),IEditLabelValidator:Symbol("IEditLabelValidator"),HiddenModelViewer:Symbol("HiddenModelViewer"),HiddenVNodePostprocessor:Symbol("HiddenVNodeDecorator"),HoverState:Symbol("HoverState"),KeyListener:Symbol("KeyListener"),LayoutRegistry:Symbol("LayoutRegistry"),Layouter:Symbol("Layouter"),LogLevel:Symbol("LogLevel"),ILogger:Symbol("ILogger"),IModelFactory:Symbol("IModelFactory"),IModelLayoutEngine:Symbol("IModelLayoutEngine"),ModelRendererFactory:Symbol("ModelRendererFactory"),ModelSource:Symbol("ModelSource"),ModelSourceProvider:Symbol("ModelSourceProvider"),ModelViewer:Symbol("ModelViewer"),MouseListener:Symbol("MouseListener"),PatcherProvider:Symbol("PatcherProvider"),IPopupModelProvider:Symbol("IPopupModelProvider"),PopupModelViewer:Symbol("PopupModelViewer"),PopupMouseListener:Symbol("PopupMouseListener"),PopupVNodePostprocessor:Symbol("PopupVNodeDecorator"),SModelElementRegistration:Symbol("SModelElementRegistration"),SModelRegistry:Symbol("SModelRegistry"),ISnapper:Symbol("ISnapper"),SvgExporter:Symbol("SvgExporter"),IToolManager:Symbol("IToolManager"),IUIExtension:Symbol("IUIExtension"),UIExtensionRegistry:Symbol("UIExtensionRegistry"),IVNodePostprocessor:Symbol("IVNodePostprocessor"),ViewRegistration:Symbol("ViewRegistration"),ViewRegistry:Symbol("ViewRegistry"),IViewer:Symbol("IViewer"),ViewerOptions:Symbol("ViewerOptions"),IViewerProvider:Symbol("IViewerProvider")}},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(3),a=n(31),s=function(){function t(){}return Object.defineProperty(t.prototype,"root",{get:function(){for(var t=this;t;){if(t instanceof d)return t;t=t instanceof c?t.parent:void 0}throw new Error("Element has no root")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"index",{get:function(){return this.root.index},enumerable:!0,configurable:!0}),t.prototype.hasFeature=function(t){return void 0!==this.features&&this.features.has(t)},t}();e.SModelElement=s,e.isParent=function(t){var e=t.children;return void 0!==e&&e.constructor===Array};var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.children=[],e}return r(e,t),e.prototype.add=function(t,e){var n=this.children;if(void 0===e)n.push(t);else{if(e<0||e>this.children.length)throw new Error("Child index "+e+" out of bounds (0.."+n.length+")");n.splice(e,0,t)}t.parent=this,this.index.add(t)},e.prototype.remove=function(t){var e=this.children,n=e.indexOf(t);if(n<0)throw new Error("No such child "+t.id);e.splice(n,1),delete t.parent,this.index.remove(t)},e.prototype.removeAll=function(t){var e=this,n=this.children;if(void 0!==t){for(var o=n.length-1;o>=0;o--)if(t(n[o])){var r=n.splice(o,1)[0];delete r.parent,this.index.remove(r)}}else n.forEach((function(t){delete t.parent,e.index.remove(t)})),n.splice(0,n.length)},e.prototype.move=function(t,e){var n=this.children,o=n.indexOf(t);if(-1===o)throw new Error("No such child "+t.id);if(e<0||e>n.length-1)throw new Error("Child index "+e+" out of bounds (0.."+n.length+")");n.splice(o,1),n.splice(e,0,t)},e.prototype.localToParent=function(t){return i.isBounds(t)?t:{x:t.x,y:t.y,width:-1,height:-1}},e.prototype.parentToLocal=function(t){return i.isBounds(t)?t:{x:t.x,y:t.y,width:-1,height:-1}},e}(s);e.SParentElement=u;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e}(u);e.SChildElement=c;var d=function(t){function e(e){void 0===e&&(e=new p);var n=t.call(this)||this;return n.canvasBounds=i.EMPTY_BOUNDS,Object.defineProperty(n,"index",{value:e,writable:!1}),n}return r(e,t),e}(u);e.SModelRoot=d;var l="0123456789abcdefghijklmnopqrstuvwxyz";function f(t){void 0===t&&(t=8);for(var e="",n=0;n<t;n++)e+=l.charAt(Math.floor(Math.random()*l.length));return e}e.createRandomId=f;var p=function(){function t(){this.id2element=new Map}return t.prototype.add=function(t){if(t.id){if(this.contains(t))throw new Error("Duplicate ID in model: "+t.id)}else do{t.id=f()}while(this.contains(t));if(this.id2element.set(t.id,t),void 0!==t.children&&t.children.constructor===Array)for(var e=0,n=t.children;e<n.length;e++){var o=n[e];this.add(o),o instanceof c||(void 0===this.id2parent&&(this.id2parent=new Map),this.id2parent.set(o.id,t))}},t.prototype.remove=function(t){if(this.id2element.delete(t.id),void 0!==t.children&&t.children.constructor===Array)for(var e=0,n=t.children;e<n.length;e++){var o=n[e];o instanceof c||(void 0===this.id2parent&&(this.id2parent=new Map),this.id2parent.delete(o.id)),this.remove(o)}},t.prototype.contains=function(t){return this.id2element.has(t.id)},t.prototype.getById=function(t){return this.id2element.get(t)},t.prototype.getParent=function(t){if(void 0!==this.id2parent)return this.id2parent.get(t);var e=this.getById(t);return e instanceof c?e.parent:void 0},t.prototype.getRoot=function(t){if(void 0!==this.id2parent)for(var e=t;e;){var n=this.id2parent.get(e.id);if(void 0===n)return e;e=n}if(t instanceof c)return t.root;throw new Error("Element has no root")},t.prototype.getAttachedElements=function(t){return[]},t.prototype.all=function(){return a.mapIterable(this.id2element,(function(t){t[0];return t[1]}))},t}();e.SModelIndex=p},function(t,e,n){"use strict";function o(t,e){return{x:t.x+e.x,y:t.y+e.y}}function r(t,e){return{x:t.x-e.x,y:t.y-e.y}}function i(t){return t.width>=0&&t.height>=0}function a(t){return{x:t.x+(t.width>=0?.5*t.width:0),y:t.y+(t.height>=0?.5*t.height:0)}}function s(t){var n=u(t);return 0===n||1===n?e.ORIGIN_POINT:{x:t.x/n,y:t.y/n}}function u(t){return Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2))}Object.defineProperty(e,"__esModule",{value:!0}),e.ORIGIN_POINT=Object.freeze({x:0,y:0}),e.add=o,e.subtract=r,e.EMPTY_DIMENSION=Object.freeze({width:-1,height:-1}),e.isValidDimension=i,e.EMPTY_BOUNDS=Object.freeze({x:0,y:0,width:-1,height:-1}),e.isBounds=function(t){return"x"in t&&"y"in t&&"width"in t&&"height"in t},e.combine=function(t,n){if(!i(t))return i(n)?n:e.EMPTY_BOUNDS;if(!i(n))return t;var o=Math.min(t.x,n.x),r=Math.min(t.y,n.y);return{x:o,y:r,width:Math.max(t.x+(t.width>=0?t.width:0),n.x+(n.width>=0?n.width:0))-o,height:Math.max(t.y+(t.height>=0?t.height:0),n.y+(n.height>=0?n.height:0))-r}},e.translate=function(t,e){return{x:t.x+e.x,y:t.y+e.y,width:t.width,height:t.height}},e.center=a,e.centerOfLine=function(t,e){return a({x:t.x>e.x?e.x:t.x,y:t.y>e.y?e.y:t.y,width:Math.abs(e.x-t.x),height:Math.abs(e.y-t.y)})},e.includes=function(t,e){return e.x>=t.x&&e.x<=t.x+t.width&&e.y>=t.y&&e.y<=t.y+t.height},function(t){t[t.left=0]="left",t[t.right=1]="right",t[t.up=2]="up",t[t.down=3]="down"}(e.Direction||(e.Direction={})),e.euclideanDistance=function(t,e){var n=e.x-t.x,o=e.y-t.y;return Math.sqrt(n*n+o*o)},e.manhattanDistance=function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},e.maxDistance=function(t,e){return Math.max(Math.abs(e.x-t.x),Math.abs(e.y-t.y))},e.angleOfPoint=function(t){return Math.atan2(t.y,t.x)},e.angleBetweenPoints=function(t,e){var n=Math.sqrt((t.x*t.x+t.y*t.y)*(e.x*e.x+e.y*e.y));if(isNaN(n)||0===n)return NaN;var o=t.x*e.x+t.y*e.y;return Math.acos(o/n)},e.shiftTowards=function(t,e,n){var i=s(r(e,t));return o(t,{x:i.x*n,y:i.y*n})},e.normalize=s,e.magnitude=u,e.toDegrees=function(t){return 180*t/Math.PI},e.toRadians=function(t){return t*Math.PI/180},e.almostEquals=function(t,e){return Math.abs(t-e)<.001},e.linear=function(t,e,n){return{x:(1-n)*t.x+n*e.x,y:(1-n)*t.y+n*e.y}};var c=function(){function t(t){this.bounds=t}return Object.defineProperty(t.prototype,"topPoint",{get:function(){return{x:this.bounds.x+this.bounds.width/2,y:this.bounds.y}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightPoint",{get:function(){return{x:this.bounds.x+this.bounds.width,y:this.bounds.y+this.bounds.height/2}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomPoint",{get:function(){return{x:this.bounds.x+this.bounds.width/2,y:this.bounds.y+this.bounds.height}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leftPoint",{get:function(){return{x:this.bounds.x,y:this.bounds.y+this.bounds.height/2}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topRightSideLine",{get:function(){return new d(this.topPoint,this.rightPoint)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topLeftSideLine",{get:function(){return new d(this.topPoint,this.leftPoint)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomRightSideLine",{get:function(){return new d(this.bottomPoint,this.rightPoint)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomLeftSideLine",{get:function(){return new d(this.bottomPoint,this.leftPoint)},enumerable:!0,configurable:!0}),t.prototype.closestSideLine=function(t){var e=a(this.bounds);return t.x>e.x?t.y>e.y?this.bottomRightSideLine:this.topRightSideLine:t.y>e.y?this.bottomLeftSideLine:this.topLeftSideLine},t}();e.Diamond=c;var d=function(){function t(t,e){this.p1=t,this.p2=e}return Object.defineProperty(t.prototype,"a",{get:function(){return this.p1.y-this.p2.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"b",{get:function(){return this.p2.x-this.p1.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"c",{get:function(){return this.p2.x*this.p1.y-this.p1.x*this.p2.y},enumerable:!0,configurable:!0}),t}();e.PointToPointLine=d,e.intersection=function(t,e){return{x:(t.c*e.b-e.c*t.b)/(t.a*e.b-e.a*t.b),y:(t.a*e.c-e.a*t.c)/(t.a*e.b-e.a*t.b)}}},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),a=n(8),s=n(3),u=n(27);function c(t){return"bounds"in t}e.boundsFeature=Symbol("boundsFeature"),e.layoutContainerFeature=Symbol("layoutContainerFeature"),e.layoutableChildFeature=Symbol("layoutableChildFeature"),e.alignFeature=Symbol("alignFeature"),e.isBoundsAware=c,e.isLayoutContainer=function(t){return c(t)&&t.hasFeature(e.layoutContainerFeature)&&"layout"in t},e.isLayoutableChild=function(t){return c(t)&&t.hasFeature(e.layoutableChildFeature)},e.isSizeable=function(t){return t.hasFeature(e.boundsFeature)&&c(t)},e.isAlignable=function(t){return t.hasFeature(e.alignFeature)&&"alignment"in t},e.getAbsoluteBounds=function(t){var e=a.findParentByFeature(t,c);if(void 0!==e){for(var n=e.bounds,o=e;o instanceof i.SChildElement;){var r=o.parent;n=r.localToParent(n),o=r}return n}if(t instanceof i.SModelRoot){var u=t.canvasBounds;return{x:0,y:0,width:u.width,height:u.height}}return s.EMPTY_BOUNDS},e.getAbsoluteClientBounds=function(t,e,n){var o=0,r=0,i=0,a=0,s=e.createUniqueDOMElementId(t),c=document.getElementById(s);if(c){var d=c.getBoundingClientRect(),l=u.getWindowScroll();o=d.left+l.x,r=d.top+l.y,i=d.width,a=d.height}var f=document.getElementById(n.baseDiv);if(f)for(;f.offsetParent instanceof HTMLElement&&(f=f.offsetParent);)o-=f.offsetLeft,r-=f.offsetTop;return{x:o,y:r,width:i,height:a}},e.findChildrenAtPosition=function(t,e){var n=[];return function t(e,n,o){e.children.forEach((function(e){if(c(e)&&s.includes(e.bounds,n)&&o.push(e),e instanceof i.SParentElement){var r=e.parentToLocal(n);t(e,r,o)}}))}(t,e,n),n};var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.position=s.ORIGIN_POINT,e.size=s.EMPTY_DIMENSION,e}return r(e,t),Object.defineProperty(e.prototype,"bounds",{get:function(){return{x:this.position.x,y:this.position.y,width:this.size.width,height:this.size.height}},set:function(t){this.position={x:t.x,y:t.y},this.size={width:t.width,height:t.height}},enumerable:!0,configurable:!0}),e.prototype.localToParent=function(t){var e={x:t.x+this.position.x,y:t.y+this.position.y,width:-1,height:-1};return s.isBounds(t)&&(e.width=t.width,e.height=t.height),e},e.prototype.parentToLocal=function(t){var e={x:t.x-this.position.x,y:t.y-this.position.y,width:-1,height:-1};return s.isBounds(t)&&(e.width=t.width,e.height=t.height),e},e}(i.SChildElement);e.SShapeElement=d},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=function(){function t(){}return t=i([a.injectable()],t)}();e.Command=s;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.merge=function(t,e){return!1},e=i([a.injectable()],e)}(s);e.MergeableCommand=u;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.undo=function(t){return t.logger.error(this,"Cannot undo a hidden command"),t.root},e.prototype.redo=function(t){return t.logger.error(this,"Cannot redo a hidden command"),t.root},e=i([a.injectable()],e)}(s);e.HiddenCommand=c;var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e=i([a.injectable()],e)}(s);e.PopupCommand=d;var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e=i([a.injectable()],e)}(s);e.SystemCommand=l;var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e=i([a.injectable()],e)}(s);e.ResetCommand=f},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),a=n(3),s=n(4),u=n(34),c=n(11),d=n(35),l=n(28),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.routingPoints=[],e}return r(e,t),Object.defineProperty(e.prototype,"source",{get:function(){return this.index.getById(this.sourceId)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"target",{get:function(){return this.index.getById(this.targetId)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bounds",{get:function(){return this.routingPoints.reduce((function(t,e){return a.combine(t,{x:e.x,y:e.y,width:0,height:0})}),a.EMPTY_BOUNDS)},enumerable:!0,configurable:!0}),e}(i.SChildElement);function p(t){for(var e={x:NaN,y:NaN,width:0,height:0},n=0,o=t;n<o.length;n++){var r=o[n];isNaN(e.x)?(e.x=r.x,e.y=r.y):(r.x<e.x?(e.width+=e.x-r.x,e.x=r.x):r.x>e.x+e.width&&(e.width=r.x-e.x),r.y<e.y?(e.height+=e.y-r.y,e.y=r.y):r.y>e.y+e.height&&(e.height=r.y-e.y))}return e}e.SRoutableElement=f,e.connectableFeature=Symbol("connectableFeature"),e.isConnectable=function(t){return t.hasFeature(e.connectableFeature)&&t.canConnect},e.getAbsoluteRouteBounds=function(t,e){void 0===e&&(e=t.routingPoints);for(var n=p(e),o=t;o instanceof i.SChildElement;){var r=o.parent;n=r.localToParent(n),o=r}return n},e.getRouteBounds=p;var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.strokeWidth=0,e}return r(e,t),Object.defineProperty(e.prototype,"incomingEdges",{get:function(){return this.index.getIncomingEdges(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outgoingEdges",{get:function(){return this.index.getOutgoingEdges(this)},enumerable:!0,configurable:!0}),e.prototype.canConnect=function(t,e){return!0},e}(s.SShapeElement);e.SConnectableElement=h;var y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.editMode=!1,e.hoverFeedback=!1,e.selected=!1,e}return r(e,t),e.prototype.hasFeature=function(t){return-1!==e.DEFAULT_FEATURES.indexOf(t)},e.DEFAULT_FEATURES=[c.selectFeature,l.moveFeature,d.hoverFeedbackFeature],e}(i.SChildElement);e.SRoutingHandle=y;var g=function(t){function e(){var e=t.call(this)||this;return e.type="dangling-anchor",e.size={width:0,height:0},e}return r(e,t),e.DEFAULT_FEATURES=[u.deletableFeature],e}(h);e.SDanglingAnchor=g,e.edgeInProgressID="edge-in-progress",e.edgeInProgressTargetHandleID=e.edgeInProgressID+"-target-anchor"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.POST_CONSTRUCT=e.DESIGN_PARAM_TYPES=e.PARAM_TYPES=e.TAGGED_PROP=e.TAGGED=e.MULTI_INJECT_TAG=e.INJECT_TAG=e.OPTIONAL_TAG=e.UNMANAGED_TAG=e.NAME_TAG=e.NAMED_TAG=void 0,e.NAMED_TAG="named",e.NAME_TAG="name",e.UNMANAGED_TAG="unmanaged",e.OPTIONAL_TAG="optional",e.INJECT_TAG="inject",e.MULTI_INJECT_TAG="multi_inject",e.TAGGED="inversify:tagged",e.TAGGED_PROP="inversify:tagged_props",e.PARAM_TYPES="inversify:paramtypes",e.DESIGN_PARAM_TYPES="design:paramtypes",e.POST_CONSTRUCT="post_construct"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),r=n(2);function i(t,e,n){if(e!==n){for(;e instanceof r.SChildElement;)if(t=e.localToParent(t),(e=e.parent)===n)return t;for(var o=[];n instanceof r.SChildElement;)o.push(n),n=n.parent;if(e!==n)throw new Error("Incompatible source and target: "+e.id+", "+n.id);for(var i=o.length-1;i>=0;i--)t=o[i].parentToLocal(t)}return t}e.registerModelElement=function(t,e,n,r){t.bind(o.TYPES.SModelElementRegistration).toConstantValue({type:e,constr:n,features:r})},e.getBasicType=function(t){if(!t.type)return"";var e=t.type.indexOf(":");return e>=0?t.type.substring(0,e):t.type},e.getSubType=function(t){if(!t.type)return"";var e=t.type.indexOf(":");return e>=0?t.type.substring(e+1):t.type},e.findElement=function t(e,n){if(e.id===n)return e;if(void 0!==e.children)for(var o=0,r=e.children;o<r.length;o++){var i=t(r[o],n);if(void 0!==i)return i}},e.findParent=function(t,e){for(var n=t;void 0!==n;){if(e(n))return n;n=n instanceof r.SChildElement?n.parent:void 0}return n},e.findParentByFeature=function(t,e){for(var n=t;void 0!==n;){if(e(n))return n;n=n instanceof r.SChildElement?n.parent:void 0}return n},e.translatePoint=i,e.translateBounds=function(t,e,n){var o=i(t,e,n),r=i({x:t.x+t.width,y:t.y+t.height},e,n);return{x:o.x,y:o.y,width:r.x-o.x,height:r.y-o.y}}},function(t,e,n){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function r(t,e,n){s(t)[e]=n}function i(t){var e=a(t);return e.attrs||(e.attrs={}),e.attrs}function a(t){return t.data||(t.data={}),t.data}function s(t){var e=a(t);return e.class||(e.class={}),e.class}Object.defineProperty(e,"__esModule",{value:!0}),e.setAttr=function(t,e,n){i(t)[e]=n},e.setClass=r,e.setNamespace=function t(e,n){void 0===e.data&&(e.data={}),e.data.ns=n;var o=e.children;if(void 0!==o)for(var r=0;r<o.length;r++){var i=o[r];"string"!=typeof i&&t(i,n)}},e.copyClassesFromVNode=function(t,e){var n=s(t);for(var o in n)n.hasOwnProperty(o)&&r(e,o,!0)},e.copyClassesFromElement=function(t,e){for(var n=t.classList,o=0;o<n.length;o++){var i=n.item(o);i&&r(e,i,!0)}},e.mergeStyle=function(t,e){a(t).style=o(o({},a(t).style||{}),e)},e.on=function(t,e,n,o){var r=function(t){var e=a(t);e.on||(e.on={});return e.on}(t);if(r[e])throw new Error("EventListener for "+e+" already registered on VNode");r[e]=[n,o]},e.getAttrs=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.STACK_OVERFLOW=e.CIRCULAR_DEPENDENCY_IN_FACTORY=e.POST_CONSTRUCT_ERROR=e.MULTIPLE_POST_CONSTRUCT_METHODS=e.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=e.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=e.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=e.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=e.ARGUMENTS_LENGTH_MISMATCH=e.INVALID_DECORATOR_OPERATION=e.INVALID_TO_SELF_VALUE=e.INVALID_FUNCTION_BINDING=e.INVALID_MIDDLEWARE_RETURN=e.NO_MORE_SNAPSHOTS_AVAILABLE=e.INVALID_BINDING_TYPE=e.NOT_IMPLEMENTED=e.CIRCULAR_DEPENDENCY=e.UNDEFINED_INJECT_ANNOTATION=e.MISSING_INJECT_ANNOTATION=e.MISSING_INJECTABLE_ANNOTATION=e.NOT_REGISTERED=e.CANNOT_UNBIND=e.AMBIGUOUS_MATCH=e.KEY_NOT_FOUND=e.NULL_ARGUMENT=e.DUPLICATED_METADATA=e.DUPLICATED_INJECTABLE_DECORATOR=void 0,e.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",e.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",e.NULL_ARGUMENT="NULL argument",e.KEY_NOT_FOUND="Key Not Found",e.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",e.CANNOT_UNBIND="Could not unbind serviceIdentifier:",e.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",e.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",e.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:",e.UNDEFINED_INJECT_ANNOTATION=function(t){return"@inject called with undefined this could mean that the class "+t+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},e.CIRCULAR_DEPENDENCY="Circular dependency found:",e.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",e.INVALID_BINDING_TYPE="Invalid binding type:",e.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",e.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",e.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",e.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",e.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",e.ARGUMENTS_LENGTH_MISMATCH=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"The number of constructor arguments in the derived class "+t[0]+" must be >= than the number of constructor arguments of its base class."},e.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",e.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",e.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",e.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",e.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class",e.POST_CONSTRUCT_ERROR=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"@postConstruct error in class "+t[0]+": "+t[1]},e.CIRCULAR_DEPENDENCY_IN_FACTORY=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"It looks like there is a circular dependency in one of the '"+t[0]+"' bindings. Please investigate bindings withservice identifier '"+t[1]+"'."},e.STACK_OVERFLOW="Maximum call stack size exceeded"},function(t,e,n){"use strict";function o(t){return t.hasFeature(e.selectFeature)}Object.defineProperty(e,"__esModule",{value:!0}),e.selectFeature=Symbol("selectFeature"),e.isSelectable=o,e.isSelected=function(t){return void 0!==t&&o(t)&&t.selected}},function(t,e,n){"use strict";function o(t){return void 0!==t&&t.hasOwnProperty("kind")&&"string"==typeof t.kind}Object.defineProperty(e,"__esModule",{value:!0}),e.isAction=o,e.isRequestAction=function(t){return o(t)&&t.hasOwnProperty("requestId")&&"string"==typeof t.requestId};var r=1;e.generateRequestId=function(){return(r++).toString()},e.isResponseAction=function(t){return o(t)&&t.hasOwnProperty("responseId")&&"string"==typeof t.responseId&&""!==t.responseId};var i=function(){function t(e,n,o){this.message=e,this.responseId=n,this.detail=o,this.kind=t.KIND}return t.KIND="rejectRequest",t}();e.RejectAction=i;var a=function(t,e,n){this.label=t,this.actions=e,this.icon=n};e.LabeledAction=a,e.isLabeledAction=function(t){return void 0!==t&&void 0!==t.label&&void 0!==t.actions}},function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},i=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n(49),u=n(1),c=function(){function t(t){this.commandRegistration=t}return t.prototype.handle=function(t){return this.commandRegistration.factory(t)},t}();e.CommandActionHandler=c;var d=function(){function t(t){this.registrations=t}return t.prototype.initialize=function(t){this.registrations.forEach((function(e){return t.register(e.kind,new c(e))}))},t=o([a.injectable(),i(0,a.multiInject(u.TYPES.CommandRegistration)),i(0,a.optional()),r("design:paramtypes",[Array])],t)}();e.CommandActionHandlerInitializer=d,e.configureCommand=function(t,e){if(!s.isInjectable(e))throw new Error("Commands should be @injectable: "+e.name);t.isBound(e)||t.bind(e).toSelf(),t.bind(u.TYPES.CommandRegistration).toDynamicValue((function(t){return{kind:e.KIND,factory:function(n){var o=new a.Container;return o.parent=t.container,o.bind(u.TYPES.Action).toConstantValue(n),o.get(e)}}}))}},function(t,e,n){"use strict";function o(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),o(n(12)),o(n(60)),o(n(48)),o(n(95)),o(n(39)),o(n(33)),o(n(96)),o(n(5)),o(n(13)),o(n(181)),o(n(97)),o(n(47)),o(n(32)),o(n(19)),o(n(8)),o(n(2)),o(n(98)),o(n(64)),o(n(50)),o(n(65)),o(n(17)),o(n(16)),o(n(99)),o(n(51)),o(n(100)),o(n(101)),o(n(102)),o(n(103)),o(n(9)),o(n(1));var r=n(104);e.defaultModule=r.default,o(n(41)),o(n(105)),o(n(67)),o(n(4)),o(n(106)),o(n(107)),o(n(108)),o(n(52)),o(n(69)),o(n(70)),o(n(71)),o(n(111)),o(n(190)),o(n(74)),o(n(112)),o(n(75)),o(n(113)),o(n(45)),o(n(191)),o(n(114)),o(n(115)),o(n(34)),o(n(78)),o(n(117)),o(n(53)),o(n(44)),o(n(80)),o(n(81)),o(n(82)),o(n(192)),o(n(118)),o(n(77)),o(n(37)),o(n(83)),o(n(42)),o(n(57)),o(n(35)),o(n(84)),o(n(119)),o(n(120)),o(n(28)),o(n(58)),o(n(193)),o(n(109)),o(n(85)),o(n(121)),o(n(29)),o(n(72)),o(n(122)),o(n(86)),o(n(6)),o(n(123)),o(n(54)),o(n(23)),o(n(124)),o(n(11)),o(n(43)),o(n(63)),o(n(87)),o(n(59)),o(n(55)),o(n(24)),o(n(125)),o(n(76)),o(n(30)),o(n(79)),o(n(73));var i=n(195);e.graphModule=i.default;var a=n(127);e.boundsModule=a.default;var s=n(128);e.buttonModule=s.default;var u=n(129);e.commandPaletteModule=u.default;var c=n(130);e.contextMenuModule=c.default;var d=n(131);e.decorationModule=d.default;var l=n(75);e.edgeLayoutModule=l.default;var f=n(132);e.expandModule=f.default;var p=n(133);e.exportModule=p.default;var h=n(134);e.fadeModule=h.default;var y=n(135);e.hoverModule=y.default;var g=n(136);e.moveModule=g.default;var v=n(137);e.openModule=v.default;var m=n(138);e.routingModule=m.default;var b=n(139);e.selectModule=b.default;var _=n(140);e.undoRedoModule=_.default;var w=n(141);e.updateModule=w.default;var S=n(142);e.viewportModule=S.default;var P=n(143);e.zorderModule=P.default,o(n(126)),o(n(36)),o(n(197)),o(n(198)),o(n(199)),o(n(208)),o(n(146)),o(n(116)),o(n(56)),o(n(147)),o(n(209)),o(n(210)),o(n(46)),o(n(211));var O=n(144);e.modelSourceModule=O.default,o(n(27)),o(n(212)),o(n(3)),o(n(49)),o(n(66)),o(n(20))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var o=n(7),r=function(){function t(t,e){this.key=t,this.value=e}return t.prototype.toString=function(){return this.key===o.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},t}();e.Metadata=r},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(0),c=n(12),d=n(2),l=n(1),f=n(40),p=n(9),h=function(){function t(t){void 0===t&&(t=[]),this.mouseListeners=t}return t.prototype.register=function(t){this.mouseListeners.push(t)},t.prototype.deregister=function(t){var e=this.mouseListeners.indexOf(t);e>=0&&this.mouseListeners.splice(e,1)},t.prototype.getTargetElement=function(t,e){for(var n=e.target,o=t.index;n;){if(n.id){var r=o.getById(this.domHelper.findSModelIdByDOMElement(n));if(void 0!==r)return r}n=n.parentNode}},t.prototype.handleEvent=function(t,e,n){var o=this;this.focusOnMouseEvent(t,e);var r=this.getTargetElement(e,n);if(r){var i=this.mouseListeners.map((function(e){return e[t].apply(e,[r,n])})).reduce((function(t,e){return t.concat(e)}));if(i.length>0){n.preventDefault();for(var a=0,s=i;a<s.length;a++){var u=s[a];c.isAction(u)?this.actionDispatcher.dispatch(u):u.then((function(t){o.actionDispatcher.dispatch(t)}))}}}},t.prototype.focusOnMouseEvent=function(t,e){if(document){var n=document.getElementById(this.domHelper.createUniqueDOMElementId(e));"mouseDown"===t&&null!==n&&"function"==typeof n.focus&&n.focus()}},t.prototype.mouseOver=function(t,e){this.handleEvent("mouseOver",t,e)},t.prototype.mouseOut=function(t,e){this.handleEvent("mouseOut",t,e)},t.prototype.mouseEnter=function(t,e){this.handleEvent("mouseEnter",t,e)},t.prototype.mouseLeave=function(t,e){this.handleEvent("mouseLeave",t,e)},t.prototype.mouseDown=function(t,e){this.handleEvent("mouseDown",t,e)},t.prototype.mouseMove=function(t,e){this.handleEvent("mouseMove",t,e)},t.prototype.mouseUp=function(t,e){this.handleEvent("mouseUp",t,e)},t.prototype.wheel=function(t,e){this.handleEvent("wheel",t,e)},t.prototype.doubleClick=function(t,e){this.handleEvent("doubleClick",t,e)},t.prototype.decorate=function(t,e){return e instanceof d.SModelRoot&&(p.on(t,"mouseover",this.mouseOver.bind(this),e),p.on(t,"mouseout",this.mouseOut.bind(this),e),p.on(t,"mouseenter",this.mouseEnter.bind(this),e),p.on(t,"mouseleave",this.mouseLeave.bind(this),e),p.on(t,"mousedown",this.mouseDown.bind(this),e),p.on(t,"mouseup",this.mouseUp.bind(this),e),p.on(t,"mousemove",this.mouseMove.bind(this),e),p.on(t,"wheel",this.wheel.bind(this),e),p.on(t,"contextmenu",(function(t,e){e.preventDefault()}),e),p.on(t,"dblclick",this.doubleClick.bind(this),e)),t=this.mouseListeners.reduce((function(t,n){return n.decorate(t,e)}),t)},t.prototype.postUpdate=function(){},i([u.inject(l.TYPES.IActionDispatcher),a("design:type",Object)],t.prototype,"actionDispatcher",void 0),i([u.inject(l.TYPES.DOMHelper),a("design:type",f.DOMHelper)],t.prototype,"domHelper",void 0),t=i([u.injectable(),s(0,u.multiInject(l.TYPES.MouseListener)),s(0,u.optional()),a("design:paramtypes",[Array])],t)}();e.MouseTool=h;var y=function(t){function e(e){void 0===e&&(e=[]);var n=t.call(this,e)||this;return n.mouseListeners=e,n}return r(e,t),e=i([u.injectable(),s(0,u.multiInject(l.TYPES.PopupMouseListener)),s(0,u.optional()),a("design:paramtypes",[Array])],e)}(h);e.PopupMouseTool=y;var g=function(){function t(){}return t.prototype.mouseOver=function(t,e){return[]},t.prototype.mouseOut=function(t,e){return[]},t.prototype.mouseEnter=function(t,e){return[]},t.prototype.mouseLeave=function(t,e){return[]},t.prototype.mouseDown=function(t,e){return[]},t.prototype.mouseMove=function(t,e){return[]},t.prototype.mouseUp=function(t,e){return[]},t.prototype.wheel=function(t,e){return[]},t.prototype.doubleClick=function(t,e){return[]},t.prototype.decorate=function(t,e){return t},t=i([u.injectable()],t)}();e.MouseListener=g;var v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.mouseMove=function(t,e){return this.lastPosition=t.root.parentToLocal({x:e.offsetX,y:e.offsetY}),[]},Object.defineProperty(e.prototype,"lastPositionOnDiagram",{get:function(){return this.lastPosition},enumerable:!0,configurable:!0}),e=i([u.injectable()],e)}(g);e.MousePositionTracker=v},function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},i=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n(1),u=n(2),c=n(9),d=function(){function t(t){void 0===t&&(t=[]),this.keyListeners=t}return t.prototype.register=function(t){this.keyListeners.push(t)},t.prototype.deregister=function(t){var e=this.keyListeners.indexOf(t);e>=0&&this.keyListeners.splice(e,1)},t.prototype.handleEvent=function(t,e,n){var o=this.keyListeners.map((function(o){return o[t].apply(o,[e,n])})).reduce((function(t,e){return t.concat(e)}));o.length>0&&(n.preventDefault(),this.actionDispatcher.dispatchAll(o))},t.prototype.keyDown=function(t,e){this.handleEvent("keyDown",t,e)},t.prototype.keyUp=function(t,e){this.handleEvent("keyUp",t,e)},t.prototype.focus=function(){},t.prototype.decorate=function(t,e){return e instanceof u.SModelRoot&&(c.on(t,"focus",this.focus.bind(this),e),c.on(t,"keydown",this.keyDown.bind(this),e),c.on(t,"keyup",this.keyUp.bind(this),e)),t},t.prototype.postUpdate=function(){},o([a.inject(s.TYPES.IActionDispatcher),r("design:type",Object)],t.prototype,"actionDispatcher",void 0),t=o([a.injectable(),i(0,a.multiInject(s.TYPES.KeyListener)),i(0,a.optional()),r("design:paramtypes",[Array])],t)}();e.KeyTool=d;var l=function(){function t(){}return t.prototype.keyDown=function(t,e){return[]},t.prototype.keyUp=function(t,e){return[]},t=o([a.injectable()],t)}();e.KeyListener=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TargetTypeEnum=e.BindingTypeEnum=e.BindingScopeEnum=void 0;e.BindingScopeEnum={Request:"Request",Singleton:"Singleton",Transient:"Transient"};e.BindingTypeEnum={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};e.TargetTypeEnum={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"}},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(0),c=n(1),d=n(20),l=n(2),f=function(){function t(){}return t.prototype.createElement=function(t,e){var n;if(this.registry.hasKey(t.type)){var o=this.registry.get(t.type,void 0);if(!(o instanceof l.SChildElement))throw new Error("Element with type "+t.type+" was expected to be an SChildElement.");n=o}else n=new l.SChildElement;return this.initializeChild(n,t,e)},t.prototype.createRoot=function(t){var e;if(this.registry.hasKey(t.type)){var n=this.registry.get(t.type,void 0);if(!(n instanceof l.SModelRoot))throw new Error("Element with type "+t.type+" was expected to be an SModelRoot.");e=n}else e=new l.SModelRoot;return this.initializeRoot(e,t)},t.prototype.createSchema=function(t){var e=this,n={};for(var o in t)if(!this.isReserved(t,o)){var r=t[o];"function"!=typeof r&&(n[o]=r)}return t instanceof l.SParentElement&&(n.children=t.children.map((function(t){return e.createSchema(t)}))),n},t.prototype.initializeElement=function(t,e){for(var n in e)if(!this.isReserved(t,n)){var o=e[n];"function"!=typeof o&&(t[n]=o)}return t},t.prototype.isReserved=function(t,e){if(["children","parent","index"].indexOf(e)>=0)return!0;var n=t;do{var o=Object.getOwnPropertyDescriptor(n,e);if(void 0!==o)return void 0!==o.get;n=Object.getPrototypeOf(n)}while(n);return!1},t.prototype.initializeParent=function(t,e){var n=this;return this.initializeElement(t,e),l.isParent(e)&&(t.children=e.children.map((function(e){return n.createElement(e,t)}))),t},t.prototype.initializeChild=function(t,e,n){return this.initializeParent(t,e),void 0!==n&&(t.parent=n),t},t.prototype.initializeRoot=function(t,e){return this.initializeParent(t,e),t.index.add(t),t},i([u.inject(c.TYPES.SModelRegistry),a("design:type",p)],t.prototype,"registry",void 0),t=i([u.injectable()],t)}();e.SModelFactory=f,e.EMPTY_ROOT=Object.freeze({type:"NONE",id:"EMPTY"});var p=function(t){function e(e){var n=t.call(this)||this;return e.forEach((function(t){var e=n.getDefaultFeatures(t.constr);if(!e&&t.features&&t.features.enable&&(e=[]),e){var o=h(e,t.features);n.register(t.type,(function(){var e=new t.constr;return e.features=o,e}))}else n.register(t.type,(function(){return new t.constr}))})),n}return r(e,t),e.prototype.getDefaultFeatures=function(t){var e=t;do{var n=e.DEFAULT_FEATURES;if(n)return n;e=Object.getPrototypeOf(e)}while(e)},e=i([u.injectable(),s(0,u.multiInject(c.TYPES.SModelElementRegistration)),s(0,u.optional()),a("design:paramtypes",[Array])],e)}(d.FactoryRegistry);function h(t,e){var n=new Set(t);if(e&&e.enable)for(var o=0,r=e.enable;o<r.length;o++){var i=r[o];n.add(i)}if(e&&e.disable)for(var a=0,s=e.disable;a<s.length;a++){i=s[a];n.delete(i)}return n}e.SModelRegistry=p,e.createFeatureSet=h},function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=function(){function t(){this.elements=new Map}return t.prototype.register=function(t,e){if(void 0===t)throw new Error("Key is undefined");if(this.hasKey(t))throw new Error("Key is already registered: "+t);this.elements.set(t,e)},t.prototype.deregister=function(t){if(void 0===t)throw new Error("Key is undefined");this.elements.delete(t)},t.prototype.hasKey=function(t){return this.elements.has(t)},t.prototype.get=function(t,e){var n=this.elements.get(t);return n?new n(e):this.missing(t,e)},t.prototype.missing=function(t,e){throw new Error("Unknown registry key: "+t)},t=o([r.injectable()],t)}();e.ProviderRegistry=i;var a=function(){function t(){this.elements=new Map}return t.prototype.register=function(t,e){if(void 0===t)throw new Error("Key is undefined");if(this.hasKey(t))throw new Error("Key is already registered: "+t);this.elements.set(t,e)},t.prototype.deregister=function(t){if(void 0===t)throw new Error("Key is undefined");this.elements.delete(t)},t.prototype.hasKey=function(t){return this.elements.has(t)},t.prototype.get=function(t,e){var n=this.elements.get(t);return n?n(e):this.missing(t,e)},t.prototype.missing=function(t,e){throw new Error("Unknown registry key: "+t)},t=o([r.injectable()],t)}();e.FactoryRegistry=a;var s=function(){function t(){this.elements=new Map}return t.prototype.register=function(t,e){if(void 0===t)throw new Error("Key is undefined");if(this.hasKey(t))throw new Error("Key is already registered: "+t);this.elements.set(t,e)},t.prototype.deregister=function(t){if(void 0===t)throw new Error("Key is undefined");this.elements.delete(t)},t.prototype.hasKey=function(t){return this.elements.has(t)},t.prototype.get=function(t){var e=this.elements.get(t);return e||this.missing(t)},t.prototype.missing=function(t){throw new Error("Unknown registry key: "+t)},t=o([r.injectable()],t)}();e.InstanceRegistry=s;var u=function(){function t(){this.elements=new Map}return t.prototype.register=function(t,e){if(void 0===t)throw new Error("Key is undefined");var n=this.elements.get(t);void 0!==n?n.push(e):this.elements.set(t,[e])},t.prototype.deregisterAll=function(t){if(void 0===t)throw new Error("Key is undefined");this.elements.delete(t)},t.prototype.get=function(t){var e=this.elements.get(t);return void 0!==e?e:[]},t=o([r.injectable()],t)}();e.MultiInstanceRegistry=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(27);function r(t){if(t.keyCode){var e=i[t.keyCode];if(void 0!==e)return e}return t.code}e.matchesKeystroke=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(r(t)!==e)return!1;if(o.isMac()){if(t.ctrlKey!==n.findIndex((function(t){return"ctrl"===t}))>=0)return!1;if(t.metaKey!==n.findIndex((function(t){return"meta"===t||"ctrlCmd"===t}))>=0)return!1}else{if(t.ctrlKey!==n.findIndex((function(t){return"ctrl"===t||"ctrlCmd"===t}))>=0)return!1;if(t.metaKey!==n.findIndex((function(t){return"meta"===t}))>=0)return!1}return t.altKey===n.findIndex((function(t){return"alt"===t}))>=0&&t.shiftKey===n.findIndex((function(t){return"shift"===t}))>=0},e.getActualCode=r;var i=new Array(256);!function(){function t(t,e){void 0===i[e]&&(i[e]=t)}t("Pause",3),t("Backspace",8),t("Tab",9),t("Enter",13),t("ShiftLeft",16),t("ShiftRight",16),t("ControlLeft",17),t("ControlRight",17),t("AltLeft",18),t("AltRight",18),t("CapsLock",20),t("Escape",27),t("Space",32),t("PageUp",33),t("PageDown",34),t("End",35),t("Home",36),t("ArrowLeft",37),t("ArrowUp",38),t("ArrowRight",39),t("ArrowDown",40),t("Insert",45),t("Delete",46),t("Digit1",49),t("Digit2",50),t("Digit3",51),t("Digit4",52),t("Digit5",53),t("Digit6",54),t("Digit7",55),t("Digit8",56),t("Digit9",57),t("Digit0",48),t("KeyA",65),t("KeyB",66),t("KeyC",67),t("KeyD",68),t("KeyE",69),t("KeyF",70),t("KeyG",71),t("KeyH",72),t("KeyI",73),t("KeyJ",74),t("KeyK",75),t("KeyL",76),t("KeyM",77),t("KeyN",78),t("KeyO",79),t("KeyP",80),t("KeyQ",81),t("KeyR",82),t("KeyS",83),t("KeyT",84),t("KeyU",85),t("KeyV",86),t("KeyW",87),t("KeyX",88),t("KeyY",89),t("KeyZ",90),t("OSLeft",91),t("MetaLeft",91),t("OSRight",92),t("MetaRight",92),t("ContextMenu",93),t("Numpad0",96),t("Numpad1",97),t("Numpad2",98),t("Numpad3",99),t("Numpad4",100),t("Numpad5",101),t("Numpad6",102),t("Numpad7",103),t("Numpad8",104),t("Numpad9",105),t("NumpadMultiply",106),t("NumpadAdd",107),t("NumpadSeparator",108),t("NumpadSubtract",109),t("NumpadDecimal",110),t("NumpadDivide",111),t("F1",112),t("F2",113),t("F3",114),t("F4",115),t("F5",116),t("F6",117),t("F7",118),t("F8",119),t("F9",120),t("F10",121),t("F11",122),t("F12",123),t("F13",124),t("F14",125),t("F15",126),t("F16",127),t("F17",128),t("F18",129),t("F19",130),t("F20",131),t("F21",132),t("F22",133),t("F23",134),t("F24",135),t("NumLock",144),t("ScrollLock",145),t("Semicolon",186),t("Equal",187),t("Comma",188),t("Minus",189),t("Period",190),t("Slash",191),t("Backquote",192),t("IntlRo",193),t("BracketLeft",219),t("Backslash",220),t("BracketRight",221),t("Quote",222),t("IntlYen",255)}()},function(t,e,n){"use strict";var o=["hook","on","style","class","props","attrs","dataset"],r=Array.prototype.slice;function i(t,e,n,o){for(var r={ns:e},i=0,a=o.length;i<a;i++){var s=o[i];t[s]&&(r[s]=t[s])}for(var u in t)if("key"!==u&&"classNames"!==u&&"selector"!==u){var c=u.indexOf("-");c>0?d(u.slice(0,c),u.slice(c+1),t[u]):r[u]||d(n,u,t[u])}return r;function d(t,e,n){(r[t]||(r[t]={}))[e]=n}}function a(t,e,n){for(var o=e,r=t.length;o<r;o++){var i=t[o];Array.isArray(i)?a(i,0,n):n.push(i)}}function s(t,e,n,o,r,s){return r=r||{},s=function(t){if(t)for(var e=0,n=t.length;e<n;e++)if(Array.isArray(t[e])){var o=t.slice(0,e);a(t,e,o),t=o;break}return t}(s),"string"==typeof o?function(t,e,n,o,r,a){if(r.selector&&(o+=r.selector),r.classNames){var s=r.classNames;o=o+"."+(Array.isArray(s)?s.join("."):s.replace(/\s+/g,"."))}return{sel:o,data:i(r,t,e,n),children:a.map((function(t){return"string"==typeof(e=t)||"number"==typeof e||"boolean"==typeof e||"symbol"==typeof e||null==e?{text:t}:t;var e})),key:r.key}}(t,e,n,o,r,s):function(t,e,n,o,r,i){var a;if("function"==typeof o)a=o(r,i);else if(o&&"function"==typeof o.view)a=o.view(r,i);else{if(!o||"function"!=typeof o.render)throw"JSX tag must be either a string, a function or an object with 'view' or 'render' methods";a=o.render(r,i)}return a.key=r.key,a}(0,0,0,o,r,s)}function u(t,e,n){return function(i,a,u){return(arguments.length>3||!Array.isArray(u))&&(u=r.call(arguments,2)),s(t,e||"props",n||o,i,a,u)}}t.exports={html:u(void 0),svg:u("http://www.w3.org/2000/svg","attrs"),JSX:u}},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(20),c=n(54),d=n(0),l=n(1),f=function(t){function e(e){var n=t.call(this)||this;return e.forEach((function(t){return n.register(t.kind,t)})),n}return r(e,t),Object.defineProperty(e.prototype,"defaultKind",{get:function(){return c.PolylineEdgeRouter.KIND},enumerable:!0,configurable:!0}),e.prototype.get=function(e){return t.prototype.get.call(this,e||this.defaultKind)},e=i([d.injectable(),s(0,d.multiInject(l.TYPES.IEdgeRouter)),a("design:paramtypes",[Array])],e)}(u.InstanceRegistry);e.EdgeRouterRegistry=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(2);e.viewportFeature=Symbol("viewportFeature"),e.isViewport=function(t){return t instanceof o.SModelRoot&&t.hasFeature(e.viewportFeature)&&"zoom"in t&&"scroll"in t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tagProperty=e.tagParameter=e.decorate=void 0;var o=n(10),r=n(7);function i(t,e,n,r,i){var a={},s="number"==typeof i,u=void 0!==i&&s?i.toString():n;if(s&&void 0!==n)throw new Error(o.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(t,e)&&(a=Reflect.getMetadata(t,e));var c=a[u];if(Array.isArray(c))for(var d=0,l=c;d<l.length;d++){var f=l[d];if(f.key===r.key)throw new Error(o.DUPLICATED_METADATA+" "+f.key.toString())}else c=[];c.push(r),a[u]=c,Reflect.defineMetadata(t,a,e)}function a(t,e){Reflect.decorate(t,e)}function s(t,e){return function(n,o){e(n,o,t)}}e.tagParameter=function(t,e,n,o){i(r.TAGGED,t,e,o,n)},e.tagProperty=function(t,e,n){i(r.TAGGED_PROP,t.constructor,e,n)},e.decorate=function(t,e,n){"number"==typeof n?a([s(n,t)],e):"string"==typeof n?Reflect.decorate([t],e,n):a([t],e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.id=void 0;var o=0;e.id=function(){return o++}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(3);function r(){return-1!==window.navigator.userAgent.indexOf("Mac")}e.isCtrlOrCmd=function(t){return r()?t.metaKey:t.ctrlKey},e.isMac=r,e.isCrossSite=function(t){if(t&&"undefined"!=typeof window&&window.location){var e="";return window.location.protocol&&(e+=window.location.protocol+"//"),window.location.host&&(e+=window.location.host),e.length>0&&!t.startsWith(e)}return!1},e.getWindowScroll=function(){return"undefined"==typeof window?o.ORIGIN_POINT:{x:window.pageXOffset,y:window.pageYOffset}}},function(t,e,n){"use strict";function o(t){return void 0!==t.position}Object.defineProperty(e,"__esModule",{value:!0}),e.moveFeature=Symbol("moveFeature"),e.isLocateable=o,e.isMoveable=function(t){return t.hasFeature(e.moveFeature)&&o(t)}},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(0),c=n(1),d=n(20);e.DIAMOND_ANCHOR_KIND="diamond",e.ELLIPTIC_ANCHOR_KIND="elliptic",e.RECTANGULAR_ANCHOR_KIND="rectangular";var l=function(t){function n(e){var n=t.call(this)||this;return e.forEach((function(t){return n.register(t.kind,t)})),n}return r(n,t),Object.defineProperty(n.prototype,"defaultAnchorKind",{get:function(){return e.RECTANGULAR_ANCHOR_KIND},enumerable:!0,configurable:!0}),n.prototype.get=function(e,n){return t.prototype.get.call(this,e+":"+(n||this.defaultAnchorKind))},n=i([u.injectable(),s(0,u.multiInject(c.TYPES.IAnchorComputer)),a("design:paramtypes",[Array])],n)}(d.InstanceRegistry);e.AnchorComputerRegistry=l},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(3),c=n(12),d=n(5),l=n(33),f=n(24),p=n(0),h=n(1),y=n(110),g=function(){function t(e,n,o){this.elementId=e,this.newViewport=n,this.animate=o,this.kind=t.KIND}return t.KIND="viewport",t}();e.SetViewportAction=g;var v=function(){function t(e){void 0===e&&(e=""),this.requestId=e,this.kind=t.KIND}return t.create=function(){return new t(c.generateRequestId())},t.KIND="getViewport",t}();e.GetViewportAction=v;var m=function(){function t(e,n,o){this.viewport=e,this.canvasBounds=n,this.responseId=o,this.kind=t.KIND}return t.KIND="viewportResult",t}();e.ViewportResult=m;var b=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n.newViewport=e.newViewport,n}var n;return r(e,t),n=e,e.prototype.execute=function(t){var e=t.root,n=e.index.getById(this.action.elementId);if(n&&f.isViewport(n)){if(this.element=n,this.oldViewport={scroll:this.element.scroll,zoom:this.element.zoom},this.action.animate)return new w(this.element,this.oldViewport,this.newViewport,t).start();this.element.scroll=this.newViewport.scroll,this.element.zoom=this.newViewport.zoom}return e},e.prototype.undo=function(t){return new w(this.element,this.newViewport,this.oldViewport,t).start()},e.prototype.redo=function(t){return new w(this.element,this.oldViewport,this.newViewport,t).start()},e.prototype.merge=function(t,e){return!this.action.animate&&t instanceof n&&this.element===t.element&&(this.newViewport=t.newViewport,!0)},e.KIND=g.KIND,e=n=i([p.injectable(),s(0,p.inject(h.TYPES.Action)),a("design:paramtypes",[g])],e)}(d.MergeableCommand);e.SetViewportCommand=b;var _=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n}return r(e,t),e.prototype.retrieveResult=function(t){var e,n=t.root;return e=f.isViewport(n)?{scroll:n.scroll,zoom:n.zoom}:{scroll:u.ORIGIN_POINT,zoom:1},new m(e,n.canvasBounds,this.action.requestId)},e.KIND=v.KIND,e=i([s(0,p.inject(h.TYPES.Action)),a("design:paramtypes",[v])],e)}(y.ModelRequestCommand);e.GetViewportCommand=_;var w=function(t){function e(e,n,o,r){var i=t.call(this,r)||this;return i.element=e,i.oldViewport=n,i.newViewport=o,i.context=r,i.zoomFactor=Math.log(o.zoom/n.zoom),i}return r(e,t),e.prototype.tween=function(t,e){return this.element.scroll={x:(1-t)*this.oldViewport.scroll.x+t*this.newViewport.scroll.x,y:(1-t)*this.oldViewport.scroll.y+t*this.newViewport.scroll.y},this.element.zoom=this.oldViewport.zoom*Math.exp(t*this.zoomFactor),e.root},e}(l.Animation);e.ViewportAnimation=w},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){this.startFn=t,this.nextFn=e}return t.prototype[Symbol.iterator]=function(){var t,e=this,n=((t={state:this.startFn(),next:function(){return e.nextFn(n.state)}})[Symbol.iterator]=function(){return n},t);return n},t.prototype.filter=function(t){return r(this,t)},t.prototype.map=function(t){return i(this,t)},t.prototype.forEach=function(t){var e,n=this[Symbol.iterator](),o=0;do{void 0!==(e=n.next()).value&&t(e.value,o),o++}while(!e.done)},t.prototype.indexOf=function(t){var e,n=this[Symbol.iterator](),o=0;do{if((e=n.next()).value===t)return o;o++}while(!e.done);return-1},t}();function r(t,e){return new o((function(){return a(t)}),(function(t){var n;do{n=t.next()}while(!n.done&&!e(n.value));return n}))}function i(t,n){return new o((function(){return a(t)}),(function(t){var o=t.next(),r=o.done,i=o.value;return r?e.DONE_RESULT:{done:!1,value:n(i)}}))}function a(t){var n=t[Symbol.iterator];if("function"==typeof n)return n.call(t);var o=t.length;return"number"==typeof o&&o>=0?new s(t):{next:function(){return e.DONE_RESULT}}}e.FluentIterableImpl=o,e.toArray=function(t){if(t.constructor===Array)return t;var e=[];return t.forEach((function(t){return e.push(t)})),e},e.DONE_RESULT=Object.freeze({done:!0,value:void 0}),e.filterIterable=r,e.mapIterable=i;var s=function(){function t(t){this.array=t,this.index=0}return t.prototype.next=function(){return this.index<this.array.length?{done:!1,value:this.array[this.index++]}:e.DONE_RESULT},t.prototype[Symbol.iterator]=function(){return this},t}()},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(0),c=n(12),d=n(5),l=n(1),f=n(47),p=function(){function t(e,n){void 0===n&&(n=""),this.options=e,this.requestId=n,this.kind=t.KIND}return t.create=function(e){return new t(e,c.generateRequestId())},t.KIND="requestModel",t}();e.RequestModelAction=p;var h=function(){function t(e,n){void 0===n&&(n=""),this.newRoot=e,this.responseId=n,this.kind=t.KIND}return t.KIND="setModel",t}();e.SetModelAction=h;var y=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n}return r(e,t),e.prototype.execute=function(t){return this.oldRoot=t.modelFactory.createRoot(t.root),this.newRoot=t.modelFactory.createRoot(this.action.newRoot),this.newRoot},e.prototype.undo=function(t){return this.oldRoot},e.prototype.redo=function(t){return this.newRoot},Object.defineProperty(e.prototype,"blockUntil",{get:function(){return function(t){return t.kind===f.InitializeCanvasBoundsCommand.KIND}},enumerable:!0,configurable:!0}),e.KIND=h.KIND,e=i([u.injectable(),s(0,u.inject(l.TYPES.Action)),a("design:paramtypes",[h])],e)}(d.ResetCommand);e.SetModelCommand=y},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(96),a=function(){function t(t,e){void 0===e&&(e=i.easeInOut),this.context=t,this.ease=e}return t.prototype.start=function(){var t=this;return new Promise((function(e,n){var o=void 0,r=0,i=function(n){var a;r++,void 0===o?(o=n,a=0):a=n-o;var s=Math.min(1,a/t.context.duration),u=t.tween(t.ease(s),t.context);t.context.modelChanged.update(u),1===s?(t.context.logger.log(t,1e3*r/t.context.duration+" fps"),e(u)):t.context.syncer.onNextFrame(i)};if(t.context.syncer.isAvailable())t.context.syncer.onNextFrame(i);else{var a=t.tween(1,t.context);e(a)}}))},t}();e.Animation=a;var s=function(t){function e(e,n,o,r){void 0===o&&(o=[]),void 0===r&&(r=i.easeInOut);var a=t.call(this,n,r)||this;return a.model=e,a.context=n,a.components=o,a.ease=r,a}return r(e,t),e.prototype.include=function(t){return this.components.push(t),this},e.prototype.tween=function(t,e){for(var n=0,o=this.components;n<o.length;n++){o[n].tween(t,e)}return this.model},e}(a);e.CompoundAnimation=s},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(5),c=n(2),d=n(1),l=n(0);function f(t){return t instanceof c.SChildElement&&t.hasFeature(e.deletableFeature)}e.deletableFeature=Symbol("deletableFeature"),e.isDeletable=f;var p=function(){function t(e){this.elementIds=e,this.kind=t.KIND}return t.KIND="delete",t}();e.DeleteElementAction=p;var h=function(){};e.ResolvedDelete=h;var y=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n.resolvedDeletes=[],n}return r(e,t),e.prototype.execute=function(t){for(var e=t.root.index,n=0,o=this.action.elementIds;n<o.length;n++){var r=o[n],i=e.getById(r);i&&f(i)&&(this.resolvedDeletes.push({child:i,parent:i.parent}),i.parent.remove(i))}return t.root},e.prototype.undo=function(t){for(var e=0,n=this.resolvedDeletes;e<n.length;e++){var o=n[e];o.parent.add(o.child)}return t.root},e.prototype.redo=function(t){for(var e=0,n=this.resolvedDeletes;e<n.length;e++){var o=n[e];o.parent.remove(o.child)}return t.root},e.KIND=p.KIND,e=i([l.injectable(),s(0,l.inject(d.TYPES.Action)),a("design:paramtypes",[p])],e)}(u.Command);e.DeleteElementCommand=y},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hoverFeedbackFeature=Symbol("hoverFeedbackFeature"),e.isHoverable=function(t){return t.hasFeature(e.hoverFeedbackFeature)},e.popupFeature=Symbol("popupFeature"),e.hasPopupFeature=function(t){return t.hasFeature(e.popupFeature)}},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),a=n(4),s=n(45),u=n(34),c=n(44),d=n(42),l=n(35),f=n(28),p=n(6),h=n(11),y=n(76),g=n(3),v=n(31),m=function(t){function e(e){return void 0===e&&(e=new O),t.call(this,e)||this}return r(e,t),e}(y.ViewportRootElement);e.SGraph=m;var b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.selected=!1,e.hoverFeedback=!1,e.opacity=1,e}return r(e,t),e.prototype.canConnect=function(t,e){return void 0===this.children.find((function(t){return t instanceof _}))},e.DEFAULT_FEATURES=[p.connectableFeature,u.deletableFeature,h.selectFeature,a.boundsFeature,f.moveFeature,a.layoutContainerFeature,d.fadeFeature,l.hoverFeedbackFeature,l.popupFeature],e}(p.SConnectableElement);e.SNode=b;var _=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.selected=!1,e.hoverFeedback=!1,e.opacity=1,e}return r(e,t),e.DEFAULT_FEATURES=[p.connectableFeature,h.selectFeature,a.boundsFeature,d.fadeFeature,l.hoverFeedbackFeature],e}(p.SConnectableElement);e.SPort=_;var w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.selected=!1,e.hoverFeedback=!1,e.opacity=1,e}return r(e,t),e.DEFAULT_FEATURES=[c.editFeature,u.deletableFeature,h.selectFeature,d.fadeFeature,l.hoverFeedbackFeature],e}(p.SRoutableElement);e.SEdge=w;var S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.selected=!1,e.alignment=g.ORIGIN_POINT,e.opacity=1,e}return r(e,t),e.DEFAULT_FEATURES=[a.boundsFeature,a.alignFeature,a.layoutableChildFeature,s.edgeLayoutFeature,d.fadeFeature],e}(a.SShapeElement);e.SLabel=S;var P=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.opacity=1,e}return r(e,t),e.DEFAULT_FEATURES=[a.boundsFeature,a.layoutContainerFeature,a.layoutableChildFeature,d.fadeFeature],e}(a.SShapeElement);e.SCompartment=P;var O=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.outgoing=new Map,e.incoming=new Map,e}return r(e,t),e.prototype.add=function(e){if(t.prototype.add.call(this,e),e instanceof w){if(e.sourceId){var n=this.outgoing.get(e.sourceId);void 0===n?this.outgoing.set(e.sourceId,[e]):n.push(e)}if(e.targetId){var o=this.incoming.get(e.targetId);void 0===o?this.incoming.set(e.targetId,[e]):o.push(e)}}},e.prototype.remove=function(e){if(t.prototype.remove.call(this,e),e instanceof w){var n=this.outgoing.get(e.sourceId);if(void 0!==n)(o=n.indexOf(e))>=0&&(1===n.length?this.outgoing.delete(e.sourceId):n.splice(o,1));var o,r=this.incoming.get(e.targetId);if(void 0!==r)(o=r.indexOf(e))>=0&&(1===r.length?this.incoming.delete(e.targetId):r.splice(o,1))}},e.prototype.getAttachedElements=function(t){var e=this;return new v.FluentIterableImpl((function(){return{outgoing:e.outgoing.get(t.id),incoming:e.incoming.get(t.id),nextOutgoingIndex:0,nextIncomingIndex:0}}),(function(t){var e=t.nextOutgoingIndex;if(void 0!==t.outgoing&&e<t.outgoing.length)return t.nextOutgoingIndex=e+1,{done:!1,value:t.outgoing[e]};if(e=t.nextIncomingIndex,void 0!==t.incoming)for(;e<t.incoming.length;){var n=t.incoming[e];if(n.sourceId!==n.targetId)return t.nextIncomingIndex=e+1,{done:!1,value:n};e++}return{done:!0,value:void 0}}))},e.prototype.getIncomingEdges=function(t){return this.incoming.get(t.id)||[]},e.prototype.getOutgoingEdges=function(t){return this.outgoing.get(t.id)||[]},e}(i.SModelIndex);e.SGraphIndex=O},function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var i=n(4),a=n(60),s=n(1),u=n(3),c=n(0),d=function(){function t(e,n){void 0===n&&(n=""),this.svg=e,this.responseId=n,this.kind=t.KIND}return t.KIND="exportSvg",t}();e.ExportSvgAction=d;var l=function(){function t(){}return t.prototype.export=function(t,e){if("undefined"!=typeof document){var n=document.getElementById(this.options.hiddenDiv);if(null!==n&&n.firstElementChild&&"svg"===n.firstElementChild.tagName){var o=n.firstElementChild,r=this.createSvg(o,t);this.actionDispatcher.dispatch(new d(r,e?e.requestId:""))}}},t.prototype.createSvg=function(t,e){var n=new XMLSerializer,o=n.serializeToString(t),r=document.createElement("iframe");if(document.body.appendChild(r),!r.contentWindow)throw new Error("IFrame has no contentWindow");var i=r.contentWindow.document;i.open(),i.write(o),i.close();var a=i.getElementById(t.id);a.removeAttribute("opacity"),this.copyStyles(t,a,["width","height","opacity"]),a.setAttribute("version","1.1");var s=this.getBounds(e);a.setAttribute("viewBox",s.x+" "+s.y+" "+s.width+" "+s.height);var u=n.serializeToString(a);return document.body.removeChild(r),u},t.prototype.copyStyles=function(t,e,n){for(var o=getComputedStyle(t),r=getComputedStyle(e),i="",a=0;a<o.length;a++){var s=o[a];if(-1===n.indexOf(s)){var u=o.getPropertyValue(s);r.getPropertyValue(s)!==u&&(i+=s+":"+u+";")}}""!==i&&e.setAttribute("style",i);for(a=0;a<t.childNodes.length;++a){var c=t.childNodes[a],d=e.childNodes[a];c instanceof Element&&this.copyStyles(c,d,[])}},t.prototype.getBounds=function(t){var e=[u.EMPTY_BOUNDS];return t.children.forEach((function(t){i.isBoundsAware(t)&&e.push(t.bounds)})),e.reduce((function(t,e){return u.combine(t,e)}))},o([c.inject(s.TYPES.ViewerOptions),r("design:type",Object)],t.prototype,"options",void 0),o([c.inject(s.TYPES.IActionDispatcher),r("design:type",a.ActionDispatcher)],t.prototype,"actionDispatcher",void 0),o([c.inject(s.TYPES.ILogger),r("design:type",Object)],t.prototype,"log",void 0),t=o([c.injectable()],t)}();e.SvgExporter=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.circularDependencyToException=e.listMetadataForTarget=e.listRegisteredBindingsForServiceIdentifier=e.getServiceIdentifierAsString=e.getFunctionName=void 0;var o=n(10);function r(t){return"function"==typeof t?t.name:"symbol"==typeof t?t.toString():t}function i(t){if(t.name)return t.name;var e=t.toString(),n=e.match(/^function\s*([^\s(]+)/);return n?n[1]:"Anonymous function: "+e}e.getServiceIdentifierAsString=r,e.listRegisteredBindingsForServiceIdentifier=function(t,e,n){var o="",r=n(t,e);return 0!==r.length&&(o="\nRegistered bindings:",r.forEach((function(t){var e="Object";null!==t.implementationType&&(e=i(t.implementationType)),o=o+"\n "+e,t.constraint.metaData&&(o=o+" - "+t.constraint.metaData)}))),o},e.circularDependencyToException=function t(e){e.childRequests.forEach((function(e){if(function t(e,n){return null!==e.parentRequest&&(e.parentRequest.serviceIdentifier===n||t(e.parentRequest,n))}(e,e.serviceIdentifier)){var n=function(t){return function t(e,n){void 0===n&&(n=[]);var o=r(e.serviceIdentifier);return n.push(o),null!==e.parentRequest?t(e.parentRequest,n):n}(t).reverse().join(" --\x3e ")}(e);throw new Error(o.CIRCULAR_DEPENDENCY+" "+n)}t(e)}))},e.listMetadataForTarget=function(t,e){if(e.isTagged()||e.isNamed()){var n="",o=e.getNamedTag(),r=e.getCustomTags();return null!==o&&(n+=o.toString()+"\n"),null!==r&&r.forEach((function(t){n+=t.toString()+"\n"}))," "+t+"\n "+t+" - "+n}return" "+t},e.getFunctionName=i},function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=function(){function t(){this.tasks=[],this.endTasks=[],this.triggered=!1}return t.prototype.isAvailable=function(){return"function"==typeof requestAnimationFrame},t.prototype.onNextFrame=function(t){this.tasks.push(t),this.trigger()},t.prototype.onEndOfNextFrame=function(t){this.endTasks.push(t),this.trigger()},t.prototype.trigger=function(){var t=this;this.triggered||(this.triggered=!0,this.isAvailable()?requestAnimationFrame((function(e){return t.run(e)})):setTimeout((function(e){return t.run(e)})))},t.prototype.run=function(t){var e=this.tasks,n=this.endTasks;this.triggered=!1,this.tasks=[],this.endTasks=[],e.forEach((function(e){return e.call(void 0,t)})),n.forEach((function(e){return e.call(void 0,t)}))},t=o([r.injectable()],t)}();e.AnimationFrameSyncer=i},function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),a=n(1),s=function(){function t(){}return t.prototype.getPrefix=function(){return void 0!==this.viewerOptions&&void 0!==this.viewerOptions.baseDiv?this.viewerOptions.baseDiv+"_":""},t.prototype.createUniqueDOMElementId=function(t){return this.getPrefix()+t.id},t.prototype.findSModelIdByDOMElement=function(t){return t.id.replace(this.getPrefix(),"")},o([i.inject(a.TYPES.ViewerOptions),r("design:type",Object)],t.prototype,"viewerOptions",void 0),t=o([i.injectable()],t)}();e.DOMHelper=s},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},a=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},u=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var c=n(0),d=n(12),l=n(5),f=n(1),p=n(4),h=function(){function t(e){this.bounds=e,this.kind=t.KIND}return t.KIND="setBounds",t}();e.SetBoundsAction=h;var y=function(){function t(e,n){void 0===n&&(n=""),this.newRoot=e,this.requestId=n,this.kind=t.KIND}return t.create=function(e){return new t(e,d.generateRequestId())},t.KIND="requestBounds",t}();e.RequestBoundsAction=y;var g=function(){function t(e,n,o,r){void 0===r&&(r=""),this.bounds=e,this.revision=n,this.alignments=o,this.responseId=r,this.kind=t.KIND}return t.KIND="computedBounds",t}();e.ComputedBoundsAction=g;var v=function(){function t(){this.kind=t.KIND}return t.KIND="layout",t}();e.LayoutAction=v;var m=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n.bounds=[],n}return r(e,t),e.prototype.execute=function(t){var e=this;return this.action.bounds.forEach((function(n){var o=t.root.index.getById(n.elementId);o&&p.isBoundsAware(o)&&e.bounds.push({element:o,oldBounds:o.bounds,newPosition:n.newPosition,newSize:n.newSize})})),this.redo(t)},e.prototype.undo=function(t){return this.bounds.forEach((function(t){return t.element.bounds=t.oldBounds})),t.root},e.prototype.redo=function(t){return this.bounds.forEach((function(t){t.newPosition?t.element.bounds=i(i({},t.newPosition),t.newSize):t.element.bounds=i({x:t.element.bounds.x,y:t.element.bounds.y},t.newSize)})),t.root},e.KIND=h.KIND,e=a([c.injectable(),u(0,c.inject(f.TYPES.Action)),s("design:paramtypes",[h])],e)}(l.SystemCommand);e.SetBoundsCommand=m;var b=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n}return r(e,t),e.prototype.execute=function(t){return{model:t.modelFactory.createRoot(this.action.newRoot),modelChanged:!0,cause:this.action}},Object.defineProperty(e.prototype,"blockUntil",{get:function(){return function(t){return t.kind===g.KIND}},enumerable:!0,configurable:!0}),e.KIND=y.KIND,e=a([c.injectable(),u(0,c.inject(f.TYPES.Action)),s("design:paramtypes",[y])],e)}(l.HiddenCommand);e.RequestBoundsCommand=b},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.fadeFeature=Symbol("fadeFeature"),e.isFadeable=function(t){return t.hasFeature(e.fadeFeature)&&void 0!==t.opacity}},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(0),c=n(12),d=n(5),l=n(110),f=n(2),p=n(8),h=n(1),y=n(17),g=n(16),v=n(9),m=n(27),b=n(31),_=n(21),w=n(69),S=n(70),P=n(53),O=n(6),E=n(6),x=n(73),R=n(11),T=function(){function t(e,n){void 0===e&&(e=[]),void 0===n&&(n=[]),this.selectedElementsIDs=e,this.deselectedElementsIDs=n,this.kind=t.KIND}return t.KIND="elementSelected",t}();e.SelectAction=T;var I=function(){function t(e){void 0===e&&(e=!0),this.select=e,this.kind=t.KIND}return t.KIND="allSelected",t}();e.SelectAllAction=I;var A=function(){function t(e){void 0===e&&(e=""),this.requestId=e,this.kind=t.KIND}return t.create=function(){return new t(c.generateRequestId())},t.KIND="getSelection",t}();e.GetSelectionAction=A;var M=function(){function t(e,n){void 0===e&&(e=[]),this.selectedElementsIDs=e,this.responseId=n,this.kind=t.KIND}return t.KIND="selectionResult",t}();e.SelectionResult=M;var j=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n.selected=[],n.deselected=[],n}return r(e,t),e.prototype.execute=function(t){var e=this,n=t.root;return this.action.selectedElementsIDs.forEach((function(t){var o=n.index.getById(t);o instanceof f.SChildElement&&R.isSelectable(o)&&e.selected.push(o)})),this.action.deselectedElementsIDs.forEach((function(t){var o=n.index.getById(t);o instanceof f.SChildElement&&R.isSelectable(o)&&e.deselected.push(o)})),this.redo(t)},e.prototype.undo=function(t){for(var e=0,n=this.selected;e<n.length;e++){n[e].selected=!1}for(var o=0,r=this.deselected;o<r.length;o++){r[o].selected=!0}return t.root},e.prototype.redo=function(t){for(var e=0,n=this.deselected;e<n.length;e++){n[e].selected=!1}for(var o=0,r=this.selected;o<r.length;o++){r[o].selected=!0}return t.root},e.KIND=T.KIND,e=i([u.injectable(),s(0,u.inject(h.TYPES.Action)),a("design:paramtypes",[T])],e)}(d.Command);e.SelectCommand=j;var C=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n.previousSelection={},n}return r(e,t),e.prototype.execute=function(t){return this.selectAll(t.root,this.action.select),t.root},e.prototype.selectAll=function(t,e){R.isSelectable(t)&&(this.previousSelection[t.id]=t.selected,t.selected=e);for(var n=0,o=t.children;n<o.length;n++){var r=o[n];this.selectAll(r,e)}},e.prototype.undo=function(t){var e=t.root.index;for(var n in this.previousSelection)if(this.previousSelection.hasOwnProperty(n)){var o=e.getById(n);void 0!==o&&R.isSelectable(o)&&(o.selected=this.previousSelection[n])}return t.root},e.prototype.redo=function(t){return this.selectAll(t.root,this.action.select),t.root},e.KIND=I.KIND,e=i([u.injectable(),s(0,u.inject(h.TYPES.Action)),a("design:paramtypes",[I])],e)}(d.Command);e.SelectAllCommand=C;var D=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.wasSelected=!1,e.hasDragged=!1,e}return r(e,t),e.prototype.mouseDown=function(t,e){var n=[];if(0===e.button){if(void 0!==this.buttonHandlerRegistry&&t instanceof S.SButton&&t.enabled){var o=this.buttonHandlerRegistry.get(t.type);if(void 0!==o)return o.buttonPressed(t)}var r=p.findParentByFeature(t,R.isSelectable);if(void 0!==r||t instanceof f.SModelRoot){this.hasDragged=!1;var i=[];if(m.isCtrlOrCmd(e)||(i=b.toArray(t.root.index.all().filter((function(t){return R.isSelectable(t)&&t.selected&&!(r instanceof O.SRoutingHandle&&t===r.parent)})))),void 0!==r)if(r.selected)m.isCtrlOrCmd(e)?(this.wasSelected=!1,n.push(new T([],[r.id])),r instanceof E.SRoutableElement&&n.push(new P.SwitchEditModeAction([],[r.id]))):this.wasSelected=!0;else{this.wasSelected=!1,n.push(new T([r.id],i.map((function(t){return t.id})))),n.push(new x.BringToFrontAction([r.id]));var a=i.filter((function(t){return t instanceof E.SRoutableElement})).map((function(t){return t.id}));r instanceof E.SRoutableElement?n.push(new P.SwitchEditModeAction([r.id],a)):a.length>0&&n.push(new P.SwitchEditModeAction([],a))}else n.push(new T([],i.map((function(t){return t.id})))),(a=i.filter((function(t){return t instanceof E.SRoutableElement})).map((function(t){return t.id}))).length>0&&n.push(new P.SwitchEditModeAction([],a))}}return n},e.prototype.mouseMove=function(t,e){return this.hasDragged=!0,[]},e.prototype.mouseUp=function(t,e){if(0===e.button&&!this.hasDragged){var n=p.findParentByFeature(t,R.isSelectable);if(void 0!==n&&this.wasSelected)return[new T([n.id],[])]}return this.hasDragged=!1,[]},e.prototype.decorate=function(t,e){var n=p.findParentByFeature(e,R.isSelectable);return void 0!==n&&v.setClass(t,"selected",n.selected),t},i([u.inject(w.ButtonHandlerRegistry),u.optional(),a("design:type",w.ButtonHandlerRegistry)],e.prototype,"buttonHandlerRegistry",void 0),e}(g.MouseListener);e.SelectMouseListener=D;var N=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n.previousSelection={},n}return r(e,t),e.prototype.retrieveResult=function(t){var e=t.root.index.all().filter((function(t){return R.isSelectable(t)&&t.selected})).map((function(t){return t.id}));return new M(b.toArray(e),this.action.requestId)},e.KIND=A.KIND,e=i([u.injectable(),s(0,u.inject(h.TYPES.Action)),a("design:paramtypes",[A])],e)}(l.ModelRequestCommand);e.GetSelectionCommand=N;var L=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.keyDown=function(t,e){return _.matchesKeystroke(e,"KeyA","ctrlCmd")?[new I]:[]},e}(y.KeyListener);e.SelectKeyboardListener=L},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(6);e.editFeature=Symbol("editFeature"),e.canEditRouting=function(t){return t instanceof o.SRoutableElement&&t.hasFeature(e.editFeature)},e.editLabelFeature=Symbol("editLabelFeature"),e.isEditableLabel=function(t){return"text"in t&&t.hasFeature(e.editLabelFeature)},e.withEditLabelFeature=Symbol("withEditLabelFeature"),e.isWithEditableLabel=function(t){return"editableLabel"in t&&t.hasFeature(e.withEditLabelFeature)}},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),a=n(4),s=n(6);e.edgeLayoutFeature=Symbol("edgeLayout"),e.isEdgeLayoutable=function(t){return t instanceof i.SChildElement&&t.parent instanceof s.SRoutableElement&&"edgePlacement"in t&&a.isBoundsAware(t)&&t.hasFeature(e.edgeLayoutFeature)};var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e}(Object);e.EdgePlacement=u,e.DEFAULT_EDGE_PLACEMENT={rotate:!0,side:"top",position:.5,offset:7}},function(t,e,n){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n(32),u=n(1),c=n(37),d=n(2),l=function(){function t(){}return t.prototype.initialize=function(t){t.register(s.RequestModelAction.KIND,this),t.register(c.ExportSvgAction.KIND,this)},r([a.inject(u.TYPES.IActionDispatcher),i("design:type",Object)],t.prototype,"actionDispatcher",void 0),r([a.inject(u.TYPES.ViewerOptions),i("design:type",Object)],t.prototype,"viewerOptions",void 0),t=r([a.injectable()],t)}();e.ModelSource=l;var f=function(){function t(){}return t.prototype.apply=function(t,e){var n=new d.SModelIndex;n.add(t);for(var o=0,r=e.bounds;o<r.length;o++){var i=r[o];void 0!==(u=n.getById(i.elementId))&&this.applyBounds(u,i.newPosition,i.newSize)}if(void 0!==e.alignments)for(var a=0,s=e.alignments;a<s.length;a++){var u,c=s[a];void 0!==(u=n.getById(c.elementId))&&this.applyAlignment(u,c.newAlignment)}return n},t.prototype.applyAlignment=function(t,e){t.alignment={x:e.x,y:e.y}},t.prototype.applyBounds=function(t,e,n){var r=t;e&&(r.position=o({},e)),r.size=o({},n)},t=r([a.injectable()],t)}();e.ComputedBoundsApplicator=f},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(0),c=n(1),d=n(3),l=n(2),f=n(5),p=n(27),h=function(){function t(){}return t.prototype.decorate=function(t,e){return e instanceof l.SModelRoot&&!d.isValidDimension(e.canvasBounds)&&(this.rootAndVnode=[e,t]),t},t.prototype.postUpdate=function(){if(void 0!==this.rootAndVnode){var t=this.rootAndVnode[1].elm,e=this.rootAndVnode[0].canvasBounds;if(void 0!==t){var n=this.getBoundsInPage(t);d.almostEquals(n.x,e.x)&&d.almostEquals(n.y,e.y)&&d.almostEquals(n.width,e.width)&&d.almostEquals(n.height,e.width)||this.actionDispatcher.dispatch(new y(n))}this.rootAndVnode=void 0}},t.prototype.getBoundsInPage=function(t){var e=t.getBoundingClientRect(),n=p.getWindowScroll();return{x:e.left+n.x,y:e.top+n.y,width:e.width,height:e.height}},i([u.inject(c.TYPES.IActionDispatcher),a("design:type",Object)],t.prototype,"actionDispatcher",void 0),t=i([u.injectable()],t)}();e.CanvasBoundsInitializer=h;var y=function(){function t(e){this.newCanvasBounds=e,this.kind=t.KIND}return t.KIND="initializeCanvasBounds",t}();e.InitializeCanvasBoundsAction=y;var g=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n}return r(e,t),e.prototype.execute=function(t){return this.newCanvasBounds=this.action.newCanvasBounds,t.root.canvasBounds=this.newCanvasBounds,t.root},e.prototype.undo=function(t){return t.root},e.prototype.redo=function(t){return t.root},e.KIND=y.KIND,e=i([u.injectable(),s(0,u.inject(c.TYPES.Action)),a("design:paramtypes",[y])],e)}(f.SystemCommand);e.InitializeCanvasBoundsCommand=g},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(0),c=n(1),d=n(20),l=n(49),f=function(t){function e(e,n){var o=t.call(this)||this;return e.forEach((function(t){return o.register(t.actionKind,t.factory())})),n.forEach((function(t){return o.initializeActionHandler(t)})),o}return r(e,t),e.prototype.initializeActionHandler=function(t){t.initialize(this)},e=i([u.injectable(),s(0,u.multiInject(c.TYPES.ActionHandlerRegistration)),s(0,u.optional()),s(1,u.multiInject(c.TYPES.IActionHandlerInitializer)),s(1,u.optional()),a("design:paramtypes",[Array,Array])],e)}(d.MultiInstanceRegistry);e.ActionHandlerRegistry=f,e.configureActionHandler=function(t,e,n){if("function"==typeof n){if(!l.isInjectable(n))throw new Error("Action handlers should be @injectable: "+n.name);t.isBound(n)||t.bind(n).toSelf()}t.bind(c.TYPES.ActionHandlerRegistration).toDynamicValue((function(t){return{actionKind:e,factory:function(){return t.container.get(n)}}}))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isInjectable=function(t){return void 0!==Reflect.getMetadata("inversify:paramtypes",t)}},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}},u=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,r++)o[r]=i[a];return o};Object.defineProperty(e,"__esModule",{value:!0});var c=n(0),d=n(20),l=n(5),f=n(1),p=function(t){function e(e){void 0===e&&(e=[]);var n=t.call(this)||this;return e.forEach((function(t){return n.register(t.id(),t)})),n}return r(e,t),e=i([c.injectable(),s(0,c.multiInject(f.TYPES.IUIExtension)),s(0,c.optional()),a("design:paramtypes",[Array])],e)}(d.InstanceRegistry);e.UIExtensionRegistry=p;var h=function(){function t(e,n,o){void 0===o&&(o=[]),this.extensionId=e,this.visible=n,this.contextElementsId=o,this.kind=t.KIND}return t.KIND="setUIExtensionVisibility",t}();e.SetUIExtensionVisibilityAction=h;var y=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n}return r(e,t),e.prototype.execute=function(t){var e=this.registry.get(this.action.extensionId);return e&&(this.action.visible?e.show.apply(e,u([t.root],this.action.contextElementsId)):e.hide()),{model:t.root,modelChanged:!1}},e.prototype.undo=function(t){return{model:t.root,modelChanged:!1}},e.prototype.redo=function(t){return{model:t.root,modelChanged:!1}},e.KIND=h.KIND,i([c.inject(f.TYPES.UIExtensionRegistry),a("design:type",p)],e.prototype,"registry",void 0),e=i([c.injectable(),s(0,c.inject(f.TYPES.Action)),a("design:paramtypes",[h])],e)}(l.SystemCommand);e.SetUIExtensionVisibilityCommand=y},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(22),c=n(0),d=n(1),l=n(20),f=n(3),p=n(49),h=n(19),y=n(8),g=function(t){function e(e){var n=t.call(this)||this;return n.registerDefaults(),e.forEach((function(t){return n.register(t.type,t.factory())})),n}return r(e,t),e.prototype.registerDefaults=function(){this.register(h.EMPTY_ROOT.type,new m)},e.prototype.missing=function(t){return new b},e=i([c.injectable(),s(0,c.multiInject(d.TYPES.ViewRegistration)),s(0,c.optional()),a("design:paramtypes",[Array])],e)}(l.InstanceRegistry);function v(t,e,n){if("function"==typeof n){if(!p.isInjectable(n))throw new Error("Views should be @injectable: "+n.name);t.isBound(n)||t.bind(n).toSelf()}t.bind(d.TYPES.ViewRegistration).toDynamicValue((function(t){return{type:e,factory:function(){return t.container.get(n)}}}))}e.ViewRegistry=g,e.configureModelElement=function(t,e,n,o,r){y.registerModelElement(t,e,n,r),v(t,e,o)},e.configureView=v;var m=function(){function t(){}return t.prototype.render=function(t,e){return u.svg("svg",{"class-sprotty-empty":!0})},t=i([c.injectable()],t)}();e.EmptyView=m;var b=function(){function t(){}return t.prototype.render=function(t,e){var n=t.position||f.ORIGIN_POINT;return u.svg("text",{"class-sprotty-missing":!0,x:n.x,y:n.y},"?",t.id,"?")},t=i([c.injectable()],t)}();e.MissingView=b},function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(3),a=n(4),s=function(){function t(){}return t.prototype.isVisible=function(t,e){if("hidden"===e.targetKind)return!0;if(!i.isValidDimension(t.bounds))return!0;var n=a.getAbsoluteBounds(t),o=t.root.canvasBounds;return n.x<=o.width&&n.x+n.width>=0&&n.y<=o.height&&n.y+n.height>=0},t=o([r.injectable()],t)}();e.ShapeView=s},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(0),c=n(5),d=n(2),l=n(1),f=n(6),p=n(23),h=n(44),y=function(){function t(e,n){void 0===e&&(e=[]),void 0===n&&(n=[]),this.elementsToActivate=e,this.elementsToDeactivate=n,this.kind=t.KIND}return t.KIND="switchEditMode",t}();e.SwitchEditModeAction=y;var g=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n.elementsToActivate=[],n.elementsToDeactivate=[],n.handlesToRemove=[],n}return r(e,t),e.prototype.execute=function(t){var e=this,n=t.root.index;return this.action.elementsToActivate.forEach((function(t){var o=n.getById(t);void 0!==o&&e.elementsToActivate.push(o)})),this.action.elementsToDeactivate.forEach((function(t){var o=n.getById(t);if(void 0!==o&&e.elementsToDeactivate.push(o),o instanceof f.SRoutingHandle&&o.parent instanceof f.SRoutableElement){var r=o.parent;e.shouldRemoveHandle(o,r)&&(e.handlesToRemove.push({handle:o,parent:r}),e.elementsToDeactivate.push(r),e.elementsToActivate.push(r))}})),this.doExecute(t)},e.prototype.doExecute=function(t){var e=this;return this.handlesToRemove.forEach((function(t){t.point=t.parent.routingPoints.splice(t.handle.pointIndex,1)[0]})),this.elementsToDeactivate.forEach((function(t){t instanceof f.SRoutableElement?t.removeAll((function(t){return t instanceof f.SRoutingHandle})):t instanceof f.SRoutingHandle&&(t.editMode=!1,t.danglingAnchor&&t.parent instanceof f.SRoutableElement&&t.danglingAnchor.original&&(t.parent.source===t.danglingAnchor?t.parent.sourceId=t.danglingAnchor.original.id:t.parent.target===t.danglingAnchor&&(t.parent.targetId=t.danglingAnchor.original.id),t.danglingAnchor.parent.remove(t.danglingAnchor),t.danglingAnchor=void 0))})),this.elementsToActivate.forEach((function(t){h.canEditRouting(t)&&t instanceof d.SParentElement?e.edgeRouterRegistry.get(t.routerKind).createRoutingHandles(t):t instanceof f.SRoutingHandle&&(t.editMode=!0)})),t.root},e.prototype.shouldRemoveHandle=function(t,e){return"junction"===t.kind&&void 0===this.edgeRouterRegistry.get(e.routerKind).route(e).find((function(e){return e.pointIndex===t.pointIndex}))},e.prototype.undo=function(t){var e=this;return this.handlesToRemove.forEach((function(t){void 0!==t.point&&t.parent.routingPoints.splice(t.handle.pointIndex,0,t.point)})),this.elementsToActivate.forEach((function(t){t instanceof f.SRoutableElement?t.removeAll((function(t){return t instanceof f.SRoutingHandle})):t instanceof f.SRoutingHandle&&(t.editMode=!1)})),this.elementsToDeactivate.forEach((function(t){h.canEditRouting(t)?e.edgeRouterRegistry.get(t.routerKind).createRoutingHandles(t):t instanceof f.SRoutingHandle&&(t.editMode=!0)})),t.root},e.prototype.redo=function(t){return this.doExecute(t)},e.KIND=y.KIND,i([u.inject(p.EdgeRouterRegistry),a("design:type",p.EdgeRouterRegistry)],e.prototype,"edgeRouterRegistry",void 0),e=i([u.injectable(),s(0,u.inject(l.TYPES.Action)),a("design:paramtypes",[y])],e)}(c.Command);e.SwitchEditModeCommand=g},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),u=n(3),c=n(6),d=n(29),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n;return r(e,t),n=e,Object.defineProperty(e.prototype,"kind",{get:function(){return n.KIND},enumerable:!0,configurable:!0}),e.prototype.getOptions=function(t){return{minimalPointDistance:2,removeAngleThreshold:.1,standardDistance:20,selfEdgeOffset:.25}},e.prototype.route=function(t){var e,n,o=t.source,r=t.target;if(void 0===o||void 0===r)return[];var i=this.getOptions(t),a=t.routingPoints.length>0?t.routingPoints:[];this.cleanupRoutingPoints(t,a,!1,!1);var s=void 0!==a?a.length:0;if(0===s){var c=u.center(r.bounds);e=this.getTranslatedAnchor(o,c,r.parent,t,t.sourceAnchorCorrection);var d=u.center(o.bounds);n=this.getTranslatedAnchor(r,d,o.parent,t,t.targetAnchorCorrection)}else{var l=a[0];e=this.getTranslatedAnchor(o,l,t.parent,t,t.sourceAnchorCorrection);var f=a[s-1];n=this.getTranslatedAnchor(r,f,t.parent,t,t.targetAnchorCorrection)}var p=[];p.push({kind:"source",x:e.x,y:e.y});for(var h=0;h<s;h++){var y=a[h];(h>0&&h<s-1||0===h&&u.maxDistance(e,y)>=i.minimalPointDistance+(t.sourceAnchorCorrection||0)||h===s-1&&u.maxDistance(y,n)>=i.minimalPointDistance+(t.targetAnchorCorrection||0))&&p.push({kind:"linear",x:y.x,y:y.y,pointIndex:h})}return p.push({kind:"target",x:n.x,y:n.y}),this.filterEditModeHandles(p,t,i)},e.prototype.filterEditModeHandles=function(t,e,n){if(0===e.children.length)return t;for(var o=0,r=function(){var r=t[o];if(void 0!==r.pointIndex){var i=e.children.find((function(t){return t instanceof c.SRoutingHandle&&"junction"===t.kind&&t.pointIndex===r.pointIndex}));if(void 0!==i&&i.editMode&&o>0&&o<t.length-1){var a=t[o-1],s=t[o+1],d={x:a.x-r.x,y:a.y-r.y},l={x:s.x-r.x,y:s.y-r.y},f=u.angleBetweenPoints(d,l);if(Math.abs(Math.PI-f)<n.removeAngleThreshold)return t.splice(o,1),"continue"}}o++};o<t.length;)r();return t},e.prototype.createRoutingHandles=function(t){var e=t.routingPoints.length;this.addHandle(t,"source","routing-point",-2),this.addHandle(t,"line","volatile-routing-point",-1);for(var n=0;n<e;n++)this.addHandle(t,"junction","routing-point",n),this.addHandle(t,"line","volatile-routing-point",n);this.addHandle(t,"target","routing-point",e)},e.prototype.getInnerHandlePosition=function(t,e,n){if("line"===n.kind){var o=this.findRouteSegment(t,e,n.pointIndex),r=o.start,i=o.end;if(void 0!==r&&void 0!==i)return u.centerOfLine(r,i)}},e.prototype.applyInnerHandleMoves=function(t,e){var n=this;e.forEach((function(e){var o=e.handle,r=t.routingPoints,i=o.pointIndex;"line"===o.kind&&(o.kind="junction",o.type="routing-point",r.splice(i+1,0,e.fromPosition||r[Math.max(i,0)]),t.children.forEach((function(t){t instanceof c.SRoutingHandle&&(t===o||t.pointIndex>i)&&t.pointIndex++})),n.addHandle(t,"line","volatile-routing-point",i),n.addHandle(t,"line","volatile-routing-point",i+1),i++),i>=0&&i<r.length&&(r[i]=e.toPosition)}))},e.KIND="polyline",i([s.inject(d.AnchorComputerRegistry),a("design:type",d.AnchorComputerRegistry)],e.prototype,"anchorRegistry",void 0),e=n=i([s.injectable()],e)}(n(72).LinearEdgeRouter);e.PolylineEdgeRouter=l},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(3),c=n(21),d=n(2),l=n(5),f=n(17),p=n(4),h=n(11),y=n(30),g=n(24),v=n(0),m=n(1),b=function(){function t(e,n,o){void 0===n&&(n=!0),void 0===o&&(o=!1),this.elementIds=e,this.animate=n,this.retainZoom=o,this.kind=t.KIND}return t.KIND="center",t}();e.CenterAction=b;var _=function(){function t(e,n,o,r){void 0===r&&(r=!0),this.elementIds=e,this.padding=n,this.maxZoom=o,this.animate=r,this.kind=t.KIND}return t.KIND="fit",t}();e.FitToScreenAction=_;var w=function(t){function e(e){var n=t.call(this)||this;return n.animate=e,n}return r(e,t),e.prototype.initialize=function(t){var e=this;if(g.isViewport(t)){this.oldViewport={scroll:t.scroll,zoom:t.zoom};var n=[];if(this.getElementIds().forEach((function(o){var r=t.index.getById(o);r&&p.isBoundsAware(r)&&n.push(e.boundsInViewport(r,r.bounds,t))})),0===n.length&&t.index.all().forEach((function(o){h.isSelectable(o)&&o.selected&&p.isBoundsAware(o)&&n.push(e.boundsInViewport(o,o.bounds,t))})),0===n.length&&t.index.all().forEach((function(o){p.isBoundsAware(o)&&n.push(e.boundsInViewport(o,o.bounds,t))})),0!==n.length){var o=n.reduce((function(t,e){return u.combine(t,e)}));u.isValidDimension(o)&&(this.newViewport=this.getNewViewport(o,t))}}},e.prototype.boundsInViewport=function(t,e,n){return t instanceof d.SChildElement&&t.parent!==n?this.boundsInViewport(t.parent,t.parent.localToParent(e),n):e},e.prototype.execute=function(t){return this.initialize(t.root),this.redo(t)},e.prototype.undo=function(t){var e=t.root;if(g.isViewport(e)&&void 0!==this.newViewport&&!this.equal(this.newViewport,this.oldViewport)){if(this.animate)return new y.ViewportAnimation(e,this.newViewport,this.oldViewport,t).start();e.scroll=this.oldViewport.scroll,e.zoom=this.oldViewport.zoom}return e},e.prototype.redo=function(t){var e=t.root;if(g.isViewport(e)&&void 0!==this.newViewport&&!this.equal(this.newViewport,this.oldViewport)){if(this.animate)return new y.ViewportAnimation(e,this.oldViewport,this.newViewport,t).start();e.scroll=this.newViewport.scroll,e.zoom=this.newViewport.zoom}return e},e.prototype.equal=function(t,e){return t.zoom===e.zoom&&t.scroll.x===e.scroll.x&&t.scroll.y===e.scroll.y},e=i([v.injectable(),a("design:paramtypes",[Boolean])],e)}(l.Command);e.BoundsAwareViewportCommand=w;var S=function(t){function e(e){var n=t.call(this,e.animate)||this;return n.action=e,n}return r(e,t),e.prototype.getElementIds=function(){return this.action.elementIds},e.prototype.getNewViewport=function(t,e){if(u.isValidDimension(e.canvasBounds)){var n=this.action.retainZoom&&g.isViewport(e)?e.zoom:1,o=u.center(t);return{scroll:{x:o.x-.5*e.canvasBounds.width/n,y:o.y-.5*e.canvasBounds.height/n},zoom:n}}},e.KIND=b.KIND,e=i([s(0,v.inject(m.TYPES.Action)),a("design:paramtypes",[b])],e)}(w);e.CenterCommand=S;var P=function(t){function e(e){var n=t.call(this,e.animate)||this;return n.action=e,n}return r(e,t),e.prototype.getElementIds=function(){return this.action.elementIds},e.prototype.getNewViewport=function(t,e){if(u.isValidDimension(e.canvasBounds)){var n=u.center(t),o=void 0===this.action.padding?0:2*this.action.padding,r=Math.min(e.canvasBounds.width/(t.width+o),e.canvasBounds.height/(t.height+o));return void 0!==this.action.maxZoom&&(r=Math.min(r,this.action.maxZoom)),r===1/0&&(r=1),{scroll:{x:n.x-.5*e.canvasBounds.width/r,y:n.y-.5*e.canvasBounds.height/r},zoom:r}}},e.KIND=_.KIND,e=i([s(0,v.inject(m.TYPES.Action)),a("design:paramtypes",[_])],e)}(w);e.FitToScreenCommand=P;var O=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.keyDown=function(t,e){return c.matchesKeystroke(e,"KeyC","ctrlCmd","shift")?[new b([])]:c.matchesKeystroke(e,"KeyF","ctrlCmd","shift")?[new _([])]:[]},e}(f.KeyListener);e.CenterKeyboardListener=O},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(0),c=n(5),d=n(1),l=n(46),f=function(){this.kind=p.KIND};e.CommitModelAction=f;var p=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n}return r(e,t),e.prototype.execute=function(t){return this.newModel=t.modelFactory.createSchema(t.root),this.doCommit(this.newModel,t.root,!0)},e.prototype.doCommit=function(t,e,n){var o=this,r=this.modelSource.commitModel(t);return r instanceof Promise?r.then((function(t){return n&&(o.originalModel=t),e})):(n&&(this.originalModel=r),e)},e.prototype.undo=function(t){return this.doCommit(this.originalModel,t.root,!1)},e.prototype.redo=function(t){return this.doCommit(this.newModel,t.root,!1)},e.KIND="commitModel",i([u.inject(d.TYPES.ModelSource),a("design:type",l.ModelSource)],e.prototype,"modelSource",void 0),e=i([u.injectable(),s(0,u.inject(d.TYPES.Action)),a("design:paramtypes",[f])],e)}(c.SystemCommand);e.CommitModelCommand=p},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(0),c=n(21),d=n(3),l=n(1),f=n(2),p=n(16),h=n(12),y=n(5),g=n(19),v=n(17),m=n(8),b=n(4),_=n(35),w=function(){function t(e,n){this.mouseoverElement=e,this.mouseIsOver=n,this.kind=t.KIND}return t.KIND="hoverFeedback",t}();e.HoverFeedbackAction=w;var S=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n}return r(e,t),e.prototype.execute=function(t){var e=t.root.index.getById(this.action.mouseoverElement);return e&&_.isHoverable(e)&&(e.hoverFeedback=this.action.mouseIsOver),this.redo(t)},e.prototype.undo=function(t){return t.root},e.prototype.redo=function(t){return t.root},e.KIND=w.KIND,e=i([u.injectable(),s(0,u.inject(l.TYPES.Action)),a("design:paramtypes",[w])],e)}(y.SystemCommand);e.HoverFeedbackCommand=S;var P=function(){function t(e,n,o){void 0===o&&(o=""),this.elementId=e,this.bounds=n,this.requestId=o,this.kind=t.KIND}return t.create=function(e,n){return new t(e,n,h.generateRequestId())},t.KIND="requestPopupModel",t}();e.RequestPopupModelAction=P;var O=function(){function t(e,n){void 0===n&&(n=""),this.newRoot=e,this.responseId=n,this.kind=t.KIND}return t.KIND="setPopupModel",t}();e.SetPopupModelAction=O;var E=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n}return r(e,t),e.prototype.execute=function(t){return this.oldRoot=t.root,this.newRoot=t.modelFactory.createRoot(this.action.newRoot),this.newRoot},e.prototype.undo=function(t){return this.oldRoot},e.prototype.redo=function(t){return this.newRoot},e.KIND=O.KIND,e=i([u.injectable(),s(0,u.inject(l.TYPES.Action)),a("design:paramtypes",[O])],e)}(y.PopupCommand);e.SetPopupModelCommand=E;var x=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.mouseDown=function(t,e){return this.mouseIsDown=!0,[]},e.prototype.mouseUp=function(t,e){return this.mouseIsDown=!1,[]},e.prototype.stopMouseOutTimer=function(){void 0!==this.state.mouseOutTimer&&(window.clearTimeout(this.state.mouseOutTimer),this.state.mouseOutTimer=void 0)},e.prototype.startMouseOutTimer=function(){var t=this;return this.stopMouseOutTimer(),new Promise((function(e){t.state.mouseOutTimer=window.setTimeout((function(){t.state.popupOpen=!1,t.state.previousPopupElement=void 0,e(new O({type:g.EMPTY_ROOT.type,id:g.EMPTY_ROOT.id}))}),t.options.popupCloseDelay)}))},e.prototype.stopMouseOverTimer=function(){void 0!==this.state.mouseOverTimer&&(window.clearTimeout(this.state.mouseOverTimer),this.state.mouseOverTimer=void 0)},i([u.inject(l.TYPES.ViewerOptions),a("design:type",Object)],e.prototype,"options",void 0),i([u.inject(l.TYPES.HoverState),a("design:type",Object)],e.prototype,"state",void 0),e}(p.MouseListener);e.AbstractHoverMouseListener=x;var R=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.computePopupBounds=function(t,e){var n={x:-5,y:20},o=b.getAbsoluteBounds(t),r=t.root.canvasBounds,i=d.translate(o,r),a=i.x+i.width-e.x,s=i.y+i.height-e.y;s<=a&&this.allowSidePosition(t,"below",s)?n={x:-5,y:Math.round(s+5)}:a<=s&&this.allowSidePosition(t,"right",a)&&(n={x:Math.round(a+5),y:-5});var u=e.x+n.x,c=r.x+r.width;u>c&&(u=c);var l=e.y+n.y,f=r.y+r.height;return l>f&&(l=f),{x:u,y:l,width:-1,height:-1}},e.prototype.allowSidePosition=function(t,e,n){return!(t instanceof f.SModelRoot)&&n<=150},e.prototype.startMouseOverTimer=function(t,e){var n=this;return this.stopMouseOverTimer(),new Promise((function(o){n.state.mouseOverTimer=window.setTimeout((function(){var r=n.computePopupBounds(t,{x:e.pageX,y:e.pageY});o(new P(t.id,r)),n.state.popupOpen=!0,n.state.previousPopupElement=t}),n.options.popupOpenDelay)}))},e.prototype.mouseOver=function(t,e){var n=[];if(!this.mouseIsDown){var o=m.findParent(t,_.hasPopupFeature);this.state.popupOpen&&(void 0===o||void 0!==this.state.previousPopupElement&&this.state.previousPopupElement.id!==o.id)?n.push(this.startMouseOutTimer()):(this.stopMouseOverTimer(),this.stopMouseOutTimer()),void 0===o||void 0!==this.state.previousPopupElement&&this.state.previousPopupElement.id===o.id||n.push(this.startMouseOverTimer(o,e)),this.lastHoverFeedbackElementId&&(n.push(new w(this.lastHoverFeedbackElementId,!1)),this.lastHoverFeedbackElementId=void 0);var r=m.findParentByFeature(t,_.isHoverable);void 0!==r&&(n.push(new w(r.id,!0)),this.lastHoverFeedbackElementId=r.id)}return n},e.prototype.mouseOut=function(t,e){var n=[];if(!this.mouseIsDown){var o=document.elementFromPoint(e.x,e.y);if(!this.isSprottyPopup(o)){if(this.state.popupOpen){var r=m.findParent(t,_.hasPopupFeature);void 0!==this.state.previousPopupElement&&void 0!==r&&this.state.previousPopupElement.id===r.id&&n.push(this.startMouseOutTimer())}this.stopMouseOverTimer();var i=m.findParentByFeature(t,_.isHoverable);void 0!==i&&(n.push(new w(i.id,!1)),this.lastHoverFeedbackElementId=void 0)}}return n},e.prototype.isSprottyPopup=function(t){return!!t&&(t.id===this.options.popupDiv||!!t.parentElement&&this.isSprottyPopup(t.parentElement))},e.prototype.mouseMove=function(t,e){var n=[];if(!this.mouseIsDown){void 0!==this.state.previousPopupElement&&this.closeOnMouseMove(this.state.previousPopupElement,e)&&n.push(this.startMouseOutTimer());var o=m.findParent(t,_.hasPopupFeature);void 0===o||void 0!==this.state.previousPopupElement&&this.state.previousPopupElement.id===o.id||n.push(this.startMouseOverTimer(o,e))}return n},e.prototype.closeOnMouseMove=function(t,e){return t instanceof f.SModelRoot},i([u.inject(l.TYPES.ViewerOptions),a("design:type",Object)],e.prototype,"options",void 0),e=i([u.injectable()],e)}(x);e.HoverMouseListener=R;var T=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.mouseOut=function(t,e){return[this.startMouseOutTimer()]},e.prototype.mouseOver=function(t,e){return this.stopMouseOutTimer(),this.stopMouseOverTimer(),[]},e=i([u.injectable()],e)}(x);e.PopupHoverMouseListener=T;var I=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.keyDown=function(t,e){return c.matchesKeystroke(e,"Escape")?[new O({type:g.EMPTY_ROOT.type,id:g.EMPTY_ROOT.id})]:[]},e}(v.KeyListener);e.HoverKeyListener=I;var A=function(){function t(){this.popupOpen=!1}return t.prototype.handle=function(t){if(t.kind===E.KIND)this.popupOpen=t.newRoot.type!==g.EMPTY_ROOT.type;else if(this.popupOpen)return new O({id:g.EMPTY_ROOT.id,type:g.EMPTY_ROOT.type})},t=i([u.injectable()],t)}();e.ClosePopupActionHandler=A},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},a=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},u=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var c=n(0),d=n(33),l=n(5),f=n(2),p=n(8),h=n(1),y=n(16),g=n(9),v=n(36),m=n(56),b=n(3),_=n(4),w=n(114),S=n(34),P=n(53),O=n(80),E=n(6),x=n(23),R=n(45),T=n(11),I=n(43),A=n(24),M=n(28),j=function(t,e,n){void 0===e&&(e=!0),void 0===n&&(n=!1),this.moves=t,this.animate=e,this.finished=n,this.kind=C.KIND};e.MoveAction=j;var C=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n.resolvedMoves=new Map,n.edgeMementi=[],n}var n;return r(e,t),n=e,e.prototype.execute=function(t){var e=this,n=t.root.index,o=new Map,r=new Map;return this.action.moves.forEach((function(t){var i=n.getById(t.elementId);if(i instanceof E.SRoutingHandle&&e.edgeRouterRegistry){var a=i.parent;if(a instanceof E.SRoutableElement){var s=e.resolveHandleMove(i,a,t);if(s){var u=o.get(a);u||(u=[],o.set(a,u)),u.push(s)}}}else if(i&&M.isLocateable(i)){var c=e.resolveElementMove(i,t);c&&(e.resolvedMoves.set(c.element.id,c),e.edgeRouterRegistry&&n.getAttachedElements(i).forEach((function(t){if(t instanceof E.SRoutableElement){var e=r.get(t),n=b.subtract(c.toPosition,c.fromPosition),o=e?b.linear(e,n,.5):n;r.set(t,o)}})))}})),this.doMove(o,r),this.action.animate?(this.undoMove(),new d.CompoundAnimation(t.root,t,[new D(t.root,this.resolvedMoves,t,!1),new N(t.root,this.edgeMementi,t,!1)]).start()):t.root},e.prototype.resolveHandleMove=function(t,e,n){var o=n.fromPosition;if(!o){var r=this.edgeRouterRegistry.get(e.routerKind);o=r.getHandlePosition(e,r.route(e),t)}if(o)return{handle:t,fromPosition:o,toPosition:n.toPosition}},e.prototype.resolveElementMove=function(t,e){return{element:t,fromPosition:e.fromPosition||{x:t.position.x,y:t.position.y},toPosition:e.toPosition}},e.prototype.doMove=function(t,e){var n=this;this.resolvedMoves.forEach((function(t){t.element.position=t.toPosition})),t.forEach((function(t,e){var o=n.edgeRouterRegistry.get(e.routerKind),r=o.takeSnapshot(e);o.applyHandleMoves(e,t);var i=o.takeSnapshot(e);n.edgeMementi.push({edge:e,before:r,after:i})})),e.forEach((function(e,o){if(!t.get(o)){var r=n.edgeRouterRegistry.get(o.routerKind),i=r.takeSnapshot(o);if(o.source&&o.target&&n.resolvedMoves.get(o.source.id)&&n.resolvedMoves.get(o.target.id))o.routingPoints=o.routingPoints.map((function(t){return b.add(t,e)}));else{var a=T.isSelectable(o)&&o.selected;r.cleanupRoutingPoints(o,o.routingPoints,a,n.action.finished)}var s=r.takeSnapshot(o);n.edgeMementi.push({edge:o,before:i,after:s})}}))},e.prototype.undoMove=function(){var t=this;this.resolvedMoves.forEach((function(t){t.element.position=t.fromPosition})),this.edgeMementi.forEach((function(e){t.edgeRouterRegistry.get(e.edge.routerKind).applySnapshot(e.edge,e.before)}))},e.prototype.undo=function(t){return new d.CompoundAnimation(t.root,t,[new D(t.root,this.resolvedMoves,t,!0),new N(t.root,this.edgeMementi,t,!0)]).start()},e.prototype.redo=function(t){return new d.CompoundAnimation(t.root,t,[new D(t.root,this.resolvedMoves,t,!1),new N(t.root,this.edgeMementi,t,!1)]).start()},e.prototype.merge=function(t,e){var o=this;if(!this.action.animate&&t instanceof n)return t.resolvedMoves.forEach((function(t,e){var n=o.resolvedMoves.get(e);n?n.toPosition=t.toPosition:o.resolvedMoves.set(e,t)})),t.edgeMementi.forEach((function(t){var e=o.edgeMementi.find((function(e){return e.edge.id===t.edge.id}));e?e.after=t.after:o.edgeMementi.push(t)})),!0;if(t instanceof O.ReconnectCommand){var r=t.memento;if(r){var i=this.edgeMementi.find((function(t){return t.edge.id===r.edge.id}));i?i.after=r.after:this.edgeMementi.push(r)}return!0}return!1},e.KIND="move",a([c.inject(x.EdgeRouterRegistry),c.optional(),s("design:type",x.EdgeRouterRegistry)],e.prototype,"edgeRouterRegistry",void 0),e=n=a([c.injectable(),u(0,c.inject(h.TYPES.Action)),s("design:paramtypes",[j])],e)}(l.MergeableCommand);e.MoveCommand=C;var D=function(t){function e(e,n,o,r){void 0===r&&(r=!1);var i=t.call(this,o)||this;return i.model=e,i.elementMoves=n,i.reverse=r,i}return r(e,t),e.prototype.tween=function(t){var e=this;return this.elementMoves.forEach((function(n){e.reverse?n.element.position={x:(1-t)*n.toPosition.x+t*n.fromPosition.x,y:(1-t)*n.toPosition.y+t*n.fromPosition.y}:n.element.position={x:(1-t)*n.fromPosition.x+t*n.toPosition.x,y:(1-t)*n.fromPosition.y+t*n.toPosition.y}})),this.model},e}(d.Animation);e.MoveAnimation=D;var N=function(t){function e(e,n,o,r){void 0===r&&(r=!1);var i=t.call(this,o)||this;return i.model=e,i.reverse=r,i.expanded=[],n.forEach((function(t){var e=i.reverse?t.after:t.before,n=i.reverse?t.before:t.after,o=e.routedPoints,r=n.routedPoints,a=Math.max(o.length,r.length);i.expanded.push({startExpandedRoute:i.growToSize(o,a),endExpandedRoute:i.growToSize(r,a),memento:t})})),i}return r(e,t),e.prototype.midPoint=function(t){var e=t.edge,n=t.edge.source,o=t.edge.target;return b.linear(p.translatePoint(b.center(n.bounds),n.parent,e.parent),p.translatePoint(b.center(o.bounds),o.parent,e.parent),.5)},e.prototype.start=function(){return this.expanded.forEach((function(t){t.memento.edge.removeAll((function(t){return t instanceof E.SRoutingHandle}))})),t.prototype.start.call(this)},e.prototype.tween=function(t){var e=this;return 1===t?this.expanded.forEach((function(t){var n=t.memento;e.reverse?n.before.router.applySnapshot(n.edge,n.before):n.after.router.applySnapshot(n.edge,n.after)})):this.expanded.forEach((function(e){for(var n=[],o=1;o<e.startExpandedRoute.length-1;++o)n.push(b.linear(e.startExpandedRoute[o],e.endExpandedRoute[o],t));var r=t<.5?e.memento.before:e.memento.after,a=i(i({},r),{routingPoints:n,routingHandles:[]});r.router.applySnapshot(e.memento.edge,a)})),this.model},e.prototype.growToSize=function(t,e){var n=e-t.length;if(n<=0)return t;var o=[];o.push(t[0]);for(var r=1/(n+1),i=1/(t.length-1),a=1,s=1;s<t.length;++s){for(var u=i*s,c=0;u>(a+c)*r;)++c;a+=c;for(var d=0;d<c;++d){var l=b.linear(t[s-1],t[s],(d+1)/(c+1));o.push(l)}o.push(t[s])}return o},e}(d.Animation);e.MorphEdgesAnimation=N;var L=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hasDragged=!1,e.elementId2startPos=new Map,e}return r(e,t),e.prototype.mouseDown=function(t,e){var n=[];if(0===e.button){var o=p.findParentByFeature(t,M.isMoveable),r=t instanceof E.SRoutingHandle;void 0!==o||r||w.isCreatingOnDrag(t)?this.startDragPosition={x:e.pageX,y:e.pageY}:this.startDragPosition=void 0,this.hasDragged=!1,w.isCreatingOnDrag(t)?(n.push(new I.SelectAllAction(!1)),n.push(t.createAction(E.edgeInProgressID)),n.push(new I.SelectAction([E.edgeInProgressID],[])),n.push(new P.SwitchEditModeAction([E.edgeInProgressID],[])),n.push(new I.SelectAction([E.edgeInProgressTargetHandleID],[])),n.push(new P.SwitchEditModeAction([E.edgeInProgressTargetHandleID],[]))):r&&n.push(new P.SwitchEditModeAction([t.id],[]))}return n},e.prototype.mouseMove=function(t,e){var n=[];if(0===e.buttons)this.mouseUp(t,e);else if(this.startDragPosition){0===this.elementId2startPos.size&&this.collectStartPositions(t.root),this.hasDragged=!0;var o=this.getElementMoves(t,e,!1);o&&n.push(o)}return n},e.prototype.collectStartPositions=function(t){var e=this,n=new Set(t.index.all().filter((function(t){return T.isSelectable(t)&&t.selected})));n.forEach((function(t){if(!e.isChildOfSelected(n,t))if(M.isMoveable(t))e.elementId2startPos.set(t.id,t.position);else if(t instanceof E.SRoutingHandle){var o=e.getHandlePosition(t);o&&e.elementId2startPos.set(t.id,o)}}))},e.prototype.isChildOfSelected=function(t,e){for(;e instanceof f.SChildElement;)if(e=e.parent,M.isMoveable(e)&&t.has(e))return!0;return!1},e.prototype.getElementMoves=function(t,e,n){var o=this;if(this.startDragPosition){var r=[],i=p.findParentByFeature(t,A.isViewport),a=i?i.zoom:1,s=(e.pageX-this.startDragPosition.x)/a,u=(e.pageY-this.startDragPosition.y)/a;return this.elementId2startPos.forEach((function(n,i){var a=t.root.index.getById(i);if(a){var c=o.snap({x:n.x+s,y:n.y+u},a,!e.shiftKey);if(M.isMoveable(a))r.push({elementId:a.id,fromPosition:{x:a.position.x,y:a.position.y},toPosition:c});else if(a instanceof E.SRoutingHandle){var d=o.getHandlePosition(a);void 0!==d&&r.push({elementId:a.id,fromPosition:d,toPosition:c})}}})),r.length>0?new j(r,!1,n):void 0}},e.prototype.snap=function(t,e,n){return n&&this.snapper?this.snapper.snap(t,e):t},e.prototype.getHandlePosition=function(t){if(this.edgeRouterRegistry){var e=t.parent;if(!(e instanceof E.SRoutableElement))return;var n=this.edgeRouterRegistry.get(e.routerKind),o=n.route(e);return n.getHandlePosition(e,o,t)}},e.prototype.mouseEnter=function(t,e){return t instanceof f.SModelRoot&&0===e.buttons&&!this.startDragPosition&&this.mouseUp(t,e),[]},e.prototype.mouseUp=function(t,e){var n=this,o=[],r=!1;if(this.startDragPosition){var i=this.getElementMoves(t,e,!0);i&&o.push(i),t.root.index.all().forEach((function(e){if(e instanceof E.SRoutingHandle){var i=e.parent;if(i instanceof E.SRoutableElement&&e.danglingAnchor){var a=n.getHandlePosition(e);if(a){var s=p.translatePoint(a,e.parent,e.root),u=_.findChildrenAtPosition(t.root,s).find((function(t){return E.isConnectable(t)&&t.canConnect(i,e.kind)}));u&&n.hasDragged&&(o.push(new O.ReconnectAction(e.parent.id,"source"===e.kind?u.id:i.sourceId,"target"===e.kind?u.id:i.targetId)),r=!0)}}e.editMode&&o.push(new P.SwitchEditModeAction([],[e.id]))}}))}if(!r){var a=t.root.index.getById(E.edgeInProgressID);if(a instanceof f.SChildElement){var s=[];s.push(E.edgeInProgressID),a.children.forEach((function(t){t instanceof E.SRoutingHandle&&t.danglingAnchor&&s.push(t.danglingAnchor.id)})),o.push(new S.DeleteElementAction(s))}}return this.hasDragged&&o.push(new m.CommitModelAction),this.hasDragged=!1,this.startDragPosition=void 0,this.elementId2startPos.clear(),o},e.prototype.decorate=function(t,e){return t},a([c.inject(x.EdgeRouterRegistry),c.optional(),s("design:type",x.EdgeRouterRegistry)],e.prototype,"edgeRouterRegistry",void 0),a([c.inject(h.TYPES.ISnapper),c.optional(),s("design:type",Object)],e.prototype,"snapper",void 0),e}(y.MouseListener);e.MoveMouseListener=L;var k=function(){function t(){}return t.prototype.decorate=function(t,e){if(R.isEdgeLayoutable(e)&&e.parent instanceof v.SEdge)return t;var n="";if(M.isLocateable(e)&&e instanceof f.SChildElement&&void 0!==e.parent){var o=e.position;0===o.x&&0===o.y||(n="translate("+o.x+", "+o.y+")")}if(_.isAlignable(e)){var r=e.alignment;0===r.x&&0===r.y||(n.length>0&&(n+=" "),n+="translate("+r.x+", "+r.y+")")}return n.length>0&&g.setAttr(t,"transform",n),t},t.prototype.postUpdate=function(){},t=a([c.injectable()],t)}();e.LocationPostprocessor=k},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(0),c=n(3),d=n(33),l=n(5),f=n(83),p=n(2),h=n(58),y=n(42),g=n(28),v=n(4),m=n(76),b=n(11),_=n(87),w=n(194),S=n(1),P=n(24),O=n(23),E=n(6),x=function(){function t(e,n,o){void 0===n&&(n=!0),this.animate=n,this.cause=o,this.kind=t.KIND,void 0!==e.id?this.newRoot=e:this.matches=e}return t.KIND="updateModel",t}();e.UpdateModelAction=x;var R=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n}return r(e,t),e.prototype.execute=function(t){var e;return void 0!==this.action.newRoot?e=t.modelFactory.createRoot(this.action.newRoot):(e=t.modelFactory.createRoot(t.root),void 0!==this.action.matches&&this.applyMatches(e,this.action.matches,t)),this.oldRoot=t.root,this.newRoot=e,this.performUpdate(this.oldRoot,this.newRoot,t)},e.prototype.performUpdate=function(t,e,n){if(void 0!==this.action.animate&&!this.action.animate||t.id!==e.id)return t.type===e.type&&c.isValidDimension(t.canvasBounds)&&(e.canvasBounds=t.canvasBounds),P.isViewport(t)&&P.isViewport(e)&&(e.zoom=t.zoom,e.scroll=t.scroll),e;var o=void 0;o=void 0===this.action.matches?(new _.ModelMatcher).match(t,e):this.convertToMatchResult(this.action.matches,t,e);var r=this.computeAnimation(e,o,n);return r instanceof d.Animation?r.start():r},e.prototype.applyMatches=function(t,e,n){for(var o=t.index,r=0,i=e;r<i.length;r++){if(void 0!==(u=i[r]).left)(c=o.getById(u.left.id))instanceof p.SChildElement&&c.parent.remove(c)}for(var a=0,s=e;a<s.length;a++){var u;if(void 0!==(u=s[a]).right){var c=n.modelFactory.createElement(u.right),d=void 0;void 0!==u.rightParentId&&(d=o.getById(u.rightParentId)),d instanceof p.SParentElement?d.add(c):t.add(c)}}},e.prototype.convertToMatchResult=function(t,e,n){for(var o={},r=0,i=t;r<i.length;r++){var a=i[r],s={},u=void 0;void 0!==a.left&&(u=a.left.id,s.left=e.index.getById(u),s.leftParentId=a.leftParentId),void 0!==a.right&&(u=a.right.id,s.right=n.index.getById(u),s.rightParentId=a.rightParentId),void 0!==u&&(o[u]=s)}return o},e.prototype.computeAnimation=function(t,e,n){var o=this,r={fades:[]};_.forEachMatch(e,(function(e,i){if(void 0!==i.left&&void 0!==i.right)o.updateElement(i.left,i.right,r);else if(void 0!==i.right){var a=i.right;y.isFadeable(a)&&(a.opacity=0,r.fades.push({element:a,type:"in"}))}else if(i.left instanceof p.SChildElement){var s=i.left;if(y.isFadeable(s)&&void 0!==i.leftParentId&&void 0===t.index.getById(s.id)){var u=t.index.getById(i.leftParentId);if(u instanceof p.SParentElement){var c=n.modelFactory.createElement(s);u.add(c),r.fades.push({element:c,type:"out"})}}}}));var i=this.createAnimations(r,t,n);return i.length>=2?new d.CompoundAnimation(t,n,i):1===i.length?i[0]:t},e.prototype.updateElement=function(t,e,n){if(g.isLocateable(t)&&g.isLocateable(e)){var o=t.position,r=e.position;c.almostEquals(o.x,r.x)&&c.almostEquals(o.y,r.y)||(void 0===n.moves&&(n.moves=[]),n.moves.push({element:e,fromPosition:o,toPosition:r}),e.position=o)}v.isSizeable(t)&&v.isSizeable(e)&&(c.isValidDimension(e.bounds)?c.almostEquals(t.bounds.width,e.bounds.width)&&c.almostEquals(t.bounds.height,e.bounds.height)||(void 0===n.resizes&&(n.resizes=[]),n.resizes.push({element:e,fromDimension:{width:t.bounds.width,height:t.bounds.height},toDimension:{width:e.bounds.width,height:e.bounds.height}})):e.bounds={x:e.bounds.x,y:e.bounds.y,width:t.bounds.width,height:t.bounds.height}),t instanceof E.SRoutableElement&&e instanceof E.SRoutableElement&&this.edgeRouterRegistry&&(void 0===n.edgeMementi&&(n.edgeMementi=[]),n.edgeMementi.push({edge:e,before:this.takeSnapshot(t),after:this.takeSnapshot(e)})),b.isSelectable(t)&&b.isSelectable(e)&&(e.selected=t.selected),t instanceof p.SModelRoot&&e instanceof p.SModelRoot&&(e.canvasBounds=t.canvasBounds),t instanceof m.ViewportRootElement&&e instanceof m.ViewportRootElement&&(e.scroll=t.scroll,e.zoom=t.zoom)},e.prototype.takeSnapshot=function(t){return this.edgeRouterRegistry.get(t.routerKind).takeSnapshot(t)},e.prototype.createAnimations=function(t,e,n){var o=[];if(t.fades.length>0&&o.push(new f.FadeAnimation(e,t.fades,n,!0)),void 0!==t.moves&&t.moves.length>0){for(var r=new Map,i=0,a=t.moves;i<a.length;i++){var s=a[i];r.set(s.element.id,s)}o.push(new h.MoveAnimation(e,r,n,!1))}if(void 0!==t.resizes&&t.resizes.length>0){for(var u=new Map,c=0,d=t.resizes;c<d.length;c++){var l=d[c];u.set(l.element.id,l)}o.push(new w.ResizeAnimation(e,u,n,!1))}return void 0!==t.edgeMementi&&t.edgeMementi.length>0&&o.push(new h.MorphEdgesAnimation(e,t.edgeMementi,n,!1)),o},e.prototype.undo=function(t){return this.performUpdate(this.newRoot,this.oldRoot,t)},e.prototype.redo=function(t){return this.performUpdate(this.oldRoot,this.newRoot,t)},e.KIND=x.KIND,i([u.inject(O.EdgeRouterRegistry),u.optional(),a("design:type",O.EdgeRouterRegistry)],e.prototype,"edgeRouterRegistry",void 0),e=i([u.injectable(),s(0,u.inject(S.TYPES.Action)),a("design:paramtypes",[x])],e)}(l.Command);e.UpdateModelCommand=R},function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),a=n(1),s=n(180),u=n(19),c=n(39),d=n(32),l=n(63),f=n(12),p=function(){function t(){this.postponedActions=[],this.requests=new Map}return t.prototype.initialize=function(){var t=this;return this.initialized||(this.initialized=this.actionHandlerRegistryProvider().then((function(e){t.actionHandlerRegistry=e,t.handleAction(new d.SetModelAction(u.EMPTY_ROOT))}))),this.initialized},t.prototype.dispatch=function(t){var e=this;return this.initialize().then((function(){return void 0!==e.blockUntil?e.handleBlocked(t,e.blockUntil):e.diagramLocker.isAllowed(t)?e.handleAction(t):void 0}))},t.prototype.dispatchAll=function(t){var e=this;return Promise.all(t.map((function(t){return e.dispatch(t)})))},t.prototype.request=function(t){if(!t.requestId)return Promise.reject(new Error("Request without requestId"));var e=new s.Deferred;return this.requests.set(t.requestId,e),this.dispatch(t),e.promise},t.prototype.handleAction=function(t){if(t.kind===l.UndoAction.KIND)return this.commandStack.undo().then((function(){}));if(t.kind===l.RedoAction.KIND)return this.commandStack.redo().then((function(){}));if(f.isResponseAction(t)){if(void 0!==(o=this.requests.get(t.responseId))){if(this.requests.delete(t.responseId),t.kind===f.RejectAction.KIND){var e=t;o.reject(new Error(e.message)),this.logger.warn(this,"Request with id "+t.responseId+" failed.",e.message,e.detail)}else o.resolve(t);return Promise.resolve()}this.logger.log(this,"No matching request for response",t)}var n=this.actionHandlerRegistry.get(t.kind);if(0===n.length){this.logger.warn(this,"Missing handler for action",t);var o,r=new Error("Missing handler for action '"+t.kind+"'");if(f.isRequestAction(t))void 0!==(o=this.requests.get(t.requestId))&&(this.requests.delete(t.requestId),o.reject(r));return Promise.reject(r)}this.logger.log(this,"Handle",t);for(var i=[],a=0,s=n;a<s.length;a++){var u=s[a].handle(t);f.isAction(u)?i.push(this.dispatch(u)):void 0!==u&&(i.push(this.commandStack.execute(u)),this.blockUntil=u.blockUntil)}return Promise.all(i)},t.prototype.handleBlocked=function(t,e){var n=this;if(e(t)){this.blockUntil=void 0;var o=this.handleAction(t),r=this.postponedActions;this.postponedActions=[];for(var i=0,a=r;i<a.length;i++){var s=a[i];this.dispatch(s.action).then(s.resolve,s.reject)}return o}return this.logger.log(this,"Action is postponed due to block condition",t),new Promise((function(e,o){n.postponedActions.push({action:t,resolve:e,reject:o})}))},o([i.inject(a.TYPES.ActionHandlerRegistryProvider),r("design:type",Function)],t.prototype,"actionHandlerRegistryProvider",void 0),o([i.inject(a.TYPES.ICommandStack),r("design:type",Object)],t.prototype,"commandStack",void 0),o([i.inject(a.TYPES.ILogger),r("design:type",Object)],t.prototype,"logger",void 0),o([i.inject(a.TYPES.AnimationFrameSyncer),r("design:type",c.AnimationFrameSyncer)],t.prototype,"syncer",void 0),o([i.inject(a.TYPES.IDiagramLocker),r("design:type",Object)],t.prototype,"diagramLocker",void 0),t=o([i.injectable()],t)}();e.ActionDispatcher=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingOnSyntax=void 0;var o=n(62),r=function(){function t(t){this._binding=t}return t.prototype.onActivation=function(t){return this._binding.onActivation=t,new o.BindingWhenSyntax(this._binding)},t}();e.BindingOnSyntax=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingWhenSyntax=void 0;var o=n(61),r=n(94),i=function(){function t(t){this._binding=t}return t.prototype.when=function(t){return this._binding.constraint=t,new o.BindingOnSyntax(this._binding)},t.prototype.whenTargetNamed=function(t){return this._binding.constraint=r.namedConstraint(t),new o.BindingOnSyntax(this._binding)},t.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(t){return null!==t.target&&!t.target.isNamed()&&!t.target.isTagged()},new o.BindingOnSyntax(this._binding)},t.prototype.whenTargetTagged=function(t,e){return this._binding.constraint=r.taggedConstraint(t)(e),new o.BindingOnSyntax(this._binding)},t.prototype.whenInjectedInto=function(t){return this._binding.constraint=function(e){return r.typeConstraint(t)(e.parentRequest)},new o.BindingOnSyntax(this._binding)},t.prototype.whenParentNamed=function(t){return this._binding.constraint=function(e){return r.namedConstraint(t)(e.parentRequest)},new o.BindingOnSyntax(this._binding)},t.prototype.whenParentTagged=function(t,e){return this._binding.constraint=function(n){return r.taggedConstraint(t)(e)(n.parentRequest)},new o.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorIs=function(t){return this._binding.constraint=function(e){return r.traverseAncerstors(e,r.typeConstraint(t))},new o.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorIs=function(t){return this._binding.constraint=function(e){return!r.traverseAncerstors(e,r.typeConstraint(t))},new o.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorNamed=function(t){return this._binding.constraint=function(e){return r.traverseAncerstors(e,r.namedConstraint(t))},new o.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorNamed=function(t){return this._binding.constraint=function(e){return!r.traverseAncerstors(e,r.namedConstraint(t))},new o.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._binding.constraint=function(n){return r.traverseAncerstors(n,r.taggedConstraint(t)(e))},new o.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorTagged=function(t,e){return this._binding.constraint=function(n){return!r.traverseAncerstors(n,r.taggedConstraint(t)(e))},new o.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorMatches=function(t){return this._binding.constraint=function(e){return r.traverseAncerstors(e,t)},new o.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorMatches=function(t){return this._binding.constraint=function(e){return!r.traverseAncerstors(e,t)},new o.BindingOnSyntax(this._binding)},t}();e.BindingWhenSyntax=i},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(21),a=n(17),s=function(){function t(){this.kind=t.KIND}return t.KIND="undo",t}();e.UndoAction=s;var u=function(){function t(){this.kind=t.KIND}return t.KIND="redo",t}();e.RedoAction=u;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.keyDown=function(t,e){return i.matchesKeystroke(e,"KeyZ","ctrlCmd")?[new s]:i.matchesKeystroke(e,"KeyZ","ctrlCmd","shift")?[new u]:[]},e}(a.KeyListener);e.UndoRedoKeyListener=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(e){this.toolIds=e,this.kind=t.KIND}return t.KIND="enable-tools",t}();e.EnableToolsAction=o;var r=function(){function t(){this.kind=t.KIND}return t.KIND="enable-default-tools",t}();e.EnableDefaultToolsAction=r},function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},i=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,r++)o[r]=i[a];return o};Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n(1),u=function(){function t(){}return t.prototype.show=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this.activeElement=document.activeElement,(this.containerElement||this.initialize())&&(this.onBeforeShow.apply(this,i([this.containerElement,t],e)),this.setContainerVisible(!0))},t.prototype.hide=function(){this.setContainerVisible(!1),this.restoreFocus(),this.activeElement=null},t.prototype.restoreFocus=function(){var t=this.activeElement;t&&t.focus()},t.prototype.initialize=function(){var t=document.getElementById(this.options.baseDiv);return t?(this.containerElement=this.getOrCreateContainer(t.id),this.initializeContents(this.containerElement),t&&t.insertBefore(this.containerElement,t.firstChild),!0):(this.logger.warn(this,"Could not obtain sprotty base container for initializing UI extension "+this.id,this),!1)},t.prototype.getOrCreateContainer=function(t){var e=document.getElementById(this.id());return null===e&&((e=document.createElement("div")).id=t+"_"+this.id(),e.classList.add(this.containerClass())),e},t.prototype.setContainerVisible=function(t){this.containerElement&&(t?(this.containerElement.style.visibility="visible",this.containerElement.style.opacity="1"):(this.containerElement.style.visibility="hidden",this.containerElement.style.opacity="0"))},t.prototype.onBeforeShow=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o]},o([a.inject(s.TYPES.ViewerOptions),r("design:type",Object)],t.prototype,"options",void 0),o([a.inject(s.TYPES.ILogger),r("design:type",Object)],t.prototype,"logger",void 0),t=o([a.injectable()],t)}();e.AbstractUIExtension=u},function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},i=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,r++)o[r]=i[a];return o};Object.defineProperty(e,"__esModule",{value:!0});var a,s=n(0),u=n(1);!function(t){t[t.none=0]="none",t[t.error=1]="error",t[t.warn=2]="warn",t[t.info=3]="info",t[t.log=4]="log"}(a=e.LogLevel||(e.LogLevel={}));var c=function(){function t(){this.logLevel=a.none}return t.prototype.error=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o]},t.prototype.warn=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o]},t.prototype.info=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o]},t.prototype.log=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o]},t=o([s.injectable()],t)}();e.NullLogger=c;var d=function(){function t(){this.logLevel=a.log,this.viewOptions={baseDiv:""}}return t.prototype.error=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(this.logLevel>=a.error)try{console.error.apply(t,this.consoleArguments(t,e,n))}catch(t){}},t.prototype.warn=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(this.logLevel>=a.warn)try{console.warn.apply(t,this.consoleArguments(t,e,n))}catch(t){}},t.prototype.info=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(this.logLevel>=a.info)try{console.info.apply(t,this.consoleArguments(t,e,n))}catch(t){}},t.prototype.log=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(this.logLevel>=a.log)try{console.log.apply(t,this.consoleArguments(t,e,n))}catch(t){}},t.prototype.consoleArguments=function(t,e,n){var o;o="object"==typeof t?t.constructor.name:t;var r=new Date;return i([r.toLocaleTimeString()+" "+this.viewOptions.baseDiv+" "+o+": "+e],n)},o([s.inject(u.TYPES.LogLevel),r("design:type",Number)],t.prototype,"logLevel",void 0),o([s.inject(u.TYPES.ViewerOptions),r("design:type",Object)],t.prototype,"viewOptions",void 0),t=o([s.injectable()],t)}();e.ConsoleLogger=d},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),u=n(1),c=n(20),d=n(3),l=n(4),f=n(106),p=n(107),h=n(108),y=function(t){function e(){var e=t.call(this)||this;return e.register(f.VBoxLayouter.KIND,new f.VBoxLayouter),e.register(p.HBoxLayouter.KIND,new p.HBoxLayouter),e.register(h.StackLayouter.KIND,new h.StackLayouter),e}return r(e,t),e}(c.InstanceRegistry);e.LayoutRegistry=y;var g=function(){function t(){}return t.prototype.layout=function(t){new v(t,this.layoutRegistry,this.logger).layout()},i([s.inject(u.TYPES.LayoutRegistry),a("design:type",y)],t.prototype,"layoutRegistry",void 0),i([s.inject(u.TYPES.ILogger),a("design:type",Object)],t.prototype,"logger",void 0),t=i([s.injectable()],t)}();e.Layouter=g;var v=function(){function t(t,e,n){var o=this;this.element2boundsData=t,this.layoutRegistry=e,this.log=n,this.toBeLayouted=[],t.forEach((function(t,e){l.isLayoutContainer(e)&&o.toBeLayouted.push(e)}))}return t.prototype.getBoundsData=function(t){var e=this.element2boundsData.get(t),n=t.bounds;return l.isLayoutContainer(t)&&this.toBeLayouted.indexOf(t)>=0&&(n=this.doLayout(t)),e||(e={bounds:n,boundsChanged:!1,alignmentChanged:!1},this.element2boundsData.set(t,e)),e},t.prototype.layout=function(){for(;this.toBeLayouted.length>0;){var t=this.toBeLayouted[0];this.doLayout(t)}},t.prototype.doLayout=function(t){var e=this.toBeLayouted.indexOf(t);e>=0&&this.toBeLayouted.splice(e,1);var n=this.layoutRegistry.get(t.layout);n&&n.layout(t,this);var o=this.element2boundsData.get(t);return void 0!==o&&void 0!==o.bounds?o.bounds:(this.log.error(t,"Layout failed"),d.EMPTY_BOUNDS)},t}();e.StatefulLayouter=v},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=n(2),i=n(4),a=function(){function t(){}return t.prototype.layout=function(t,e){var n=e.getBoundsData(t),o=this.getLayoutOptions(t),r=this.getChildrenSize(t,o,e),i=o.paddingFactor*(o.resizeContainer?r.width:Math.max(0,this.getFixedContainerBounds(t,o,e).width)-o.paddingLeft-o.paddingRight),a=o.paddingFactor*(o.resizeContainer?r.height:Math.max(0,this.getFixedContainerBounds(t,o,e).height)-o.paddingTop-o.paddingBottom);if(i>0&&a>0){var s=this.layoutChildren(t,e,o,i,a);n.bounds=this.getFinalContainerBounds(t,s,o,i,a),n.boundsChanged=!0}},t.prototype.getFinalContainerBounds=function(t,e,n,o,r){return{x:t.bounds.x,y:t.bounds.y,width:Math.max(n.minWidth,o+n.paddingLeft+n.paddingRight),height:Math.max(n.minHeight,r+n.paddingTop+n.paddingBottom)}},t.prototype.getFixedContainerBounds=function(t,e,n){for(var a=t;;){if(i.isBoundsAware(a)){var s=a.bounds;if(i.isLayoutContainer(a)&&e.resizeContainer&&n.log.error(a,"Resizable container found while detecting fixed bounds"),o.isValidDimension(s))return s}if(!(a instanceof r.SChildElement))return n.log.error(a,"Cannot detect fixed bounds"),o.EMPTY_BOUNDS;a=a.parent}},t.prototype.layoutChildren=function(t,e,n,r,a){var s=this,u={x:n.paddingLeft+.5*(r-r/n.paddingFactor),y:n.paddingTop+.5*(a-a/n.paddingFactor)};return t.children.forEach((function(t){if(i.isLayoutableChild(t)){var c=e.getBoundsData(t),d=c.bounds,l=s.getChildLayoutOptions(t,n);void 0!==d&&o.isValidDimension(d)&&(u=s.layoutChild(t,c,d,l,n,u,r,a))}})),u},t.prototype.getDx=function(t,e,n){switch(t){case"left":return 0;case"center":return.5*(n-e.width);case"right":return n-e.width}},t.prototype.getDy=function(t,e,n){switch(t){case"top":return 0;case"center":return.5*(n-e.height);case"bottom":return n-e.height}},t.prototype.getChildLayoutOptions=function(t,e){var n=t.layoutOptions;return void 0===n?e:this.spread(e,n)},t.prototype.getLayoutOptions=function(t){for(var e=this,n=t,o=[];void 0!==n;){var i=n.layoutOptions;if(void 0!==i&&o.push(i),!(n instanceof r.SChildElement))break;n=n.parent}return o.reverse().reduce((function(t,n){return e.spread(t,n)}),this.getDefaultLayoutOptions())},t}();e.AbstractLayout=a},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(20),c=n(0),d=n(1),l=function(t){function e(e){var n=t.call(this)||this;return e.forEach((function(t){return n.register(t.TYPE,new t)})),n}return r(e,t),e=i([c.injectable(),s(0,c.multiInject(d.TYPES.IButtonHandler)),s(0,c.optional()),a("design:paramtypes",[Array])],e)}(u.InstanceRegistry);e.ButtonHandlerRegistry=l},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(4),a=n(42),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.enabled=!0,e}return r(e,t),e.DEFAULT_FEATURES=[i.boundsFeature,i.layoutableChildFeature,a.fadeFeature],e}(i.SShapeElement);e.SButton=s},function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},i=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n(12),u=n(1),c=n(31),d=n(109),l=n(43),f=n(55),p=function(){function t(t){void 0===t&&(t=[]),this.actionProviders=t}return t.prototype.getActions=function(t,e,n,o){var r=this.actionProviders.map((function(r){return r.getActions(t,e,n,o)}));return Promise.all(r).then((function(t){return t.reduce((function(t,e){return void 0!==e?t.concat(e):t}))}))},t=o([a.injectable(),i(0,a.multiInject(u.TYPES.ICommandPaletteActionProvider)),i(0,a.optional()),r("design:paramtypes",[Array])],t)}();e.CommandPaletteActionProviderRegistry=p;var h=function(){function t(t){this.logger=t}return t.prototype.getActions=function(t,e,n,o){return void 0!==o&&o%2==0?Promise.resolve(this.createSelectActions(t)):Promise.resolve([new s.LabeledAction("Select all",[new l.SelectAllAction])])},t.prototype.createSelectActions=function(t){return c.toArray(t.index.all().filter((function(t){return d.isNameable(t)}))).map((function(t){return new s.LabeledAction("Reveal "+d.name(t),[new l.SelectAction([t.id]),new f.CenterAction([t.id])],"fa-eye")}))},t=o([a.injectable(),i(0,a.inject(u.TYPES.ILogger)),r("design:paramtypes",[Object])],t)}();e.RevealNamedElementActionProvider=h},function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},i=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,r++)o[r]=i[a];return o};Object.defineProperty(e,"__esModule",{value:!0});var a,s=n(0),u=n(8),c=n(3),d=n(6),l=n(29),f=n(6);!function(t){t[t.RIGHT=0]="RIGHT",t[t.LEFT=1]="LEFT",t[t.TOP=2]="TOP",t[t.BOTTOM=3]="BOTTOM"}(a=e.Side||(e.Side={}));var p=function(){function t(t,e,n){this.element=t,this.kind=n;var o=t.bounds;this.bounds=u.translateBounds(o,t.parent,e),this.left={x:this.bounds.x,y:this.bounds.y+.5*this.bounds.height,kind:n},this.right={x:this.bounds.x+this.bounds.width,y:this.bounds.y+.5*this.bounds.height,kind:n},this.top={x:this.bounds.x+.5*this.bounds.width,y:this.bounds.y,kind:n},this.bottom={x:this.bounds.x+.5*this.bounds.width,y:this.bounds.y+this.bounds.height,kind:n}}return t.prototype.get=function(t){return this[a[t].toLowerCase()]},t.prototype.getNearestSide=function(t){var e=c.euclideanDistance(t,this.left),n=c.euclideanDistance(t,this.right),o=c.euclideanDistance(t,this.top),r=c.euclideanDistance(t,this.bottom),i=a.LEFT,s=e;return n<s&&(s=n,i=a.RIGHT),o<s&&(s=o,i=a.TOP),r<s&&(s=r,i=a.BOTTOM),i},t}();e.DefaultAnchors=p;var h=function(){function t(){}return t.prototype.pointAt=function(t,e){var n=this.calculateSegment(t,e);if(n){var o=n.segmentStart,r=n.segmentEnd,i=n.lambda;return c.linear(o,r,i)}},t.prototype.derivativeAt=function(t,e){var n=this.calculateSegment(t,e);if(n){var o=n.segmentStart,r=n.segmentEnd;return{x:r.x-o.x,y:r.y-o.y}}},t.prototype.calculateSegment=function(t,e){if(!(e<0||e>1)){var n=this.route(t);if(!(n.length<2)){for(var o=[],r=0,i=0;i<n.length-1;++i)o[i]=c.euclideanDistance(n[i],n[i+1]),r+=o[i];var a=0,s=e*r;for(i=0;i<n.length-1;++i){var u=a+o[i];if(o[i]>1e-8&&u>=s){var d=Math.max(0,s-a)/o[i];return{segmentStart:n[i],segmentEnd:n[i+1],lambda:d}}a=u}return{segmentEnd:n.pop(),segmentStart:n.pop(),lambda:1}}}},t.prototype.addHandle=function(t,e,n,o){var r=new d.SRoutingHandle;return r.kind=e,r.pointIndex=o,r.type=n,"target"===e&&t.id===d.edgeInProgressID&&(r.id=d.edgeInProgressTargetHandleID),t.add(r),r},t.prototype.getHandlePosition=function(t,e,n){switch(n.kind){case"source":return t.source instanceof d.SDanglingAnchor?t.source.position:e[0];case"target":return t.target instanceof d.SDanglingAnchor?t.target.position:e[e.length-1];default:var o=this.getInnerHandlePosition(t,e,n);if(void 0!==o)return o;if(n.pointIndex>=0&&n.pointIndex<t.routingPoints.length)return t.routingPoints[n.pointIndex]}},t.prototype.findRouteSegment=function(t,e,n){for(var o,r,i=function(e){return void 0!==e.pointIndex?e.pointIndex:"target"===e.kind?t.routingPoints.length:-2},a=0,s=e;a<s.length;a++){var u=s[a],c=i(u);c<=n&&(void 0===o||c>i(o))&&(o=u),c>n&&(void 0===r||c<i(r))&&(r=u)}return{start:o,end:r}},t.prototype.getTranslatedAnchor=function(t,e,n,o,r){void 0===r&&(r=0);var i=u.translatePoint(e,n,t.parent),a=this.getAnchorComputer(t),s=.5*t.strokeWidth,c=a.getAnchor(t,i,r+s);return u.translatePoint(c,t.parent,o.parent)},t.prototype.getAnchorComputer=function(t){return this.anchorRegistry.get(this.kind,t.anchorKind)},t.prototype.applyHandleMoves=function(t,e){var n=e.slice();e.forEach((function(e){var o=e.handle;if("source"!==o.kind||t.source instanceof d.SDanglingAnchor){if("target"===o.kind&&!(t.target instanceof d.SDanglingAnchor)){var r;(r=new d.SDanglingAnchor).id=t.id+"_dangling-target",r.original=t.target,r.position=e.toPosition,o.root.add(r),o.danglingAnchor=r,t.targetId=r.id}}else(r=new d.SDanglingAnchor).id=t.id+"_dangling-source",r.original=t.source,r.position=e.toPosition,o.root.add(r),o.danglingAnchor=r,t.sourceId=r.id;o.danglingAnchor&&(o.danglingAnchor.position=e.toPosition,n.splice(n.indexOf(e),1))})),n.length>0&&this.applyInnerHandleMoves(t,n),this.cleanupRoutingPoints(t,t.routingPoints,!0,!0)},t.prototype.cleanupRoutingPoints=function(t,e,n,o){var r=new p(t.source,t.parent,"source"),i=new p(t.target,t.parent,"target");this.resetRoutingPointsOnReconnect(t,e,n,r,i)},t.prototype.resetRoutingPointsOnReconnect=function(t,e,n,o,r){if(0===e.length||t.source instanceof d.SDanglingAnchor||t.target instanceof d.SDanglingAnchor){var a=this.getOptions(t),s=this.calculateDefaultCorners(t,o,r,a);if(e.splice.apply(e,i([0,e.length],s)),n){var u=-2;t.children.forEach((function(n){n instanceof d.SRoutingHandle&&("target"===n.kind?n.pointIndex=e.length:"line"===n.kind&&n.pointIndex>=e.length?t.remove(n):u=Math.max(n.pointIndex,u))}));for(var c=u;c<e.length-1;++c)this.addHandle(t,"manhattan-50%","volatile-routing-point",c)}return!0}return!1},t.prototype.applyReconnect=function(t,e,n){var o=!1;if(e){var r=t.root.index.getById(e);r instanceof f.SConnectableElement&&(t.sourceId=r.id,o=!0)}if(n){var i=t.root.index.getById(n);i instanceof f.SConnectableElement&&(t.targetId=i.id,o=!0)}o&&(t.index.remove(t),t.index.add(t),this.getSelfEdgeIndex(t)>-1&&(t.routingPoints=[],this.cleanupRoutingPoints(t,t.routingPoints,!0,!0)))},t.prototype.takeSnapshot=function(t){return{routingPoints:t.routingPoints.slice(),routingHandles:t.children.filter((function(t){return t instanceof d.SRoutingHandle})).map((function(t){return t})),routedPoints:this.route(t),router:this,source:t.source,target:t.target}},t.prototype.applySnapshot=function(t,e){t.routingPoints=e.routingPoints,t.removeAll((function(t){return t instanceof d.SRoutingHandle})),t.routerKind=e.router.kind,e.routingHandles.forEach((function(e){return t.add(e)})),e.source&&(t.sourceId=e.source.id),e.target&&(t.targetId=e.target.id),t.root.index.remove(t),t.root.index.add(t)},t.prototype.calculateDefaultCorners=function(t,e,n,o){var r=this.getSelfEdgeIndex(t);if(r>=0){var i=o.standardDistance,s=o.selfEdgeOffset*Math.min(e.bounds.width,e.bounds.height);switch(r%4){case 0:return[{x:e.get(a.RIGHT).x+i,y:e.get(a.RIGHT).y+s},{x:e.get(a.RIGHT).x+i,y:e.get(a.BOTTOM).y+i},{x:e.get(a.BOTTOM).x+s,y:e.get(a.BOTTOM).y+i}];case 1:return[{x:e.get(a.BOTTOM).x-s,y:e.get(a.BOTTOM).y+i},{x:e.get(a.LEFT).x-i,y:e.get(a.BOTTOM).y+i},{x:e.get(a.LEFT).x-i,y:e.get(a.LEFT).y+s}];case 2:return[{x:e.get(a.LEFT).x-i,y:e.get(a.LEFT).y-s},{x:e.get(a.LEFT).x-i,y:e.get(a.TOP).y-i},{x:e.get(a.TOP).x-s,y:e.get(a.TOP).y-i}];case 3:return[{x:e.get(a.TOP).x+s,y:e.get(a.TOP).y-i},{x:e.get(a.RIGHT).x+i,y:e.get(a.TOP).y-i},{x:e.get(a.RIGHT).x+i,y:e.get(a.RIGHT).y-s}]}}return[]},t.prototype.getSelfEdgeIndex=function(t){return t.source&&t.source===t.target?t.source.outgoingEdges.filter((function(e){return e.target===t.source})).indexOf(t):-1},o([s.inject(l.AnchorComputerRegistry),r("design:type",l.AnchorComputerRegistry)],t.prototype,"anchorRegistry",void 0),t=o([s.injectable()],t)}();e.LinearEdgeRouter=h},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(0),c=n(1),d=n(2),l=n(5),f=n(6),p=function(){function t(e){this.elementIDs=e,this.kind=t.KIND}return t.KIND="bringToFront",t}();e.BringToFrontAction=p;var h=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n.selected=[],n}return r(e,t),e.prototype.execute=function(t){var e=this,n=t.root;return this.action.elementIDs.forEach((function(t){var o=n.index.getById(t);o instanceof f.SRoutableElement&&(o.source&&e.addToSelection(o.source),o.target&&e.addToSelection(o.target)),o instanceof d.SChildElement&&e.addToSelection(o),e.includeConnectedEdges(o)})),this.redo(t)},e.prototype.includeConnectedEdges=function(t){var e=this;if(t instanceof f.SConnectableElement&&(t.incomingEdges.forEach((function(t){return e.addToSelection(t)})),t.outgoingEdges.forEach((function(t){return e.addToSelection(t)}))),t instanceof d.SParentElement)for(var n=0,o=t.children;n<o.length;n++){var r=o[n];this.includeConnectedEdges(r)}},e.prototype.addToSelection=function(t){this.selected.push({element:t,index:t.parent.children.indexOf(t)})},e.prototype.undo=function(t){for(var e=this.selected.length-1;e>=0;e--){var n=this.selected[e],o=n.element;o.parent.move(o,n.index)}return t.root},e.prototype.redo=function(t){for(var e=0;e<this.selected.length;e++)this.bringToFront(this.selected[e]);return t.root},e.prototype.bringToFront=function(t){var e=t.element,n=e.parent.children.length;e.parent.move(e,n-1)},e.KIND=p.KIND,e=i([u.injectable(),s(0,u.inject(c.TYPES.Action)),a("design:paramtypes",[p])],e)}(l.Command);e.BringToFrontCommand=h},function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},i=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n(1),u=n(34),c=n(11),d=function(){function t(t){void 0===t&&(t=[]),this.menuProviders=t}return t.prototype.getItems=function(t,e){var n=this.menuProviders.map((function(n){return n.getItems(t,e)}));return Promise.all(n).then(this.flattenAndRestructure)},t.prototype.flattenAndRestructure=function(t){for(var e=t.reduce((function(t,e){return void 0!==e?t.concat(e):t}),[]),n=function(t){if(t.parentId){for(var n=t.parentId.split("."),o=void 0,r=e,i=function(t){(o=r.find((function(e){return t===e.id})))&&o.children&&(r=o.children)},a=0,s=n;a<s.length;a++){i(s[a])}o&&(o.children?o.children.push(t):o.children=[t],e=e.filter((function(e){return e!==t})))}},o=0,r=e.filter((function(t){return t.parentId}));o<r.length;o++){n(r[o])}return e},t=o([a.injectable(),i(0,a.multiInject(s.TYPES.IContextMenuItemProvider)),i(0,a.optional()),r("design:paramtypes",[Array])],t)}();e.ContextMenuProviderRegistry=d;var l=function(){function t(){}return t.prototype.getItems=function(t,e){var n=Array.from(t.index.all().filter(c.isSelected).filter(u.isDeletable));return Promise.resolve([{id:"delete",label:"Delete",sortString:"d",group:"edit",actions:[new u.DeleteElementAction(n.map((function(t){return t.id})))],isEnabled:function(){return n.length>0}}])},t=o([a.injectable()],t)}();e.DeleteContextMenuItemProvider=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=n(1),i=n(113),a=new o.ContainerModule((function(t){t(i.EdgeLayoutPostprocessor).toSelf().inSingletonScope(),t(r.TYPES.IVNodePostprocessor).toService(i.EdgeLayoutPostprocessor),t(r.TYPES.HiddenVNodePostprocessor).toService(i.EdgeLayoutPostprocessor)}));e.default=a},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(3),a=n(2),s=n(24),u=n(77),c=function(t){function e(e){var n=t.call(this,e)||this;return n.scroll={x:0,y:0},n.zoom=1,n}return r(e,t),e.prototype.localToParent=function(t){var e={x:(t.x-this.scroll.x)*this.zoom,y:(t.y-this.scroll.y)*this.zoom,width:-1,height:-1};return i.isBounds(t)&&(e.width=t.width*this.zoom,e.height=t.height*this.zoom),e},e.prototype.parentToLocal=function(t){var e={x:t.x/this.zoom+this.scroll.x,y:t.y/this.zoom+this.scroll.y,width:-1,height:-1};return i.isBounds(t)&&i.isValidDimension(t)&&(e.width=t.width/this.zoom,e.height=t.height/this.zoom),e},e.DEFAULT_FEATURES=[s.viewportFeature,u.exportFeature],e}(a.SModelRoot);e.ViewportRootElement=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.exportFeature=Symbol("exportFeature"),e.isExportable=function(t){return t.hasFeature(e.exportFeature)}},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(0),c=n(12),d=n(5),l=n(1),f=n(16),p=n(17),h=n(21),y=n(11),g=n(31),v=n(44),m=function(){function t(e){this.labelId=e,this.kind=t.KIND}return t.KIND="EditLabel",t}();e.EditLabelAction=m,e.isEditLabelAction=function(t){return c.isAction(t)&&t.kind===m.KIND&&"labelId"in t};var b=function(){function t(e,n){this.labelId=e,this.text=n,this.kind=t.KIND}return t.KIND="applyLabelEdit",t}();e.ApplyLabelEditAction=b;var _=function(){};e.ResolvedLabelEdit=_;var w=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n}return r(e,t),e.prototype.execute=function(t){var e=t.root.index.getById(this.action.labelId);return e&&v.isEditableLabel(e)&&(this.resolvedLabelEdit={label:e,oldLabel:e.text,newLabel:this.action.text},e.text=this.action.text),t.root},e.prototype.undo=function(t){return this.resolvedLabelEdit&&(this.resolvedLabelEdit.label.text=this.resolvedLabelEdit.oldLabel),t.root},e.prototype.redo=function(t){return this.resolvedLabelEdit&&(this.resolvedLabelEdit.label.text=this.resolvedLabelEdit.newLabel),t.root},e.KIND=b.KIND,e=i([s(0,u.inject(l.TYPES.Action)),a("design:paramtypes",[b])],e)}(d.Command);e.ApplyLabelEditCommand=w;var S=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.doubleClick=function(t,e){var n=O(t);return n?[new m(n.id)]:[]},e}(f.MouseListener);e.EditLabelMouseListener=S;var P=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.keyDown=function(t,e){if(h.matchesKeystroke(e,"F2")){var n=g.toArray(t.index.all().filter((function(t){return y.isSelectable(t)&&t.selected}))).map(O).filter((function(t){return void 0!==t}));if(1===n.length)return[new m(n[0].id)]}return[]},e}(p.KeyListener);function O(t){return v.isEditableLabel(t)?t:v.isWithEditableLabel(t)&&t.editableLabel?t.editableLabel:void 0}e.EditLabelKeyListener=P,e.getEditableLabel=O},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(27),a=n(16),s=n(8),u=n(30),c=n(24);e.isZoomable=function(t){return"zoom"in t},e.getZoom=function(t){var e=1,n=s.findParentByFeature(t,c.isViewport);return n&&(e=n.zoom),e};var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.wheel=function(t,e){var n=s.findParentByFeature(t,c.isViewport);if(n){var o=this.getZoomFactor(e),r=this.getViewportOffset(t.root,e),i=1/(o*n.zoom)-1/n.zoom,a={scroll:{x:n.scroll.x-i*r.x,y:n.scroll.y-i*r.y},zoom:n.zoom*o};return[new u.SetViewportAction(n.id,a,!1)]}return[]},e.prototype.getViewportOffset=function(t,e){var n=t.canvasBounds,o=i.getWindowScroll();return{x:e.clientX+o.x-n.x,y:e.clientY+o.y-n.y}},e.prototype.getZoomFactor=function(t){return t.deltaMode===t.DOM_DELTA_PAGE?Math.exp(.5*-t.deltaY):t.deltaMode===t.DOM_DELTA_LINE?Math.exp(.05*-t.deltaY):Math.exp(.005*-t.deltaY)},e}(a.MouseListener);e.ZoomMouseListener=d},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(0),c=n(5),d=n(1),l=n(6),f=n(23),p=function(){function t(e,n,o){this.routableId=e,this.newSourceId=n,this.newTargetId=o,this.kind=t.KIND}return t.KIND="reconnect",t}();e.ReconnectAction=p;var h=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n}return r(e,t),e.prototype.execute=function(t){return this.doExecute(t),t.root},e.prototype.doExecute=function(t){var e=t.root.index.getById(this.action.routableId);if(e instanceof l.SRoutableElement){var n=this.edgeRouterRegistry.get(e.routerKind),o=n.takeSnapshot(e);n.applyReconnect(e,this.action.newSourceId,this.action.newTargetId);var r=n.takeSnapshot(e);this.memento={edge:e,before:o,after:r}}},e.prototype.undo=function(t){this.memento&&this.edgeRouterRegistry.get(this.memento.edge.routerKind).applySnapshot(this.memento.edge,this.memento.before);return t.root},e.prototype.redo=function(t){this.memento&&this.edgeRouterRegistry.get(this.memento.edge.routerKind).applySnapshot(this.memento.edge,this.memento.after);return t.root},e.KIND=p.KIND,i([u.inject(f.EdgeRouterRegistry),a("design:type",f.EdgeRouterRegistry)],e.prototype,"edgeRouterRegistry",void 0),e=i([u.injectable(),s(0,u.inject(d.TYPES.Action)),a("design:paramtypes",[p])],e)}(c.Command);e.ReconnectCommand=h},function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),i=n(82),a=n(0),s=function(){function t(e,n){this.expandIds=e,this.collapseIds=n,this.kind=t.KIND}return t.KIND="collapseExpand",t}();e.CollapseExpandAction=s;var u=function(){function t(e){void 0===e&&(e=!0),this.expand=e,this.kind=t.KIND}return t.KIND="collapseExpandAll",t}();e.CollapseExpandAllAction=u;var c=function(){function t(){}return t.prototype.buttonPressed=function(t){var e=r.findParentByFeature(t,i.isExpandable);return void 0!==e?[new s(e.expanded?[]:[e.id],e.expanded?[e.id]:[])]:[]},t.TYPE="button:expand",t=o([a.injectable()],t)}();e.ExpandButtonHandler=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.expandFeature=Symbol("expandFeature"),e.isExpandable=function(t){return t.hasFeature(e.expandFeature)&&"expanded"in t}},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n(33),u=n(2),c=n(9),d=n(42),l=function(t){function e(e,n,o,r){void 0===r&&(r=!1);var i=t.call(this,o)||this;return i.model=e,i.elementFades=n,i.removeAfterFadeOut=r,i}return r(e,t),e.prototype.tween=function(t,e){for(var n=0,o=this.elementFades;n<o.length;n++){var r=o[n],i=r.element;"in"===r.type?i.opacity=t:"out"===r.type&&(i.opacity=1-t,1===t&&this.removeAfterFadeOut&&i instanceof u.SChildElement&&i.parent.remove(i))}return this.model},e}(s.Animation);e.FadeAnimation=l;var f=function(){function t(){}return t.prototype.decorate=function(t,e){return d.isFadeable(e)&&1!==e.opacity&&c.setAttr(t,"opacity",e.opacity),t},t.prototype.postUpdate=function(){},t=i([a.injectable()],t)}();e.ElementFader=f},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(35),a=n(4);e.decorationFeature=Symbol("decorationFeature"),e.isDecoration=function(t){return t.hasFeature(e.decorationFeature)};var s=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return r(n,t),n.DEFAULT_FEATURES=[e.decorationFeature,a.boundsFeature,i.hoverFeedbackFeature,i.popupFeature],n}(a.SShapeElement);e.SDecoration=s;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e}(s);e.SIssueMarker=u;var c=function(){};e.SIssue=c},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(16),a=n(8),s=n(121),u=function(){function t(e){this.elementId=e,this.kind=t.KIND}return t.KIND="open",t}();e.OpenAction=u;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.doubleClick=function(t,e){var n=a.findParentByFeature(t,s.isOpenable);return void 0!==n?[new u(n.id)]:[]},e}(i.MouseListener);e.OpenMouseListener=c},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var a=n(8),s=n(3),u=n(72),c=n(6),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return e.KIND},enumerable:!0,configurable:!0}),e.prototype.getOptions=function(t){return{standardDistance:20,minimalPointDistance:3,selfEdgeOffset:.25}},e.prototype.route=function(t){if(!t.source||!t.target)return[];var e=this.createRoutedCorners(t),n=e[0]||a.translatePoint(s.center(t.target.bounds),t.target.parent,t.parent),o=this.getTranslatedAnchor(t.source,n,t.parent,t,t.sourceAnchorCorrection),r=e[e.length-1]||a.translatePoint(s.center(t.source.bounds),t.source.parent,t.parent),u=this.getTranslatedAnchor(t.target,r,t.parent,t,t.targetAnchorCorrection);if(!o||!u)return[];var c=[];return c.push(i({kind:"source"},o)),e.forEach((function(t){return c.push(t)})),c.push(i({kind:"target"},u)),c},e.prototype.createRoutedCorners=function(t){var e=new u.DefaultAnchors(t.source,t.parent,"source"),n=new u.DefaultAnchors(t.target,t.parent,"target");if(t.routingPoints.length>0){var o=t.routingPoints.slice();if(this.cleanupRoutingPoints(t,o,!1,!0),o.length>0)return o.map((function(t,e){return i({kind:"linear",pointIndex:e},t)}))}var r=this.getOptions(t);return this.calculateDefaultCorners(t,e,n,r).map((function(t){return i({kind:"linear"},t)}))},e.prototype.createRoutingHandles=function(t){var e=this.route(t);if(this.commitRoute(t,e),e.length>0){this.addHandle(t,"source","routing-point",-2);for(var n=0;n<e.length-1;++n)this.addHandle(t,"manhattan-50%","volatile-routing-point",n-1);this.addHandle(t,"target","routing-point",e.length-2)}},e.prototype.getInnerHandlePosition=function(t,e,n){var o=this.getFraction(n.kind);if(void 0!==o){var r=this.findRouteSegment(t,e,n.pointIndex),i=r.start,a=r.end;if(void 0!==i&&void 0!==a)return s.linear(i,a,o)}},e.prototype.getFraction=function(t){switch(t){case"manhattan-50%":return.5;default:return}},e.prototype.commitRoute=function(t,e){for(var n=[],o=1;o<e.length-1;++o)n.push({x:e[o].x,y:e[o].y});t.routingPoints=n},e.prototype.applyInnerHandleMoves=function(t,e){var n=this,o=this.route(t),r=t.routingPoints,i=this.getOptions(t).minimalPointDistance;e.forEach((function(t){var e=t.handle,a=e.pointIndex,u=n.correctX(r,a,t.toPosition.x,i),c=n.correctY(r,a,t.toPosition.y,i);switch(e.kind){case"manhattan-50%":a<0?s.almostEquals(o[0].x,o[1].x)?n.alignX(r,0,u):n.alignY(r,0,c):a<r.length-1?s.almostEquals(r[a].x,r[a+1].x)?(n.alignX(r,a,u),n.alignX(r,a+1,u)):(n.alignY(r,a,c),n.alignY(r,a+1,c)):s.almostEquals(o[o.length-2].x,o[o.length-1].x)?n.alignX(r,r.length-1,u):n.alignY(r,r.length-1,c)}}))},e.prototype.correctX=function(t,e,n,o){return e>0&&Math.abs(n-t[e-1].x)<o?t[e-1].x:e<t.length-2&&Math.abs(n-t[e+2].x)<o?t[e+2].x:n},e.prototype.alignX=function(t,e,n){e>=0&&e<t.length&&(t[e]={x:n,y:t[e].y})},e.prototype.correctY=function(t,e,n,o){return e>0&&Math.abs(n-t[e-1].y)<o?t[e-1].y:e<t.length-2&&Math.abs(n-t[e+2].y)<o?t[e+2].y:n},e.prototype.alignY=function(t,e,n){e>=0&&e<t.length&&(t[e]={x:t[e].x,y:n})},e.prototype.cleanupRoutingPoints=function(t,e,n,o){var r=new u.DefaultAnchors(t.source,t.parent,"source"),i=new u.DefaultAnchors(t.target,t.parent,"target");if(!this.resetRoutingPointsOnReconnect(t,e,n,r,i)){for(var a=0;a<e.length&&s.includes(r.bounds,e[a]);++a)e.splice(0,1),n&&this.removeHandle(t,-1);for(a=e.length-1;a>=0&&s.includes(i.bounds,e[a]);--a)e.splice(a,1),n&&this.removeHandle(t,a);if(e.length>=2){var c=this.getOptions(t);for(a=e.length-2;a>=0;--a)s.manhattanDistance(e[a],e[a+1])<c.minimalPointDistance&&(e.splice(a,2),--a,n&&(this.removeHandle(t,a-1),this.removeHandle(t,a)))}o&&(this.addAdditionalCorner(t,e,r,i,n),this.addAdditionalCorner(t,e,i,r,n),this.manhattanify(t,e))}},e.prototype.removeHandle=function(t,e){var n=[];t.children.forEach((function(t){t instanceof c.SRoutingHandle&&(t.pointIndex>e?--t.pointIndex:t.pointIndex===e&&n.push(t))})),n.forEach((function(e){return t.remove(e)}))},e.prototype.addAdditionalCorner=function(t,e,n,o,r){if(0!==e.length){var i,a="source"===n.kind?e[0]:e[e.length-1],d="source"===n.kind?0:e.length,l=d-("source"===n.kind?1:0);if(e.length>1)i=0===d?s.almostEquals(e[0].x,e[1].x):s.almostEquals(e[e.length-1].x,e[e.length-2].x);else{var f=o.getNearestSide(a);i=f===u.Side.TOP||f===u.Side.BOTTOM}if(i){if(a.y<n.get(u.Side.TOP).y||a.y>n.get(u.Side.BOTTOM).y){var p={x:n.get(u.Side.TOP).x,y:a.y};e.splice(d,0,p),r&&(t.children.forEach((function(t){t instanceof c.SRoutingHandle&&t.pointIndex>=l&&++t.pointIndex})),this.addHandle(t,"manhattan-50%","volatile-routing-point",l))}}else if(a.x<n.get(u.Side.LEFT).x||a.x>n.get(u.Side.RIGHT).x){p={x:a.x,y:n.get(u.Side.LEFT).y};e.splice(d,0,p),r&&(t.children.forEach((function(t){t instanceof c.SRoutingHandle&&t.pointIndex>=l&&++t.pointIndex})),this.addHandle(t,"manhattan-50%","volatile-routing-point",l))}}},e.prototype.manhattanify=function(t,e){for(var n=1;n<e.length;++n){var o=Math.abs(e[n-1].x-e[n].x)<1,r=Math.abs(e[n-1].y-e[n].y)<1;o||r||(e.splice(n,0,{x:e[n-1].x,y:e[n].y}),++n)}},e.prototype.calculateDefaultCorners=function(e,n,o,r){var i=t.prototype.calculateDefaultCorners.call(this,e,n,o,r);if(i.length>0)return i;var a=this.getBestConnectionAnchors(e,n,o,r),s=a.source,c=a.target,d=[],l=n.get(s),f=o.get(c);switch(s){case u.Side.RIGHT:switch(c){case u.Side.BOTTOM:case u.Side.TOP:d.push({x:f.x,y:l.y});break;case u.Side.RIGHT:d.push({x:Math.max(l.x,f.x)+1.5*r.standardDistance,y:l.y}),d.push({x:Math.max(l.x,f.x)+1.5*r.standardDistance,y:f.y});break;case u.Side.LEFT:f.y!==l.y&&(d.push({x:(l.x+f.x)/2,y:l.y}),d.push({x:(l.x+f.x)/2,y:f.y}))}break;case u.Side.LEFT:switch(c){case u.Side.BOTTOM:case u.Side.TOP:d.push({x:f.x,y:l.y});break;default:(f=o.get(u.Side.RIGHT)).y!==l.y&&(d.push({x:(l.x+f.x)/2,y:l.y}),d.push({x:(l.x+f.x)/2,y:f.y}))}break;case u.Side.TOP:switch(c){case u.Side.RIGHT:f.x-l.x>0?(d.push({x:l.x,y:l.y-r.standardDistance}),d.push({x:f.x+1.5*r.standardDistance,y:l.y-r.standardDistance}),d.push({x:f.x+1.5*r.standardDistance,y:f.y})):d.push({x:l.x,y:f.y});break;case u.Side.LEFT:f.x-l.x<0?(d.push({x:l.x,y:l.y-r.standardDistance}),d.push({x:f.x-1.5*r.standardDistance,y:l.y-r.standardDistance}),d.push({x:f.x-1.5*r.standardDistance,y:f.y})):d.push({x:l.x,y:f.y});break;case u.Side.TOP:d.push({x:l.x,y:Math.min(l.y,f.y)-1.5*r.standardDistance}),d.push({x:f.x,y:Math.min(l.y,f.y)-1.5*r.standardDistance});break;case u.Side.BOTTOM:f.x!==l.x&&(d.push({x:l.x,y:(l.y+f.y)/2}),d.push({x:f.x,y:(l.y+f.y)/2}))}break;case u.Side.BOTTOM:switch(c){case u.Side.RIGHT:f.x-l.x>0?(d.push({x:l.x,y:l.y+r.standardDistance}),d.push({x:f.x+1.5*r.standardDistance,y:l.y+r.standardDistance}),d.push({x:f.x+1.5*r.standardDistance,y:f.y})):d.push({x:l.x,y:f.y});break;case u.Side.LEFT:f.x-l.x<0?(d.push({x:l.x,y:l.y+r.standardDistance}),d.push({x:f.x-1.5*r.standardDistance,y:l.y+r.standardDistance}),d.push({x:f.x-1.5*r.standardDistance,y:f.y})):d.push({x:l.x,y:f.y});break;default:(f=o.get(u.Side.TOP)).x!==l.x&&(d.push({x:l.x,y:(l.y+f.y)/2}),d.push({x:f.x,y:(l.y+f.y)/2}))}}return d},e.prototype.getBestConnectionAnchors=function(t,e,n,o){var r=e.get(u.Side.RIGHT),i=n.get(u.Side.LEFT);if(i.x-r.x>o.standardDistance)return{source:u.Side.RIGHT,target:u.Side.LEFT};if(r=e.get(u.Side.LEFT),i=n.get(u.Side.RIGHT),r.x-i.x>o.standardDistance)return{source:u.Side.LEFT,target:u.Side.RIGHT};if(r=e.get(u.Side.TOP),i=n.get(u.Side.BOTTOM),r.y-i.y>o.standardDistance)return{source:u.Side.TOP,target:u.Side.BOTTOM};if(r=e.get(u.Side.BOTTOM),(i=n.get(u.Side.TOP)).y-r.y>o.standardDistance)return{source:u.Side.BOTTOM,target:u.Side.TOP};if(r=e.get(u.Side.RIGHT),(i=n.get(u.Side.TOP)).x-r.x>.5*o.standardDistance&&i.y-r.y>o.standardDistance)return{source:u.Side.RIGHT,target:u.Side.TOP};if((i=n.get(u.Side.BOTTOM)).x-r.x>.5*o.standardDistance&&r.y-i.y>o.standardDistance)return{source:u.Side.RIGHT,target:u.Side.BOTTOM};if(r=e.get(u.Side.LEFT),i=n.get(u.Side.BOTTOM),r.x-i.x>.5*o.standardDistance&&r.y-i.y>o.standardDistance)return{source:u.Side.LEFT,target:u.Side.BOTTOM};if(i=n.get(u.Side.TOP),r.x-i.x>.5*o.standardDistance&&i.y-r.y>o.standardDistance)return{source:u.Side.LEFT,target:u.Side.TOP};if(r=e.get(u.Side.TOP),i=n.get(u.Side.RIGHT),r.y-i.y>.5*o.standardDistance&&r.x-i.x>o.standardDistance)return{source:u.Side.TOP,target:u.Side.RIGHT};if(i=n.get(u.Side.LEFT),r.y-i.y>.5*o.standardDistance&&i.x-r.x>o.standardDistance)return{source:u.Side.TOP,target:u.Side.LEFT};if(r=e.get(u.Side.BOTTOM),(i=n.get(u.Side.RIGHT)).y-r.y>.5*o.standardDistance&&r.x-i.x>o.standardDistance)return{source:u.Side.BOTTOM,target:u.Side.RIGHT};if((i=n.get(u.Side.LEFT)).y-r.y>.5*o.standardDistance&&i.x-r.x>o.standardDistance)return{source:u.Side.BOTTOM,target:u.Side.LEFT};if(r=e.get(u.Side.TOP),i=n.get(u.Side.TOP),!s.includes(n.bounds,r)&&!s.includes(e.bounds,i))if(r.y-i.y<0){if(Math.abs(r.x-i.x)>(e.bounds.width+o.standardDistance)/2)return{source:u.Side.TOP,target:u.Side.TOP}}else if(Math.abs(r.x-i.x)>n.bounds.width/2)return{source:u.Side.TOP,target:u.Side.TOP};if(r=e.get(u.Side.RIGHT),i=n.get(u.Side.RIGHT),!s.includes(n.bounds,r)&&!s.includes(e.bounds,i))if(r.x-i.x>0){if(Math.abs(r.y-i.y)>(e.bounds.height+o.standardDistance)/2)return{source:u.Side.RIGHT,target:u.Side.RIGHT}}else if(Math.abs(r.y-i.y)>n.bounds.height/2)return{source:u.Side.RIGHT,target:u.Side.RIGHT};return r=e.get(u.Side.TOP),i=n.get(u.Side.RIGHT),s.includes(n.bounds,r)||s.includes(e.bounds,i)?(i=n.get(u.Side.LEFT),s.includes(n.bounds,r)||s.includes(e.bounds,i)?(r=e.get(u.Side.BOTTOM),i=n.get(u.Side.RIGHT),s.includes(n.bounds,r)||s.includes(e.bounds,i)?(i=n.get(u.Side.LEFT),s.includes(n.bounds,r)||s.includes(e.bounds,i)?{source:u.Side.RIGHT,target:u.Side.BOTTOM}:{source:u.Side.BOTTOM,target:u.Side.LEFT}):{source:u.Side.BOTTOM,target:u.Side.RIGHT}):{source:u.Side.TOP,target:u.Side.LEFT}):{source:u.Side.TOP,target:u.Side.RIGHT}},e.KIND="manhattan",e}(u.LinearEdgeRouter);e.ManhattanEdgeRouter=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(2);e.forEachMatch=function(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])};var r=function(){function t(){}return t.prototype.match=function(t,e){var n={};return this.matchLeft(t,n),this.matchRight(e,n),n},t.prototype.matchLeft=function(t,e,n){var r=e[t.id];if(void 0!==r?(r.left=t,r.leftParentId=n):(r={left:t,leftParentId:n},e[t.id]=r),o.isParent(t))for(var i=0,a=t.children;i<a.length;i++){var s=a[i];this.matchLeft(s,e,t.id)}},t.prototype.matchRight=function(t,e,n){var r=e[t.id];if(void 0!==r?(r.right=t,r.rightParentId=n):(r={right:t,rightParentId:n},e[t.id]=r),o.isParent(t))for(var i=0,a=t.children;i<a.length;i++){var s=a[i];this.matchRight(s,e,t.id)}},t}();e.ModelMatcher=r,e.applyMatches=function(t,e){var n;t instanceof o.SModelRoot?n=t.index:(n=new o.SModelIndex).add(t);for(var r=0,i=e;r<i.length;r++){var a=i[r],s=!1;if(void 0!==a.left&&void 0!==a.leftParentId){var u=n.getById(a.leftParentId);if(void 0!==u&&void 0!==u.children){var c=u.children.indexOf(a.left);c>=0&&(void 0!==a.right&&a.leftParentId===a.rightParentId?(u.children.splice(c,1,a.right),s=!0):u.children.splice(c,1)),n.remove(a.left)}}if(!s&&void 0!==a.right&&void 0!==a.rightParentId){var d=n.getById(a.rightParentId);void 0!==d&&(void 0===d.children&&(d.children=[]),d.children.push(a.right))}}}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MetadataReader=void 0;var o=n(7),r=function(){function t(){}return t.prototype.getConstructorMetadata=function(t){return{compilerGeneratedMetadata:Reflect.getMetadata(o.PARAM_TYPES,t),userGeneratedMetadata:Reflect.getMetadata(o.TAGGED,t)||{}}},t.prototype.getPropertiesMetadata=function(t){return Reflect.getMetadata(o.TAGGED_PROP,t)||[]},t}();e.MetadataReader=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isStackOverflowExeption=void 0;var o=n(10);e.isStackOverflowExeption=function(t){return t instanceof RangeError||t.message===o.STACK_OVERFLOW}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.inject=e.LazyServiceIdentifer=void 0;var o=n(10),r=n(7),i=n(15),a=n(25),s=function(){function t(t){this._cb=t}return t.prototype.unwrap=function(){return this._cb()},t}();e.LazyServiceIdentifer=s,e.inject=function(t){return function(e,n,s){if(void 0===t)throw new Error(o.UNDEFINED_INJECT_ANNOTATION(e.name));var u=new i.Metadata(r.INJECT_TAG,t);"number"==typeof s?a.tagParameter(e,n,s,u):a.tagProperty(e,n,u)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Target=void 0;var o=n(7),r=n(26),i=n(15),a=n(161),s=function(){function t(t,e,n,s){this.id=r.id(),this.type=t,this.serviceIdentifier=n,this.name=new a.QueryableString(e||""),this.metadata=new Array;var u=null;"string"==typeof s?u=new i.Metadata(o.NAMED_TAG,s):s instanceof i.Metadata&&(u=s),null!==u&&this.metadata.push(u)}return t.prototype.hasTag=function(t){for(var e=0,n=this.metadata;e<n.length;e++){if(n[e].key===t)return!0}return!1},t.prototype.isArray=function(){return this.hasTag(o.MULTI_INJECT_TAG)},t.prototype.matchesArray=function(t){return this.matchesTag(o.MULTI_INJECT_TAG)(t)},t.prototype.isNamed=function(){return this.hasTag(o.NAMED_TAG)},t.prototype.isTagged=function(){return this.metadata.some((function(t){return t.key!==o.INJECT_TAG&&t.key!==o.MULTI_INJECT_TAG&&t.key!==o.NAME_TAG&&t.key!==o.UNMANAGED_TAG&&t.key!==o.NAMED_TAG}))},t.prototype.isOptional=function(){return this.matchesTag(o.OPTIONAL_TAG)(!0)},t.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter((function(t){return t.key===o.NAMED_TAG}))[0]:null},t.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter((function(t){return t.key!==o.INJECT_TAG&&t.key!==o.MULTI_INJECT_TAG&&t.key!==o.NAME_TAG&&t.key!==o.UNMANAGED_TAG&&t.key!==o.NAMED_TAG})):null},t.prototype.matchesNamedTag=function(t){return this.matchesTag(o.NAMED_TAG)(t)},t.prototype.matchesTag=function(t){var e=this;return function(n){for(var o=0,r=e.metadata;o<r.length;o++){var i=r[o];if(i.key===t&&i.value===n)return!0}return!1}},t}();e.Target=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingWhenOnSyntax=void 0;var o=n(61),r=n(62),i=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new r.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new o.BindingOnSyntax(this._binding)}return t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t}();e.BindingWhenOnSyntax=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.typeConstraint=e.namedConstraint=e.taggedConstraint=e.traverseAncerstors=void 0;var o=n(7),r=n(15),i=function(t,e){var n=t.parentRequest;return null!==n&&(!!e(n)||i(n,e))};e.traverseAncerstors=i;var a=function(t){return function(e){var n=function(n){return null!==n&&null!==n.target&&n.target.matchesTag(t)(e)};return n.metaData=new r.Metadata(t,e),n}};e.taggedConstraint=a;var s=a(o.NAMED_TAG);e.namedConstraint=s;e.typeConstraint=function(t){return function(e){var n=null;if(null!==e){if(n=e.bindings[0],"string"==typeof t)return n.serviceIdentifier===t;var o=e.bindings[0].implementationType;return t===o}return!1}}},function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=function(){function t(){}return t.prototype.isAllowed=function(t){return!0},t=o([r.injectable()],t)}();e.DefaultDiagramLocker=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.easeInOut=function(t){return t<.5?t*t*2:1-(1-t)*(1-t)*2}},function(t,e,n){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n(1),u=n(19),c=n(2),d=n(39),l=n(5),f=function(){function t(){this.undoStack=[],this.redoStack=[],this.offStack=[]}return t.prototype.initialize=function(){this.currentPromise=Promise.resolve({main:{model:this.modelFactory.createRoot(u.EMPTY_ROOT),modelChanged:!1},hidden:{model:this.modelFactory.createRoot(u.EMPTY_ROOT),modelChanged:!1},popup:{model:this.modelFactory.createRoot(u.EMPTY_ROOT),modelChanged:!1}})},Object.defineProperty(t.prototype,"currentModel",{get:function(){return this.currentPromise.then((function(t){return t.main.model}))},enumerable:!0,configurable:!0}),t.prototype.executeAll=function(t){var e=this;return t.forEach((function(t){e.logger.log(e,"Executing",t),e.handleCommand(t,t.execute,e.mergeOrPush)})),this.thenUpdate()},t.prototype.execute=function(t){return this.logger.log(this,"Executing",t),this.handleCommand(t,t.execute,this.mergeOrPush),this.thenUpdate()},t.prototype.undo=function(){var t=this;this.undoOffStackSystemCommands(),this.undoPreceedingSystemCommands();var e=this.undoStack[this.undoStack.length-1];return void 0===e||this.isBlockUndo(e)||(this.undoStack.pop(),this.logger.log(this,"Undoing",e),this.handleCommand(e,e.undo,(function(e,n){t.redoStack.push(e)}))),this.thenUpdate()},t.prototype.redo=function(){var t=this;this.undoOffStackSystemCommands();var e=this.redoStack.pop();return void 0!==e&&(this.logger.log(this,"Redoing",e),this.handleCommand(e,e.redo,(function(e,n){t.pushToUndoStack(e)}))),this.redoFollowingSystemCommands(),this.thenUpdate()},t.prototype.handleCommand=function(t,e,n){var o=this;this.currentPromise=this.currentPromise.then((function(r){return new Promise((function(i){var a;a=t instanceof l.HiddenCommand?"hidden":t instanceof l.PopupCommand?"popup":"main";var s,u=o.createContext(r.main.model);try{s=e.call(t,u)}catch(t){o.logger.error(o,"Failed to execute command:",t),s=r[a].model}var d=p(r);s instanceof Promise?s.then((function(e){"main"===a&&n.call(o,t,u),d[a]={model:e,modelChanged:!0},i(d)})):s instanceof c.SModelRoot?("main"===a&&n.call(o,t,u),d[a]={model:s,modelChanged:!0},i(d)):("main"===a&&n.call(o,t,u),d[a]={model:s.model,modelChanged:r[a].modelChanged||s.modelChanged,cause:s.cause},i(d))}))}))},t.prototype.pushToUndoStack=function(t){this.undoStack.push(t),this.options.undoHistoryLimit>=0&&this.undoStack.length>this.options.undoHistoryLimit&&this.undoStack.splice(0,this.undoStack.length-this.options.undoHistoryLimit)},t.prototype.thenUpdate=function(){var t=this;return this.currentPromise=this.currentPromise.then((function(e){var n=p(e);return e.hidden.modelChanged&&(t.updateHidden(e.hidden.model,e.hidden.cause),n.hidden.modelChanged=!1,n.hidden.cause=void 0),e.main.modelChanged&&(t.update(e.main.model,e.main.cause),n.main.modelChanged=!1,n.main.cause=void 0),e.popup.modelChanged&&(t.updatePopup(e.popup.model,e.popup.cause),n.popup.modelChanged=!1,n.popup.cause=void 0),n})),this.currentModel},t.prototype.update=function(t,e){void 0===this.modelViewer&&(this.modelViewer=this.viewerProvider.modelViewer),this.modelViewer.update(t,e)},t.prototype.updateHidden=function(t,e){void 0===this.hiddenModelViewer&&(this.hiddenModelViewer=this.viewerProvider.hiddenModelViewer),this.hiddenModelViewer.update(t,e)},t.prototype.updatePopup=function(t,e){void 0===this.popupModelViewer&&(this.popupModelViewer=this.viewerProvider.popupModelViewer),this.popupModelViewer.update(t,e)},t.prototype.mergeOrPush=function(t,e){var n=this;if(this.isBlockUndo(t))return this.undoStack=[],this.redoStack=[],this.offStack=[],void this.pushToUndoStack(t);if(this.isPushToOffStack(t)&&this.redoStack.length>0){if(this.offStack.length>0&&(o=this.offStack[this.offStack.length-1])instanceof l.MergeableCommand&&o.merge(t,e))return;this.offStack.push(t)}else if(this.isPushToUndoStack(t)){var o;if(this.offStack.forEach((function(t){return n.undoStack.push(t)})),this.offStack=[],this.redoStack=[],this.undoStack.length>0)if((o=this.undoStack[this.undoStack.length-1])instanceof l.MergeableCommand&&o.merge(t,e))return;this.pushToUndoStack(t)}},t.prototype.undoOffStackSystemCommands=function(){for(var t=this.offStack.pop();void 0!==t;)this.logger.log(this,"Undoing off-stack",t),this.handleCommand(t,t.undo,(function(){})),t=this.offStack.pop()},t.prototype.undoPreceedingSystemCommands=function(){for(var t=this,e=this.undoStack[this.undoStack.length-1];void 0!==e&&this.isPushToOffStack(e);)this.undoStack.pop(),this.logger.log(this,"Undoing",e),this.handleCommand(e,e.undo,(function(e,n){t.redoStack.push(e)})),e=this.undoStack[this.undoStack.length-1]},t.prototype.redoFollowingSystemCommands=function(){for(var t=this,e=this.redoStack[this.redoStack.length-1];void 0!==e&&this.isPushToOffStack(e);)this.redoStack.pop(),this.logger.log(this,"Redoing ",e),this.handleCommand(e,e.redo,(function(e,n){t.pushToUndoStack(e)})),e=this.redoStack[this.redoStack.length-1]},t.prototype.createContext=function(t){return{root:t,modelChanged:this,modelFactory:this.modelFactory,duration:this.options.defaultDuration,logger:this.logger,syncer:this.syncer}},t.prototype.isPushToOffStack=function(t){return t instanceof l.SystemCommand},t.prototype.isPushToUndoStack=function(t){return!(t instanceof l.HiddenCommand)},t.prototype.isBlockUndo=function(t){return t instanceof l.ResetCommand},r([a.inject(s.TYPES.IModelFactory),i("design:type",Object)],t.prototype,"modelFactory",void 0),r([a.inject(s.TYPES.IViewerProvider),i("design:type",Object)],t.prototype,"viewerProvider",void 0),r([a.inject(s.TYPES.ILogger),i("design:type",Object)],t.prototype,"logger",void 0),r([a.inject(s.TYPES.AnimationFrameSyncer),i("design:type",d.AnimationFrameSyncer)],t.prototype,"syncer",void 0),r([a.inject(s.TYPES.CommandStackOptions),i("design:type",Object)],t.prototype,"options",void 0),r([a.postConstruct(),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"initialize",null),t=r([a.injectable()],t)}();function p(t){return{main:o({},t.main),hidden:o({},t.hidden),popup:o({},t.popup)}}e.CommandStack=f},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),u=n(1),c=n(64),d=n(17),l=n(21),f=function(){function t(){this.tools=[],this.defaultTools=[],this.actives=[]}return Object.defineProperty(t.prototype,"managedTools",{get:function(){return this.defaultTools.concat(this.tools)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activeTools",{get:function(){return this.actives},enumerable:!0,configurable:!0}),t.prototype.disableActiveTools=function(){this.actives.forEach((function(t){return t.disable()})),this.actives.splice(0,this.actives.length)},t.prototype.enableDefaultTools=function(){this.enable(this.defaultTools.map((function(t){return t.id})))},t.prototype.enable=function(t){var e=this;this.disableActiveTools(),t.map((function(t){return e.tool(t)})).forEach((function(t){void 0!==t&&(t.enable(),e.actives.push(t))}))},t.prototype.tool=function(t){return this.managedTools.find((function(e){return e.id===t}))},t.prototype.registerDefaultTools=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0,o=t;n<o.length;n++){var r=o[n];this.defaultTools.push(r)}},t.prototype.registerTools=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0,o=t;n<o.length;n++){var r=o[n];this.tools.push(r)}},t=i([s.injectable()],t)}();e.ToolManager=f;var p=function(){function t(){}return t.prototype.handle=function(t){switch(t.kind){case c.EnableDefaultToolsAction.KIND:this.toolManager.enableDefaultTools();break;case c.EnableToolsAction.KIND:this.toolManager.enable(t.toolIds)}},i([s.inject(u.TYPES.IToolManager),a("design:type",Object)],t.prototype,"toolManager",void 0),t=i([s.injectable()],t)}();e.ToolManagerActionHandler=p;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.keyDown=function(t,e){return l.matchesKeystroke(e,"Escape")?[new c.EnableDefaultToolsAction]:[]},e=i([s.injectable()],e)}(d.KeyListener);e.DefaultToolsEnablingKeyListener=h},function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var r=n(150),i=n(0),a=function(){function t(){}return t.prototype.render=function(t,e){var n=this;return r.h(this.selector(t),{key:t.id,hook:{init:this.init.bind(this),prepatch:this.prepatch.bind(this)},fn:function(){return n.renderAndDecorate(t,e)},args:this.watchedArgs(t),thunk:!0})},t.prototype.renderAndDecorate=function(t,e){var n=this.doRender(t,e);return e.decorate(n,t),n},t.prototype.copyToThunk=function(t,e){e.elm=t.elm,t.data.fn=e.data.fn,t.data.args=e.data.args,e.data=t.data,e.children=t.children,e.text=t.text,e.elm=t.elm},t.prototype.init=function(t){var e=t.data,n=e.fn.apply(void 0,e.args);this.copyToThunk(n,t)},t.prototype.prepatch=function(t,e){var n=t.data,o=e.data;this.equals(n.args,o.args)?this.copyToThunk(t,e):this.copyToThunk(o.fn.apply(void 0,o.args),e)},t.prototype.equals=function(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;for(var n=0;n<e.length;++n)if(!this.equals(t[n],e[n]))return!1}else if("object"==typeof t&&"object"==typeof e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var o in t)if(!("parent"===o||"root"===o||o in e&&this.equals(t[o],e[o])))return!1}else if(t!==e)return!1;return!0},t=o([i.injectable()],t)}();e.ThunkView=a,e.isThunk=function(t){return"thunk"in t}},function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),a=n(1),s=n(39),u=function(){function t(){}return t.prototype.update=function(t,e){if(void 0!==e)this.delegate.update(t,e),this.cachedModel=void 0;else{var n=void 0===this.cachedModel;this.cachedModel=t,n&&this.scheduleUpdate()}},t.prototype.scheduleUpdate=function(){var t=this;this.syncer.onEndOfNextFrame((function(){t.cachedModel&&(t.delegate.update(t.cachedModel),t.cachedModel=void 0)}))},o([i.inject(a.TYPES.IViewer),r("design:type",Object)],t.prototype,"delegate",void 0),o([i.inject(a.TYPES.AnimationFrameSyncer),r("design:type",s.AnimationFrameSyncer)],t.prototype,"syncer",void 0),t=o([i.injectable()],t)}();e.ViewerCache=u},function(t,e,n){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var r=n(1);e.defaultViewerOptions=function(){return{baseDiv:"sprotty",baseClass:"sprotty",hiddenDiv:"sprotty-hidden",hiddenClass:"sprotty-hidden",popupDiv:"sprotty-popup",popupClass:"sprotty-popup",popupClosedClass:"sprotty-popup-closed",needsClientLayout:!0,needsServerLayout:!1,popupOpenDelay:1e3,popupCloseDelay:300}},e.configureViewerOptions=function(t,n){var i=o(o({},e.defaultViewerOptions()),n);t.isBound(r.TYPES.ViewerOptions)?t.rebind(r.TYPES.ViewerOptions).toConstantValue(i):t.bind(r.TYPES.ViewerOptions).toConstantValue(i)},e.overrideViewerOptions=function(t,e){var n=t.get(r.TYPES.ViewerOptions);for(var o in e)e.hasOwnProperty(o)&&(n[o]=e[o]);return n}},function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},i=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var a=n(22),s=n(150),u=n(182),c=n(183),d=n(184),l=n(185),f=n(186),p=n(0),h=n(1),y=n(27),g=n(47),v=n(9),m=n(99),b=n(19),_=function(){function t(t,e,n){this.viewRegistry=t,this.targetKind=e,this.postprocessors=n}return t.prototype.decorate=function(t,e){return m.isThunk(t)?t:this.postprocessors.reduce((function(t,n){return n.decorate(t,e)}),t)},t.prototype.renderElement=function(t,e){var n=this.viewRegistry.get(t.type).render(t,this,e);return n?this.decorate(n,t):void 0},t.prototype.renderChildren=function(t,e){var n=this;return t.children.map((function(t){return n.renderElement(t,e)})).filter((function(t){return void 0!==t}))},t.prototype.postUpdate=function(t){this.postprocessors.forEach((function(e){return e.postUpdate(t)}))},t}();e.ModelRenderer=_;var w=function(){function t(){this.patcher=s.init(this.createModules())}return t.prototype.createModules=function(){return[u.propsModule,c.attributesModule,f.classModule,d.styleModule,l.eventListenersModule]},t=o([p.injectable(),r("design:paramtypes",[])],t)}();e.PatcherProvider=w;var S=function(){function t(t,e,n){var o=this;this.onWindowResize=function(t){var e=document.getElementById(o.options.baseDiv);if(null!==e){var n=o.getBoundsInPage(e);o.actiondispatcher.dispatch(new g.InitializeCanvasBoundsAction(n))}},this.renderer=t("main",n),this.patcher=e.patcher}return t.prototype.update=function(t,e){var n=this;this.logger.log(this,"rendering",t);var o=a.html("div",{id:this.options.baseDiv},this.renderer.renderElement(t));if(void 0!==this.lastVDOM){var r=this.hasFocus();v.copyClassesFromVNode(this.lastVDOM,o),this.lastVDOM=this.patcher.call(this,this.lastVDOM,o),this.restoreFocus(r)}else if("undefined"!=typeof document){var i=document.getElementById(this.options.baseDiv);null!==i?("undefined"!=typeof window&&window.addEventListener("resize",(function(){n.onWindowResize(o)})),v.copyClassesFromElement(i,o),v.setClass(o,this.options.baseClass,!0),this.lastVDOM=this.patcher.call(this,i,o)):this.logger.error(this,"element not in DOM:",this.options.baseDiv)}this.renderer.postUpdate(e)},t.prototype.hasFocus=function(){if("undefined"!=typeof document&&document.activeElement&&this.lastVDOM.children&&this.lastVDOM.children.length>0){var t=this.lastVDOM.children[0];if("object"==typeof t){var e=t.elm;return document.activeElement===e}}return!1},t.prototype.restoreFocus=function(t){if(t&&this.lastVDOM.children&&this.lastVDOM.children.length>0){var e=this.lastVDOM.children[0];if("object"==typeof e){var n=e.elm;n&&"function"==typeof n.focus&&n.focus()}}},t.prototype.getBoundsInPage=function(t){var e=t.getBoundingClientRect(),n=y.getWindowScroll();return{x:e.left+n.x,y:e.top+n.y,width:e.width,height:e.height}},o([p.inject(h.TYPES.ViewerOptions),r("design:type",Object)],t.prototype,"options",void 0),o([p.inject(h.TYPES.ILogger),r("design:type",Object)],t.prototype,"logger",void 0),o([p.inject(h.TYPES.IActionDispatcher),r("design:type",Object)],t.prototype,"actiondispatcher",void 0),t=o([p.injectable(),i(0,p.inject(h.TYPES.ModelRendererFactory)),i(1,p.inject(h.TYPES.PatcherProvider)),i(2,p.multiInject(h.TYPES.IVNodePostprocessor)),i(2,p.optional()),r("design:paramtypes",[Function,w,Array])],t)}();e.ModelViewer=S;var P=function(){function t(t,e,n){this.hiddenRenderer=t("hidden",n),this.patcher=e.patcher}return t.prototype.update=function(t,e){var n;if(this.logger.log(this,"rendering hidden"),t.type===b.EMPTY_ROOT.type)n=a.html("div",{id:this.options.hiddenDiv});else{var o=this.hiddenRenderer.renderElement(t);o&&v.setAttr(o,"opacity",0),n=a.html("div",{id:this.options.hiddenDiv},o)}if(void 0!==this.lastHiddenVDOM)v.copyClassesFromVNode(this.lastHiddenVDOM,n),this.lastHiddenVDOM=this.patcher.call(this,this.lastHiddenVDOM,n);else{var r=document.getElementById(this.options.hiddenDiv);null===r?(r=document.createElement("div"),document.body.appendChild(r)):v.copyClassesFromElement(r,n),v.setClass(n,this.options.baseClass,!0),v.setClass(n,this.options.hiddenClass,!0),this.lastHiddenVDOM=this.patcher.call(this,r,n)}this.hiddenRenderer.postUpdate(e)},o([p.inject(h.TYPES.ViewerOptions),r("design:type",Object)],t.prototype,"options",void 0),o([p.inject(h.TYPES.ILogger),r("design:type",Object)],t.prototype,"logger",void 0),t=o([p.injectable(),i(0,p.inject(h.TYPES.ModelRendererFactory)),i(1,p.inject(h.TYPES.PatcherProvider)),i(2,p.multiInject(h.TYPES.HiddenVNodePostprocessor)),i(2,p.optional()),r("design:paramtypes",[Function,w,Array])],t)}();e.HiddenModelViewer=P;var O=function(){function t(t,e,n){this.modelRendererFactory=t,this.popupRenderer=this.modelRendererFactory("popup",n),this.patcher=e.patcher}return t.prototype.update=function(t,e){this.logger.log(this,"rendering popup",t);var n,o=t.type===b.EMPTY_ROOT.type;if(o)n=a.html("div",{id:this.options.popupDiv});else{var r=t.canvasBounds,i={top:r.y+"px",left:r.x+"px"};n=a.html("div",{id:this.options.popupDiv,style:i},this.popupRenderer.renderElement(t))}if(void 0!==this.lastPopupVDOM)v.copyClassesFromVNode(this.lastPopupVDOM,n),v.setClass(n,this.options.popupClosedClass,o),this.lastPopupVDOM=this.patcher.call(this,this.lastPopupVDOM,n);else if("undefined"!=typeof document){var s=document.getElementById(this.options.popupDiv);null===s?(s=document.createElement("div"),document.body.appendChild(s)):v.copyClassesFromElement(s,n),v.setClass(n,this.options.popupClass,!0),v.setClass(n,this.options.popupClosedClass,o),this.lastPopupVDOM=this.patcher.call(this,s,n)}this.popupRenderer.postUpdate(e)},o([p.inject(h.TYPES.ViewerOptions),r("design:type",Object)],t.prototype,"options",void 0),o([p.inject(h.TYPES.ILogger),r("design:type",Object)],t.prototype,"logger",void 0),t=o([p.injectable(),i(0,p.inject(h.TYPES.ModelRendererFactory)),i(1,p.inject(h.TYPES.PatcherProvider)),i(2,p.multiInject(h.TYPES.PopupVNodePostprocessor)),i(2,p.optional()),r("design:paramtypes",[Function,w,Array])],t)}();e.PopupModelViewer=O},function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(9),a=function(){function t(){}return t.prototype.decorate=function(t,e){return t.sel&&t.sel.startsWith("svg")&&i.setAttr(t,"tabindex",0),t},t.prototype.postUpdate=function(){},t=o([r.injectable()],t)}();e.FocusFixPostprocessor=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=n(1),i=n(47),a=n(66),s=n(60),u=n(48),c=n(97),d=n(19),l=n(39),f=n(102),p=n(101),h=n(16),y=n(17),g=n(103),v=n(51),m=n(100),b=n(40),_=n(187),w=n(13),S=n(188),P=n(98),O=n(64),E=n(32),x=n(50),R=n(95),T=new o.ContainerModule((function(t,e,n){t(r.TYPES.ILogger).to(a.NullLogger).inSingletonScope(),t(r.TYPES.LogLevel).toConstantValue(a.LogLevel.warn),t(r.TYPES.SModelRegistry).to(d.SModelRegistry).inSingletonScope(),t(u.ActionHandlerRegistry).toSelf().inSingletonScope(),t(r.TYPES.ActionHandlerRegistryProvider).toProvider((function(t){return function(){return new Promise((function(e){e(t.container.get(u.ActionHandlerRegistry))}))}})),t(r.TYPES.ViewRegistry).to(v.ViewRegistry).inSingletonScope(),t(r.TYPES.IModelFactory).to(d.SModelFactory).inSingletonScope(),t(r.TYPES.IActionDispatcher).to(s.ActionDispatcher).inSingletonScope(),t(r.TYPES.IActionDispatcherProvider).toProvider((function(t){return function(){return new Promise((function(e){e(t.container.get(r.TYPES.IActionDispatcher))}))}})),t(r.TYPES.IDiagramLocker).to(R.DefaultDiagramLocker).inSingletonScope(),t(r.TYPES.IActionHandlerInitializer).to(w.CommandActionHandlerInitializer),t(r.TYPES.ICommandStack).to(c.CommandStack).inSingletonScope(),t(r.TYPES.ICommandStackProvider).toProvider((function(t){return function(){return new Promise((function(e){e(t.container.get(r.TYPES.ICommandStack))}))}})),t(r.TYPES.CommandStackOptions).toConstantValue({defaultDuration:250,undoHistoryLimit:50}),t(f.ModelViewer).toSelf().inSingletonScope(),t(f.HiddenModelViewer).toSelf().inSingletonScope(),t(f.PopupModelViewer).toSelf().inSingletonScope(),t(r.TYPES.ModelViewer).toDynamicValue((function(t){var e=t.container.createChild();return e.bind(r.TYPES.IViewer).toService(f.ModelViewer),e.bind(m.ViewerCache).toSelf(),e.get(m.ViewerCache)})).inSingletonScope(),t(r.TYPES.PopupModelViewer).toDynamicValue((function(t){var e=t.container.createChild();return e.bind(r.TYPES.IViewer).toService(f.PopupModelViewer),e.bind(m.ViewerCache).toSelf(),e.get(m.ViewerCache)})).inSingletonScope(),t(r.TYPES.HiddenModelViewer).toService(f.HiddenModelViewer),t(r.TYPES.IViewerProvider).toDynamicValue((function(t){return{get modelViewer(){return t.container.get(r.TYPES.ModelViewer)},get hiddenModelViewer(){return t.container.get(r.TYPES.HiddenModelViewer)},get popupModelViewer(){return t.container.get(r.TYPES.PopupModelViewer)}}})),t(r.TYPES.ViewerOptions).toConstantValue(p.defaultViewerOptions()),t(r.TYPES.PatcherProvider).to(f.PatcherProvider).inSingletonScope(),t(r.TYPES.DOMHelper).to(b.DOMHelper).inSingletonScope(),t(r.TYPES.ModelRendererFactory).toFactory((function(t){return function(e,n){var o=t.container.get(r.TYPES.ViewRegistry);return new f.ModelRenderer(o,e,n)}})),t(_.IdPostprocessor).toSelf().inSingletonScope(),t(r.TYPES.IVNodePostprocessor).toService(_.IdPostprocessor),t(r.TYPES.HiddenVNodePostprocessor).toService(_.IdPostprocessor),t(S.CssClassPostprocessor).toSelf().inSingletonScope(),t(r.TYPES.IVNodePostprocessor).toService(S.CssClassPostprocessor),t(r.TYPES.HiddenVNodePostprocessor).toService(S.CssClassPostprocessor),t(h.MouseTool).toSelf().inSingletonScope(),t(r.TYPES.IVNodePostprocessor).toService(h.MouseTool),t(y.KeyTool).toSelf().inSingletonScope(),t(r.TYPES.IVNodePostprocessor).toService(y.KeyTool),t(g.FocusFixPostprocessor).toSelf().inSingletonScope(),t(r.TYPES.IVNodePostprocessor).toService(g.FocusFixPostprocessor),t(r.TYPES.PopupVNodePostprocessor).toService(_.IdPostprocessor),t(h.PopupMouseTool).toSelf().inSingletonScope(),t(r.TYPES.PopupVNodePostprocessor).toService(h.PopupMouseTool),t(r.TYPES.AnimationFrameSyncer).to(l.AnimationFrameSyncer).inSingletonScope();var o={bind:t,isBound:n};w.configureCommand(o,i.InitializeCanvasBoundsCommand),t(i.CanvasBoundsInitializer).toSelf().inSingletonScope(),t(r.TYPES.IVNodePostprocessor).toService(i.CanvasBoundsInitializer),w.configureCommand(o,E.SetModelCommand),t(r.TYPES.IToolManager).to(P.ToolManager).inSingletonScope(),t(r.TYPES.KeyListener).to(P.DefaultToolsEnablingKeyListener),t(P.ToolManagerActionHandler).toSelf().inSingletonScope(),u.configureActionHandler(o,O.EnableDefaultToolsAction.KIND,P.ToolManagerActionHandler),u.configureActionHandler(o,O.EnableToolsAction.KIND,P.ToolManagerActionHandler),t(r.TYPES.UIExtensionRegistry).to(x.UIExtensionRegistry).inSingletonScope(),w.configureCommand(o,x.SetUIExtensionVisibilityCommand),t(h.MousePositionTracker).toSelf().inSingletonScope(),t(r.TYPES.MouseListener).toService(h.MousePositionTracker)}));e.default=T},function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),a=n(3),s=n(2),u=n(1),c=n(41),d=n(67),l=n(4),f=function(){};e.BoundsData=f;var p=function(){function t(){this.element2boundsData=new Map}return t.prototype.decorate=function(t,e){return(l.isSizeable(e)||l.isLayoutContainer(e))&&this.element2boundsData.set(e,{vnode:t,bounds:e.bounds,boundsChanged:!1,alignmentChanged:!1}),e instanceof s.SModelRoot&&(this.root=e),t},t.prototype.postUpdate=function(t){if(void 0!==t&&t.kind===c.RequestBoundsAction.KIND){var e=t;this.getBoundsFromDOM(),this.layouter.layout(this.element2boundsData);var n=[],o=[];this.element2boundsData.forEach((function(t,e){if(t.boundsChanged&&void 0!==t.bounds){var r={elementId:e.id,newSize:{width:t.bounds.width,height:t.bounds.height}};e instanceof s.SChildElement&&l.isLayoutContainer(e.parent)&&(r.newPosition={x:t.bounds.x,y:t.bounds.y}),n.push(r)}t.alignmentChanged&&void 0!==t.alignment&&o.push({elementId:e.id,newAlignment:t.alignment})}));var r=void 0!==this.root?this.root.revision:void 0;this.actionDispatcher.dispatch(new c.ComputedBoundsAction(n,r,o,e.requestId)),this.element2boundsData.clear()}},t.prototype.getBoundsFromDOM=function(){var t=this;this.element2boundsData.forEach((function(e,n){if(e.bounds&&l.isSizeable(n)){var o=e.vnode;if(o&&o.elm){var r=t.getBounds(o.elm,n);!l.isAlignable(n)||a.almostEquals(r.x,0)&&a.almostEquals(r.y,0)||(e.alignment={x:-r.x,y:-r.y},e.alignmentChanged=!0);var i={x:n.bounds.x,y:n.bounds.y,width:r.width,height:r.height};a.almostEquals(i.x,n.bounds.x)&&a.almostEquals(i.y,n.bounds.y)&&a.almostEquals(i.width,n.bounds.width)&&a.almostEquals(i.height,n.bounds.height)||(e.bounds=i,e.boundsChanged=!0)}}}))},t.prototype.getBounds=function(t,e){if("function"!=typeof t.getBBox)return this.logger.error(this,"Not an SVG element:",t),a.EMPTY_BOUNDS;var n=t.getBBox();return{x:n.x,y:n.y,width:n.width,height:n.height}},o([i.inject(u.TYPES.ILogger),r("design:type",Object)],t.prototype,"logger",void 0),o([i.inject(u.TYPES.IActionDispatcher),r("design:type",Object)],t.prototype,"actionDispatcher",void 0),o([i.inject(u.TYPES.Layouter),r("design:type",d.Layouter)],t.prototype,"layouter",void 0),t=o([i.injectable()],t)}();e.HiddenBoundsUpdater=p},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var a=n(3),s=n(68),u=n(4),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.getChildrenSize=function(t,e,n){var o=-1,r=0,i=!0;return t.children.forEach((function(t){if(u.isLayoutableChild(t)){var s=n.getBoundsData(t).bounds;void 0!==s&&a.isValidDimension(s)&&(r+=s.height,i?i=!1:r+=e.vGap,o=Math.max(o,s.width))}})),{width:o,height:r}},e.prototype.layoutChild=function(t,e,n,o,r,i,a,s){var u=this.getDx(o.hAlign,n,a);return e.bounds={x:r.paddingLeft+t.bounds.x-n.x+u,y:i.y+t.bounds.y-n.y,width:n.width,height:n.height},e.boundsChanged=!0,{x:i.x,y:i.y+n.height+r.vGap}},e.prototype.getDefaultLayoutOptions=function(){return{resizeContainer:!0,paddingTop:5,paddingBottom:5,paddingLeft:5,paddingRight:5,paddingFactor:1,vGap:1,hAlign:"center",minWidth:0,minHeight:0}},e.prototype.spread=function(t,e){return i(i({},t),e)},e.KIND="vbox",e}(s.AbstractLayout);e.VBoxLayouter=c},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var a=n(3),s=n(68),u=n(4),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.getChildrenSize=function(t,e,n){var o=0,r=-1,i=!0;return t.children.forEach((function(t){if(u.isLayoutableChild(t)){var s=n.getBoundsData(t).bounds;void 0!==s&&a.isValidDimension(s)&&(i?i=!1:o+=e.hGap,o+=s.width,r=Math.max(r,s.height))}})),{width:o,height:r}},e.prototype.layoutChild=function(t,e,n,o,r,i,a,s){var u=this.getDy(o.vAlign,n,s);return e.bounds={x:i.x+t.bounds.x-n.x,y:r.paddingTop+t.bounds.y-n.y+u,width:n.width,height:n.height},e.boundsChanged=!0,{x:i.x+n.width+r.hGap,y:i.y}},e.prototype.getDefaultLayoutOptions=function(){return{resizeContainer:!0,paddingTop:5,paddingBottom:5,paddingLeft:5,paddingRight:5,paddingFactor:1,hGap:1,vAlign:"center",minWidth:0,minHeight:0}},e.prototype.spread=function(t,e){return i(i({},t),e)},e.KIND="hbox",e}(s.AbstractLayout);e.HBoxLayouter=c},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var a=n(3),s=n(68),u=n(4),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.getChildrenSize=function(t,e,n){var o=-1,r=-1;return t.children.forEach((function(t){if(u.isLayoutableChild(t)){var e=n.getBoundsData(t).bounds;void 0!==e&&a.isValidDimension(e)&&(o=Math.max(o,e.width),r=Math.max(r,e.height))}})),{width:o,height:r}},e.prototype.layoutChild=function(t,e,n,o,r,i,a,s){var u=this.getDx(o.hAlign,n,a),c=this.getDy(o.vAlign,n,s);return e.bounds={x:r.paddingLeft+t.bounds.x-n.x+u,y:r.paddingTop+t.bounds.y-n.y+c,width:n.width,height:n.height},e.boundsChanged=!0,i},e.prototype.getDefaultLayoutOptions=function(){return{resizeContainer:!0,paddingTop:5,paddingBottom:5,paddingLeft:5,paddingRight:5,paddingFactor:1,hAlign:"center",vAlign:"center",minWidth:0,minHeight:0}},e.prototype.spread=function(t,e){return i(i({},t),e)},e.KIND="stack",e}(s.AbstractLayout);e.StackLayouter=c},function(t,e,n){"use strict";function o(t){return t.hasFeature(e.nameFeature)}Object.defineProperty(e,"__esModule",{value:!0}),e.nameFeature=Symbol("nameableFeature"),e.isNameable=o,e.name=function(t){return o(t)?t.name:void 0}},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),u=n(1),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.execute=function(t){var e=this.retrieveResult(t);return this.actionDispatcher.dispatch(e),{model:t.root,modelChanged:!1}},e.prototype.undo=function(t){return{model:t.root,modelChanged:!1}},e.prototype.redo=function(t){return{model:t.root,modelChanged:!1}},i([s.inject(u.TYPES.IActionDispatcher),a("design:type",Object)],e.prototype,"actionDispatcher",void 0),e=i([s.injectable()],e)}(n(5).SystemCommand);e.ModelRequestCommand=c},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,r++)o[r]=i[a];return o};Object.defineProperty(e,"__esModule",{value:!0});var u=n(0),c=n(12),d=n(1),l=n(65),f=n(50),p=n(40),h=n(17),y=n(31),g=n(21),v=n(4),m=n(11),b=n(71),_=n(16),w=n(189),S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.loadingIndicatorClasses=["loading"],e.xOffset=20,e.yOffset=20,e.defaultWidth=400,e.debounceWaitMs=100,e.noCommandsMsg="No commands available",e.paletteIndex=0,e}var n;return r(e,t),n=e,e.prototype.id=function(){return n.ID},e.prototype.containerClass=function(){return"command-palette"},e.prototype.show=function(e){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];t.prototype.show.apply(this,s([e],n)),this.paletteIndex=0,this.contextActions=void 0,this.inputElement.value="",this.autoCompleteResult=w(this.autocompleteSettings(e)),this.inputElement.focus()},e.prototype.initializeContents=function(t){var e=this;t.style.position="absolute",this.inputElement=document.createElement("input"),this.inputElement.style.width="100%",this.inputElement.addEventListener("keydown",(function(t){return e.hideIfEscapeEvent(t)})),this.inputElement.addEventListener("keydown",(function(t){return e.cylceIfInvokePaletteKey(t)})),this.inputElement.onblur=function(){return window.setTimeout((function(){return e.hide()}),200)},t.appendChild(this.inputElement)},e.prototype.hideIfEscapeEvent=function(t){g.matchesKeystroke(t,"Escape")&&this.hide()},e.prototype.cylceIfInvokePaletteKey=function(t){n.isInvokePaletteKey(t)&&this.cycle()},e.prototype.cycle=function(){this.contextActions=void 0,this.paletteIndex++},e.prototype.onBeforeShow=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];var r,i=this.xOffset,a=this.yOffset,s=y.toArray(e.index.all().filter((function(t){return m.isSelectable(t)&&t.selected})));1===s.length?(i+=(r=v.getAbsoluteClientBounds(s[0],this.domHelper,this.viewerOptions)).x+r.width,a+=r.y):(i+=(r=v.getAbsoluteClientBounds(e,this.domHelper,this.viewerOptions)).x,a+=r.y);t.style.left=i+"px",t.style.top=a+"px",t.style.width=this.defaultWidth+"px"},e.prototype.autocompleteSettings=function(t){var e=this;return{input:this.inputElement,emptyMsg:this.noCommandsMsg,className:"command-palette-suggestions",debounceWaitMs:this.debounceWaitMs,showOnFocus:!0,minLength:-1,fetch:function(n,o){return e.updateAutoCompleteActions(o,n,t)},onSelect:function(t){return e.onSelect(t)},render:function(t,n){return e.renderLabeledActionSuggestion(t,n)},customize:function(t,n,o,r){e.customizeSuggestionContainer(o,n,r)}}},e.prototype.onSelect=function(t){this.executeAction(t),this.hide()},e.prototype.updateAutoCompleteActions=function(t,e,n){var o=this;this.onLoading(),this.contextActions?(t(this.filterActions(e,this.contextActions)),this.onLoaded("success")):this.actionProviderRegistry.getActions(n,e,this.mousePositionTracker.lastPositionOnDiagram,this.paletteIndex).then((function(n){o.contextActions=n,t(o.filterActions(e,n)),o.onLoaded("success")})).catch((function(t){o.logger.error(o,"Failed to obtain actions from command palette action providers",t),o.onLoaded("error")}))},e.prototype.onLoading=function(){var t;this.loadingIndicator&&this.containerElement.contains(this.loadingIndicator)||(this.loadingIndicator=document.createElement("span"),(t=this.loadingIndicator.classList).add.apply(t,this.loadingIndicatorClasses),this.containerElement.appendChild(this.loadingIndicator))},e.prototype.onLoaded=function(t){this.containerElement.contains(this.loadingIndicator)&&this.containerElement.removeChild(this.loadingIndicator)},e.prototype.renderLabeledActionSuggestion=function(t,e){var n=document.createElement("div"),o=function(t){return t.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}(e).split(" ").join("|"),r=new RegExp(o,"gi");return t.icon&&this.renderIcon(n,t.icon),n.innerHTML+=t.label.replace(r,(function(t){return"<em>"+t+"</em>"})),n},e.prototype.renderIcon=function(t,e){t.innerHTML+='<span class="icon fa '+e+'"></span>'},e.prototype.filterActions=function(t,e){return y.toArray(e.filter((function(e){var n=e.label.toLowerCase();return t.split(" ").every((function(t){return-1!==n.indexOf(t.toLowerCase())}))})))},e.prototype.customizeSuggestionContainer=function(t,e,n){this.containerElement&&this.containerElement.appendChild(t)},e.prototype.hide=function(){t.prototype.hide.call(this),this.autoCompleteResult&&this.autoCompleteResult.destroy()},e.prototype.executeAction=function(t){var e=this;this.actionDispatcherProvider().then((function(e){return e.dispatchAll(function(t){if(c.isLabeledAction(t))return t.actions;if(c.isAction(t))return[t];return[]}(t))})).catch((function(t){return e.logger.error(e,"No action dispatcher available to execute command palette action",t)}))},e.ID="command-palette",e.isInvokePaletteKey=function(t){return g.matchesKeystroke(t,"Space","ctrl")},i([u.inject(d.TYPES.IActionDispatcherProvider),a("design:type",Function)],e.prototype,"actionDispatcherProvider",void 0),i([u.inject(d.TYPES.ICommandPaletteActionProviderRegistry),a("design:type",b.CommandPaletteActionProviderRegistry)],e.prototype,"actionProviderRegistry",void 0),i([u.inject(d.TYPES.ViewerOptions),a("design:type",Object)],e.prototype,"viewerOptions",void 0),i([u.inject(d.TYPES.DOMHelper),a("design:type",p.DOMHelper)],e.prototype,"domHelper",void 0),i([u.inject(_.MousePositionTracker),a("design:type",_.MousePositionTracker)],e.prototype,"mousePositionTracker",void 0),e=n=i([u.injectable()],e)}(l.AbstractUIExtension);e.CommandPalette=S;var P=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.keyDown=function(t,e){if(g.matchesKeystroke(e,"Escape"))return[new f.SetUIExtensionVisibilityAction(S.ID,!1,[])];if(S.isInvokePaletteKey(e)){var n=y.toArray(t.index.all().filter((function(t){return m.isSelectable(t)&&t.selected})).map((function(t){return t.id})));return[new f.SetUIExtensionVisibilityAction(S.ID,!0,n)]}return[]},e}(h.KeyListener);e.CommandPaletteKeyListener=P},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}},u=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function a(t){try{u(o.next(t))}catch(t){i(t)}}function s(t){try{u(o.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((o=o.apply(t,e||[])).next())}))},c=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var d=n(0),l=n(74),f=n(16),p=n(1),h=n(11),y=n(8),g=function(t){function e(e,n){var o=t.call(this)||this;return o.contextMenuService=e,o.menuProvider=n,o}return r(e,t),e.prototype.mouseDown=function(t,e){return 2===e.button&&this.showContextMenu(t,e),[]},e.prototype.showContextMenu=function(t,e){return u(this,void 0,void 0,(function(){var n,o,r,i,a,s;return c(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,this.contextMenuService()];case 1:return n=u.sent(),[3,3];case 2:return u.sent(),[2];case 3:return o={x:e.x,y:e.y},r=!1,(i=y.findParentByFeature(t,h.isSelectable))&&(r=i.selected,i.selected=!0),a=function(){i&&(i.selected=r)},[4,this.menuProvider.getItems(t.root,o)];case 4:return s=u.sent(),n.show(s,o,a),[2]}}))}))},e=i([s(0,d.inject(p.TYPES.IContextMenuServiceProvider)),s(1,d.inject(p.TYPES.IContextMenuProviderRegistry)),a("design:paramtypes",[Function,l.ContextMenuProviderRegistry])],e)}(f.MouseListener);e.ContextMenuMouseListener=g},function(t,e,n){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n(2),u=n(9),c=n(36),d=n(3),l=n(4),f=n(45),p=n(23),h=function(){function t(){}return t.prototype.decorate=function(t,e){if(f.isEdgeLayoutable(e)&&e.parent instanceof c.SEdge&&e.bounds!==d.EMPTY_BOUNDS){var n=this.getEdgePlacement(e),o=e.parent,r=Math.min(1,Math.max(0,n.position)),i=this.edgeRouterRegistry.get(o.routerKind),a=i.pointAt(o,r),s=i.derivativeAt(o,r),l="";if(a&&s){l+="translate("+a.x+", "+a.y+")";var p=d.toDegrees(Math.atan2(s.y,s.x));if(n.rotate){var h=p;Math.abs(p)>90&&(p<0?h+=180:p>0&&(h-=180)),l+=" rotate("+h+")",l+=" translate("+(y=this.getRotatedAlignment(e,n,h!==p)).x+", "+y.y+")"}else{var y;l+=" translate("+(y=this.getAlignment(e,n,p)).x+", "+y.y+")"}u.setAttr(t,"transform",l)}}return t},t.prototype.getRotatedAlignment=function(t,e,n){var o=l.isAlignable(t)?t.alignment.x:0,r=l.isAlignable(t)?t.alignment.y:0,i=t.bounds;if("on"===e.side)return{x:o-.5*i.height,y:r-.5*i.height};if(n)switch(e.position<.3333333?o-=i.width+e.offset:e.position<.6666666?o-=.5*i.width:o+=e.offset,e.side){case"left":case"bottom":r-=e.offset+i.height;break;case"right":case"top":r+=e.offset}else switch(e.position<.3333333?o+=e.offset:e.position<.6666666?o-=.5*i.width:o-=i.width+e.offset,e.side){case"right":case"bottom":r+=-e.offset-i.height;break;case"left":case"top":r+=e.offset}return{x:o,y:r}},t.prototype.getEdgePlacement=function(t){for(var e=t,n=[];void 0!==e;){var r=e.edgePlacement;if(void 0!==r&&n.push(r),!(e instanceof s.SChildElement))break;e=e.parent}return n.reverse().reduce((function(t,e){return o(o({},t),e)}),f.DEFAULT_EDGE_PLACEMENT)},t.prototype.getAlignment=function(t,e,n){var o=t.bounds,r=l.isAlignable(t)?t.alignment.x-o.width:0,i=l.isAlignable(t)?t.alignment.y-o.height:0;if("on"===e.side)return{x:r+.5*o.height,y:i+.5*o.height};var a=this.getQuadrant(n),s={x:e.offset,y:i+.5*o.height},u={x:e.offset,y:i+o.height+e.offset},c={x:-o.width-e.offset,y:i+o.height+e.offset},f={x:-o.width-e.offset,y:i+.5*o.height},p={x:-o.width-e.offset,y:i-e.offset},h={x:e.offset,y:i-e.offset};switch(e.side){case"left":switch(a.orientation){case"west":return d.linear(u,c,a.position);case"north":return d.linear(c,p,a.position);case"east":return d.linear(p,h,a.position);case"south":return d.linear(h,u,a.position)}break;case"right":switch(a.orientation){case"west":return d.linear(p,h,a.position);case"north":return d.linear(h,u,a.position);case"east":return d.linear(u,c,a.position);case"south":return d.linear(c,p,a.position)}break;case"top":switch(a.orientation){case"west":return d.linear(p,h,a.position);case"north":return this.linearFlip(h,s,f,p,a.position);case"east":return d.linear(p,h,a.position);case"south":return this.linearFlip(h,s,f,p,a.position)}break;case"bottom":switch(a.orientation){case"west":return d.linear(u,c,a.position);case"north":return this.linearFlip(c,f,s,u,a.position);case"east":return d.linear(u,c,a.position);case"south":return this.linearFlip(c,f,s,u,a.position)}}return{x:0,y:0}},t.prototype.getQuadrant=function(t){return Math.abs(t)>135?{orientation:"west",position:(t>0?t-135:t+225)/90}:t<-45?{orientation:"north",position:(t+135)/90}:t<45?{orientation:"east",position:(t+45)/90}:{orientation:"south",position:(t-45)/90}},t.prototype.linearFlip=function(t,e,n,o,r){return r<.5?d.linear(t,e,2*r):d.linear(n,o,2*r-1)},t.prototype.postUpdate=function(){},r([a.inject(p.EdgeRouterRegistry),i("design:type",p.EdgeRouterRegistry)],t.prototype,"edgeRouterRegistry",void 0),t=r([a.injectable()],t)}();e.EdgeLayoutPostprocessor=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.creatingOnDragFeature=Symbol("creatingOnDragFeature"),e.isCreatingOnDrag=function(t){return t.hasFeature(e.creatingOnDragFeature)&&void 0!==t.createAction}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=n(1),i=n(13),a=n(48),s=n(51),u=n(6),c=n(116),d=n(34),l=n(78),f=n(117),p=n(53),h=n(80);e.edgeEditModule=new o.ContainerModule((function(t,e,n){var o={bind:t,isBound:n};i.configureCommand(o,p.SwitchEditModeCommand),i.configureCommand(o,h.ReconnectCommand),i.configureCommand(o,d.DeleteElementCommand),s.configureModelElement(o,"dangling-anchor",u.SDanglingAnchor,c.EmptyGroupView)})),e.labelEditModule=new o.ContainerModule((function(t,e,n){t(r.TYPES.MouseListener).to(l.EditLabelMouseListener),t(r.TYPES.KeyListener).to(l.EditLabelKeyListener),i.configureCommand({bind:t,isBound:n},l.ApplyLabelEditCommand)})),e.labelEditUiModule=new o.ContainerModule((function(t,e,n){var o={bind:t,isBound:n};a.configureActionHandler(o,l.EditLabelAction.KIND,f.EditLabelActionHandler),t(f.EditLabelUI).toSelf().inSingletonScope(),t(r.TYPES.IUIExtension).toService(f.EditLabelUI)}))},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var a=n(22),s=n(36),u=n(52),c=n(3),d=n(0),l=function(){function t(){}return t.prototype.render=function(t,e){var n="scale("+t.zoom+") translate("+-t.scroll.x+","+-t.scroll.y+")";return a.svg("svg",null,a.svg("g",{transform:n},e.renderChildren(t)))},t=i([d.injectable()],t)}();e.SvgViewportView=l;var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.render=function(t,e){if(this.isVisible(t,e)){var n=this.getRadius(t);return a.svg("g",null,a.svg("circle",{"class-sprotty-node":t instanceof s.SNode,"class-sprotty-port":t instanceof s.SPort,"class-mouseover":t.hoverFeedback,"class-selected":t.selected,r:n,cx:n,cy:n}),e.renderChildren(t))}},e.prototype.getRadius=function(t){var e=Math.min(t.size.width,t.size.height);return e>0?e/2:0},e=i([d.injectable()],e)}(u.ShapeView);e.CircularNodeView=f;var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.render=function(t,e){if(this.isVisible(t,e))return a.svg("g",null,a.svg("rect",{"class-sprotty-node":t instanceof s.SNode,"class-sprotty-port":t instanceof s.SPort,"class-mouseover":t.hoverFeedback,"class-selected":t.selected,x:"0",y:"0",width:Math.max(t.size.width,0),height:Math.max(t.size.height,0)}),e.renderChildren(t))},e=i([d.injectable()],e)}(u.ShapeView);e.RectangularNodeView=p;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.render=function(t,e){if(this.isVisible(t,e)){var n=new c.Diamond({height:Math.max(t.size.height,0),width:Math.max(t.size.width,0),x:0,y:0}),o=y(n.topPoint)+" "+y(n.rightPoint)+" "+y(n.bottomPoint)+" "+y(n.leftPoint);return a.svg("g",null,a.svg("polygon",{"class-sprotty-node":t instanceof s.SNode,"class-sprotty-port":t instanceof s.SPort,"class-mouseover":t.hoverFeedback,"class-selected":t.selected,points:o}),e.renderChildren(t))}},e=i([d.injectable()],e)}(u.ShapeView);function y(t){return t.x+","+t.y}e.DiamondNodeView=h;var g=function(){function t(){}return t.prototype.render=function(t,e){return a.svg("g",null)},t=i([d.injectable()],t)}();e.EmptyGroupView=g},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function a(t){try{u(o.next(t))}catch(t){i(t)}}function s(t){try{u(o.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((o=o.apply(t,e||[])).next())}))},u=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},c=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,r++)o[r]=i[a];return o};Object.defineProperty(e,"__esModule",{value:!0});var d=n(0),l=n(1),f=n(65),p=n(50),h=n(40),y=n(56),g=n(21),v=n(4),m=n(79),b=n(78),_=n(44),w=function(){function t(){}return t.prototype.handle=function(t){if(b.isEditLabelAction(t))return new p.SetUIExtensionVisibilityAction(S.ID,!0,[t.labelId])},t=i([d.injectable()],t)}();e.EditLabelActionHandler=w;var S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.validationTimeout=void 0,e.isActive=!1,e.blockApplyEditOnInvalidInput=!0,e.isCurrentLabelValid=!0,e}var n;return r(e,t),n=e,e.prototype.id=function(){return n.ID},e.prototype.containerClass=function(){return"label-edit"},Object.defineProperty(e.prototype,"labelId",{get:function(){return this.label?this.label.id:"unknown"},enumerable:!0,configurable:!0}),e.prototype.initializeContents=function(t){var e=this;t.style.position="absolute",this.inputElement=document.createElement("input"),this.textAreaElement=document.createElement("textarea"),[this.inputElement,this.textAreaElement].forEach((function(n){n.onkeydown=function(t){return e.applyLabelEditOnEvent(t,"Enter")},e.configureAndAdd(n,t)}))},e.prototype.configureAndAdd=function(t,e){var n=this;t.style.visibility="hidden",t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.addEventListener("keydown",(function(t){return n.hideIfEscapeEvent(t)})),t.addEventListener("keyup",(function(e){return n.validateLabelIfContentChange(e,t.value)})),t.addEventListener("blur",(function(){return window.setTimeout((function(){return n.applyLabelEdit()}),200)})),e.appendChild(t)},Object.defineProperty(e.prototype,"editControl",{get:function(){return this.label&&this.label.isMultiLine?this.textAreaElement:this.inputElement},enumerable:!0,configurable:!0}),e.prototype.hideIfEscapeEvent=function(t){g.matchesKeystroke(t,"Escape")&&this.hide()},e.prototype.applyLabelEditOnEvent=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];g.matchesKeystroke.apply(void 0,c([t,e||"Enter"],n))&&(t.preventDefault(),this.applyLabelEdit())},e.prototype.validateLabelIfContentChange=function(t,e){void 0!==this.previousLabelContent&&this.previousLabelContent===e||(this.previousLabelContent=e,this.performLabelValidation(t,this.editControl.value))},e.prototype.applyLabelEdit=function(){return s(this,void 0,void 0,(function(){var t=this;return u(this,(function(e){switch(e.label){case 0:return this.isActive?this.blockApplyEditOnInvalidInput?[4,this.validateLabel(this.editControl.value)]:[3,2]:[2];case 1:if("error"===e.sent().severity)return this.editControl.focus(),[2];e.label=2;case 2:return this.actionDispatcherProvider().then((function(e){return e.dispatchAll([new b.ApplyLabelEditAction(t.labelId,t.editControl.value),new y.CommitModelAction])})).catch((function(e){return t.logger.error(t,"No action dispatcher available to execute apply label edit action",e)})),this.hide(),[2]}}))}))},e.prototype.performLabelValidation=function(t,e){var n=this;this.validationTimeout&&window.clearTimeout(this.validationTimeout),this.validationTimeout=window.setTimeout((function(){return n.validateLabel(e)}),200)},e.prototype.validateLabel=function(t){return s(this,void 0,void 0,(function(){var e,n;return u(this,(function(o){switch(o.label){case 0:if(!this.labelValidator||!this.label)return[3,4];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.labelValidator.validate(t,this.label)];case 2:return e=o.sent(),this.isCurrentLabelValid="error"!==e.severity,this.showValidationResult(e),[2,e];case 3:return n=o.sent(),this.logger.error(this,"Error validating edited label",n),[3,4];case 4:return this.isCurrentLabelValid=!0,[2,{severity:"ok",message:void 0}]}}))}))},e.prototype.showValidationResult=function(t){this.clearValidationResult(),this.validationDecorator&&this.validationDecorator.decorate(this.editControl,t)},e.prototype.clearValidationResult=function(){this.validationDecorator&&this.validationDecorator.dispose(this.editControl)},e.prototype.show=function(e){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];P(n,e)&&!this.isActive&&(t.prototype.show.apply(this,c([e],n)),this.isActive=!0)},e.prototype.hide=function(){this.editControl.style.visibility="hidden",t.prototype.hide.call(this),this.clearValidationResult(),this.isActive=!1,this.isCurrentLabelValid=!0,this.previousLabelContent=void 0,this.labelElement&&(this.labelElement.style.visibility="visible")},e.prototype.onBeforeShow=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];this.label=O(n,e)[0],this.previousLabelContent=this.label.text,this.setPosition(t),this.applyTextContents(),this.applyFontStyling(),this.editControl.style.visibility="visible",this.editControl.focus()},e.prototype.setPosition=function(t){var e=0,n=0,o=100,r=20;if(this.label){var i=m.getZoom(this.label),a=v.getAbsoluteClientBounds(this.label,this.domHelper,this.viewerOptions);e=a.x+(this.label.editControlPositionCorrection?this.label.editControlPositionCorrection.x:0)*i,n=a.y+(this.label.editControlPositionCorrection?this.label.editControlPositionCorrection.y:0)*i,r=(this.label.editControlDimension?this.label.editControlDimension.height:r)*i,o=(this.label.editControlDimension?this.label.editControlDimension.width:o)*i}t.style.left=e+"px",t.style.top=n+"px",t.style.width=o+"px",this.editControl.style.width=o+"px",t.style.height=r+"px",this.editControl.style.height=r+"px"},e.prototype.applyTextContents=function(){this.label&&(this.editControl.value=this.label.text,this.editControl instanceof HTMLTextAreaElement?(this.editControl.selectionStart=0,this.editControl.selectionEnd=0,this.editControl.scrollTop=0,this.editControl.scrollLeft=0):this.editControl.setSelectionRange(0,this.editControl.value.length))},e.prototype.applyFontStyling=function(){if(this.label&&(this.labelElement=document.getElementById(this.domHelper.createUniqueDOMElementId(this.label)),this.labelElement)){this.labelElement.style.visibility="hidden";var t=window.getComputedStyle(this.labelElement);this.editControl.style.font=t.font,this.editControl.style.fontStyle=t.fontStyle,this.editControl.style.fontFamily=t.fontFamily,this.editControl.style.fontSize=(e=t.fontSize,n=m.getZoom(this.label),e.replace(/([0-9]+)/,(function(t){return String(Number.parseInt(t,10)*n)}))),this.editControl.style.fontWeight=t.fontWeight,this.editControl.style.lineHeight=t.lineHeight}var e,n},e.ID="editLabelUi",i([d.inject(l.TYPES.IActionDispatcherProvider),a("design:type",Function)],e.prototype,"actionDispatcherProvider",void 0),i([d.inject(l.TYPES.ViewerOptions),a("design:type",Object)],e.prototype,"viewerOptions",void 0),i([d.inject(l.TYPES.DOMHelper),a("design:type",h.DOMHelper)],e.prototype,"domHelper",void 0),i([d.inject(l.TYPES.IEditLabelValidator),d.optional(),a("design:type",Object)],e.prototype,"labelValidator",void 0),i([d.inject(l.TYPES.IEditLabelValidationDecorator),d.optional(),a("design:type",Object)],e.prototype,"validationDecorator",void 0),e=n=i([d.injectable()],e)}(f.AbstractUIExtension);function P(t,e){return 1===O(t,e).length}function O(t,e){return t.map((function(t){return e.index.getById(t)})).filter(_.isEditableLabel)}e.EditLabelUI=S},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(0),c=n(5),d=n(11),l=n(12),f=n(2),p=n(17),h=n(21),y=n(77),g=n(37),v=n(24),m=n(35),b=n(1),_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.keyDown=function(t,e){return h.matchesKeystroke(e,"KeyE","ctrlCmd","shift")?[new w]:[]},e=i([u.injectable()],e)}(p.KeyListener);e.ExportSvgKeyListener=_;var w=function(){function t(e){void 0===e&&(e=""),this.requestId=e,this.kind=t.KIND}return t.create=function(){return new t(l.generateRequestId())},t.KIND="requestExportSvg",t}();e.RequestExportSvgAction=w;var S=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n}return r(e,t),e.prototype.execute=function(t){if(y.isExportable(t.root)){var e=t.modelFactory.createRoot(t.root);if(y.isExportable(e))return v.isViewport(e)&&(e.zoom=1,e.scroll={x:0,y:0}),e.index.all().forEach((function(t){d.isSelectable(t)&&t.selected&&(t.selected=!1),m.isHoverable(t)&&t.hoverFeedback&&(t.hoverFeedback=!1)})),{model:e,modelChanged:!0,cause:this.action}}return{model:t.root,modelChanged:!1}},e.KIND=w.KIND,e=i([s(0,u.inject(b.TYPES.Action)),a("design:paramtypes",[w])],e)}(c.HiddenCommand);e.ExportSvgCommand=S;var P=function(){function t(){}return t.prototype.decorate=function(t,e){return e instanceof f.SModelRoot&&(this.root=e),t},t.prototype.postUpdate=function(t){this.root&&void 0!==t&&t.kind===w.KIND&&this.svgExporter.export(this.root,t)},i([u.inject(b.TYPES.SvgExporter),a("design:type",g.SvgExporter)],t.prototype,"svgExporter",void 0),t=i([u.injectable()],t)}();e.ExportSvgPostprocessor=P},function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var r=n(22),i=n(9),a=n(0),s=function(){function t(){}return t.prototype.render=function(t,e){var n=this.getMaxSeverity(t),o=r.svg("g",{"class-sprotty-issue":!0},r.svg("g",{transform:"scale("+16/1792+", "+16/1792+")"},r.svg("path",{d:this.getPath(n)})));return i.setClass(o,"sprotty-"+n,!0),o},t.prototype.getMaxSeverity=function(t){for(var e="info",n=0,o=t.issues.map((function(t){return t.severity}));n<o.length;n++){var r=o[n];("error"===r||"warning"===r&&"info"===e)&&(e=r)}return e},t.prototype.getPath=function(t){switch(t){case"error":case"warning":return"M768 128q209 0 385.5 103t279.5 279.5 103 385.5-103 385.5-279.5 279.5-385.5 103-385.5-103-279.5-279.5-103-385.5 103-385.5 279.5-279.5 385.5-103zm128 1247v-190q0-14-9-23.5t-22-9.5h-192q-13 0-23 10t-10 23v190q0 13 10 23t23 10h192q13 0 22-9.5t9-23.5zm-2-344l18-621q0-12-10-18-10-8-24-8h-220q-14 0-24 8-10 6-10 18l17 621q0 10 10 17.5t24 7.5h185q14 0 23.5-7.5t10.5-17.5z";case"info":return"M1024 1376v-160q0-14-9-23t-23-9h-96v-512q0-14-9-23t-23-9h-320q-14 0-23 9t-9 23v160q0 14 9 23t23 9h96v320h-96q-14 0-23 9t-9 23v160q0 14 9 23t23 9h448q14 0 23-9t9-23zm-128-896v-160q0-14-9-23t-23-9h-192q-14 0-23 9t-9 23v160q0 14 9 23t23 9h192q14 0 23-9t9-23zm640 416q0 209-103 385.5t-279.5 279.5-385.5 103-385.5-103-279.5-279.5-103-385.5 103-385.5 279.5-279.5 385.5-103 385.5 103 279.5 279.5 103 385.5z"}},t=o([a.injectable()],t)}();e.IssueMarkerView=s},function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),a=n(2),s=n(84),u=n(9),c=n(3),d=n(4),l=n(6),f=n(23),p=function(){function t(){}return t.prototype.decorate=function(t,e){if(s.isDecoration(e)){var n=this.getPosition(e),o="translate("+n.x+", "+n.y+")";u.setAttr(t,"transform",o)}return t},t.prototype.getPosition=function(t){if(t instanceof a.SChildElement&&t.parent instanceof l.SRoutableElement){var e=this.edgeRouterRegistry.get(t.parent.routerKind).route(t.parent);if(e.length>1){var n=Math.floor(.5*(e.length-1)),o=d.isSizeable(t)?{x:-.5*t.bounds.width,y:-.5*t.bounds.width}:c.ORIGIN_POINT;return{x:.5*(e[n].x+e[n+1].x)+o.x,y:.5*(e[n].y+e[n+1].y)+o.y}}}return d.isSizeable(t)?{x:-.666*t.bounds.width,y:-.666*t.bounds.height}:c.ORIGIN_POINT},t.prototype.postUpdate=function(){},o([i.inject(f.EdgeRouterRegistry),r("design:type",f.EdgeRouterRegistry)],t.prototype,"edgeRouterRegistry",void 0),t=o([i.injectable()],t)}();e.DecorationPlacer=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.openFeature=Symbol("openFeature"),e.isOpenable=function(t){return t.hasFeature(e.openFeature)}},function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i=n(29),a=n(86),s=n(0),u=function(){function t(){}var e;return e=t,Object.defineProperty(t.prototype,"kind",{get:function(){return e.KIND},enumerable:!0,configurable:!0}),t.prototype.getAnchor=function(t,e,n){var o=t.bounds;if(o.width<=0||o.height<=0)return o;var i={x:o.x-n,y:o.y-n,width:o.width+2*n,height:o.height+2*n};return e.x>=i.x&&i.x+i.width>=e.x?e.y<i.y+.5*i.height?{x:e.x,y:i.y}:{x:e.x,y:i.y+i.height}:e.y>=i.y&&i.y+i.height>=e.y?e.x<i.x+.5*i.width?{x:i.x,y:e.y}:{x:i.x+i.width,y:e.y}:r.center(i)},t.KIND=a.ManhattanEdgeRouter.KIND+":"+i.RECTANGULAR_ANCHOR_KIND,t=e=o([s.injectable()],t)}();e.ManhattanRectangularAnchor=u;var c=function(){function t(){}var e;return e=t,Object.defineProperty(t.prototype,"kind",{get:function(){return e.KIND},enumerable:!0,configurable:!0}),t.prototype.getAnchor=function(t,e,n){void 0===n&&(n=0);var o=t.bounds;if(o.width<=0||o.height<=0)return o;var i={x:o.x-n,y:o.y-n,width:o.width+2*n,height:o.height+2*n},a=r.center(i),s=void 0,u=void 0;return e.x>=i.x&&e.x<=i.x+i.width?i.x+.5*i.width>=e.x?(u=new r.PointToPointLine(e,{x:e.x,y:a.y}),s=e.y<a.y?new r.PointToPointLine({x:i.x,y:a.y},{x:a.x,y:i.y}):new r.PointToPointLine({x:i.x,y:a.y},{x:a.x,y:i.y+i.height})):(u=new r.PointToPointLine(e,{x:e.x,y:a.y}),s=e.y<a.y?new r.PointToPointLine({x:i.x+i.width,y:a.y},{x:a.x,y:i.y}):new r.PointToPointLine({x:i.x+i.width,y:a.y},{x:a.x,y:i.y+i.height})):e.y>=i.y&&e.y<=i.y+i.height&&(i.y+.5*i.height>=e.y?(u=new r.PointToPointLine(e,{x:a.x,y:e.y}),s=e.x<a.x?new r.PointToPointLine({x:i.x,y:a.y},{x:a.x,y:i.y}):new r.PointToPointLine({x:i.x+i.width,y:a.y},{x:a.x,y:i.y})):(u=new r.PointToPointLine(e,{x:a.x,y:e.y}),s=e.x<a.x?new r.PointToPointLine({x:i.x,y:a.y},{x:a.x,y:i.y+i.height}):new r.PointToPointLine({x:i.x+i.width,y:a.y},{x:a.x,y:i.y+i.height}))),u&&s?r.intersection(s,u):a},t.KIND=a.ManhattanEdgeRouter.KIND+":"+i.DIAMOND_ANCHOR_KIND,t=e=o([s.injectable()],t)}();e.ManhattanDiamondAnchor=c;var d=function(){function t(){}var e;return e=t,Object.defineProperty(t.prototype,"kind",{get:function(){return e.KIND},enumerable:!0,configurable:!0}),t.prototype.getAnchor=function(t,e,n){void 0===n&&(n=0);var o=t.bounds;if(o.width<=0||o.height<=0)return o;var i={x:o.x-n,y:o.y-n,width:o.width+2*n,height:o.height+2*n},a=r.center(i),s=r.subtract(e,a),u=a.x,c=a.y;if(e.x>=i.x&&i.x+i.width>=e.x){u+=s.x;var d=.5*i.height*Math.sqrt(1-s.x*s.x/(.25*i.width*i.width));s.y<0?c-=d:c+=d}else if(e.y>=i.y&&i.y+i.height>=e.y){c+=s.y;var l=.5*i.width*Math.sqrt(1-s.y*s.y/(.25*i.height*i.height));s.x<0?u-=l:u+=l}return{x:u,y:c}},t.KIND=a.ManhattanEdgeRouter.KIND+":"+i.ELLIPTIC_ANCHOR_KIND,t=e=o([s.injectable()],t)}();e.ManhattanEllipticAnchor=d},function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var r=n(29),i=n(3),a=n(0),s=n(54),u=function(){function t(){}return Object.defineProperty(t.prototype,"kind",{get:function(){return s.PolylineEdgeRouter.KIND+":"+r.ELLIPTIC_ANCHOR_KIND},enumerable:!0,configurable:!0}),t.prototype.getAnchor=function(t,e,n){void 0===n&&(n=0);var o=t.bounds,r=i.center(o),a=r.x-e.x,s=r.y-e.y,u=Math.sqrt(a*a+s*s),c=a/u||0,d=s/u||0;return{x:r.x-c*(.5*o.width+n),y:r.y-d*(.5*o.height+n)}},t=o([a.injectable()],t)}();e.EllipseAnchor=u;var c=function(){function t(){}return Object.defineProperty(t.prototype,"kind",{get:function(){return s.PolylineEdgeRouter.KIND+":"+r.RECTANGULAR_ANCHOR_KIND},enumerable:!0,configurable:!0}),t.prototype.getAnchor=function(t,e,n){void 0===n&&(n=0);var o=t.bounds,r=i.center(o),a=new d(r,e);if(!i.almostEquals(r.y,e.y)){var s=this.getXIntersection(o.y,r,e);s>=o.x&&s<=o.x+o.width&&a.addCandidate(s,o.y-n);var u=this.getXIntersection(o.y+o.height,r,e);u>=o.x&&u<=o.x+o.width&&a.addCandidate(u,o.y+o.height+n)}if(!i.almostEquals(r.x,e.x)){var c=this.getYIntersection(o.x,r,e);c>=o.y&&c<=o.y+o.height&&a.addCandidate(o.x-n,c);var l=this.getYIntersection(o.x+o.width,r,e);l>=o.y&&l<=o.y+o.height&&a.addCandidate(o.x+o.width+n,l)}return a.best},t.prototype.getXIntersection=function(t,e,n){var o=(t-e.y)/(n.y-e.y);return(n.x-e.x)*o+e.x},t.prototype.getYIntersection=function(t,e,n){var o=(t-e.x)/(n.x-e.x);return(n.y-e.y)*o+e.y},t=o([a.injectable()],t)}();e.RectangleAnchor=c;var d=function(){function t(t,e){this.centerPoint=t,this.refPoint=e,this.currentDist=-1}return t.prototype.addCandidate=function(t,e){var n=this.refPoint.x-t,o=this.refPoint.y-e,r=n*n+o*o;(this.currentDist<0||r<this.currentDist)&&(this.currentBest={x:t,y:e},this.currentDist=r)},Object.defineProperty(t.prototype,"best",{get:function(){return void 0===this.currentBest?this.centerPoint:this.currentBest},enumerable:!0,configurable:!0}),t}(),l=function(){function t(){}return Object.defineProperty(t.prototype,"kind",{get:function(){return s.PolylineEdgeRouter.KIND+":"+r.DIAMOND_ANCHOR_KIND},enumerable:!0,configurable:!0}),t.prototype.getAnchor=function(t,e,n){var o=t.bounds,r=new i.PointToPointLine(i.center(o),e),a=new i.Diamond(o).closestSideLine(e),s=i.intersection(a,r);return i.shiftTowards(s,e,n)},t=o([a.injectable()],t)}();e.DiamondAnchor=l},function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(6),a=function(){function t(){}return t.prototype.isVisible=function(t,e,n){if("hidden"===n.targetKind)return!0;if(0===e.length)return!0;var o=i.getAbsoluteRouteBounds(t,e),r=t.root.canvasBounds;return o.x<=r.width&&o.x+o.width>=0&&o.y<=r.height&&o.y+o.height>=0},t=o([r.injectable()],t)}();e.RoutableView=a},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),a=n(16),s=n(8),u=n(30),c=n(24),d=n(28),l=n(6);e.isScrollable=function(t){return"scroll"in t};var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.mouseDown=function(t,e){if(void 0===s.findParentByFeature(t,d.isMoveable)&&!(t instanceof l.SRoutingHandle)){var n=s.findParentByFeature(t,c.isViewport);this.lastScrollPosition=n?{x:e.pageX,y:e.pageY}:void 0}return[]},e.prototype.mouseMove=function(t,e){if(0===e.buttons)this.mouseUp(t,e);else if(this.lastScrollPosition){var n=s.findParentByFeature(t,c.isViewport);if(n){var o=(e.pageX-this.lastScrollPosition.x)/n.zoom,r=(e.pageY-this.lastScrollPosition.y)/n.zoom,i={scroll:{x:n.scroll.x-o,y:n.scroll.y-r},zoom:n.zoom};return this.lastScrollPosition={x:e.pageX,y:e.pageY},[new u.SetViewportAction(n.id,i,!1)]}}return[]},e.prototype.mouseEnter=function(t,e){return t instanceof i.SModelRoot&&0===e.buttons&&this.mouseUp(t,e),[]},e.prototype.mouseUp=function(t,e){return this.lastScrollPosition=void 0,[]},e}(a.MouseListener);e.ScrollMouseListener=f},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n(19),u=n(2),c=n(8),d=n(36),l=n(70),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.defaultGraphFeatures=s.createFeatureSet(d.SGraph.DEFAULT_FEATURES),e.defaultNodeFeatures=s.createFeatureSet(d.SNode.DEFAULT_FEATURES),e.defaultPortFeatures=s.createFeatureSet(d.SPort.DEFAULT_FEATURES),e.defaultEdgeFeatures=s.createFeatureSet(d.SEdge.DEFAULT_FEATURES),e.defaultLabelFeatures=s.createFeatureSet(d.SLabel.DEFAULT_FEATURES),e.defaultCompartmentFeatures=s.createFeatureSet(d.SCompartment.DEFAULT_FEATURES),e.defaultButtonFeatures=s.createFeatureSet(l.SButton.DEFAULT_FEATURES),e}return r(e,t),e.prototype.createElement=function(t,e){var n;if(this.registry.hasKey(t.type)){var o=this.registry.get(t.type,void 0);if(!(o instanceof u.SChildElement))throw new Error("Element with type "+t.type+" was expected to be an SChildElement.");n=o}else this.isNodeSchema(t)?(n=new d.SNode).features=this.defaultNodeFeatures:this.isPortSchema(t)?(n=new d.SPort).features=this.defaultPortFeatures:this.isEdgeSchema(t)?(n=new d.SEdge).features=this.defaultEdgeFeatures:this.isLabelSchema(t)?(n=new d.SLabel).features=this.defaultLabelFeatures:this.isCompartmentSchema(t)?(n=new d.SCompartment).features=this.defaultCompartmentFeatures:this.isButtonSchema(t)?(n=new l.SButton).features=this.defaultButtonFeatures:n=new u.SChildElement;return this.initializeChild(n,t,e)},e.prototype.createRoot=function(t){var e;if(this.registry.hasKey(t.type)){var n=this.registry.get(t.type,void 0);if(!(n instanceof u.SModelRoot))throw new Error("Element with type "+t.type+" was expected to be an SModelRoot.");e=n}else this.isGraphSchema(t)?(e=new d.SGraph).features=this.defaultGraphFeatures:e=new u.SModelRoot;return this.initializeRoot(e,t)},e.prototype.isGraphSchema=function(t){return"graph"===c.getBasicType(t)},e.prototype.isNodeSchema=function(t){return"node"===c.getBasicType(t)},e.prototype.isPortSchema=function(t){return"port"===c.getBasicType(t)},e.prototype.isEdgeSchema=function(t){return"edge"===c.getBasicType(t)},e.prototype.isLabelSchema=function(t){return"label"===c.getBasicType(t)},e.prototype.isCompartmentSchema=function(t){return"comp"===c.getBasicType(t)},e.prototype.isButtonSchema=function(t){return"button"===c.getBasicType(t)},e=i([a.injectable()],e)}(s.SModelFactory);e.SGraphFactory=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=n(1),i=n(41),a=n(105),s=n(67),u=n(13),c=new o.ContainerModule((function(t,e,n){u.configureCommand({bind:t,isBound:n},i.SetBoundsCommand),u.configureCommand({bind:t,isBound:n},i.RequestBoundsCommand),t(a.HiddenBoundsUpdater).toSelf().inSingletonScope(),t(r.TYPES.HiddenVNodePostprocessor).toService(a.HiddenBoundsUpdater),t(r.TYPES.Layouter).to(s.Layouter).inSingletonScope(),t(r.TYPES.LayoutRegistry).to(s.LayoutRegistry).inSingletonScope()}));e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=n(69),i=new o.ContainerModule((function(t){t(r.ButtonHandlerRegistry).toSelf().inSingletonScope()}));e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=n(1),i=n(71),a=n(111),s=new o.ContainerModule((function(t){t(a.CommandPalette).toSelf().inSingletonScope(),t(r.TYPES.IUIExtension).toService(a.CommandPalette),t(r.TYPES.KeyListener).to(a.CommandPaletteKeyListener),t(i.CommandPaletteActionProviderRegistry).toSelf().inSingletonScope(),t(r.TYPES.ICommandPaletteActionProviderRegistry).toService(i.CommandPaletteActionProviderRegistry)}));e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=n(74),i=n(112),a=n(1),s=new o.ContainerModule((function(t){t(a.TYPES.IContextMenuServiceProvider).toProvider((function(t){return function(){return new Promise((function(e,n){t.container.isBound(a.TYPES.IContextMenuService)?e(t.container.get(a.TYPES.IContextMenuService)):n()}))}})),t(a.TYPES.MouseListener).to(i.ContextMenuMouseListener),t(a.TYPES.IContextMenuProviderRegistry).to(r.ContextMenuProviderRegistry)}));e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(51),r=n(0),i=n(84),a=n(119),s=n(1),u=n(120),c=new r.ContainerModule((function(t,e,n){o.configureModelElement({bind:t,isBound:n},"marker",i.SIssueMarker,a.IssueMarkerView),t(u.DecorationPlacer).toSelf().inSingletonScope(),t(s.TYPES.IVNodePostprocessor).toService(u.DecorationPlacer)}));e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=n(1),i=n(81),a=new o.ContainerModule((function(t){t(r.TYPES.IButtonHandler).toConstructor(i.ExpandButtonHandler)}));e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=n(1),i=n(118),a=n(37),s=n(13),u=new o.ContainerModule((function(t,e,n){t(r.TYPES.KeyListener).to(i.ExportSvgKeyListener).inSingletonScope(),t(r.TYPES.HiddenVNodePostprocessor).to(i.ExportSvgPostprocessor).inSingletonScope(),s.configureCommand({bind:t,isBound:n},i.ExportSvgCommand),t(r.TYPES.SvgExporter).to(a.SvgExporter).inSingletonScope()}));e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=n(1),i=n(83),a=new o.ContainerModule((function(t){t(r.TYPES.IVNodePostprocessor).to(i.ElementFader).inSingletonScope()}));e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=n(1),i=n(57),a=n(196),s=n(13),u=n(48),c=n(55),d=n(30),l=n(58),f=new o.ContainerModule((function(t,e,n){t(r.TYPES.PopupVNodePostprocessor).to(a.PopupPositionUpdater).inSingletonScope(),t(r.TYPES.MouseListener).to(i.HoverMouseListener),t(r.TYPES.PopupMouseListener).to(i.PopupHoverMouseListener),t(r.TYPES.KeyListener).to(i.HoverKeyListener),t(r.TYPES.HoverState).toConstantValue({mouseOverTimer:void 0,mouseOutTimer:void 0,popupOpen:!1,previousPopupElement:void 0}),t(i.ClosePopupActionHandler).toSelf().inSingletonScope();var o={bind:t,isBound:n};s.configureCommand(o,i.HoverFeedbackCommand),s.configureCommand(o,i.SetPopupModelCommand),u.configureActionHandler(o,i.SetPopupModelCommand.KIND,i.ClosePopupActionHandler),u.configureActionHandler(o,c.FitToScreenCommand.KIND,i.ClosePopupActionHandler),u.configureActionHandler(o,c.CenterCommand.KIND,i.ClosePopupActionHandler),u.configureActionHandler(o,d.SetViewportCommand.KIND,i.ClosePopupActionHandler),u.configureActionHandler(o,l.MoveCommand.KIND,i.ClosePopupActionHandler)}));e.default=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=n(1),i=n(58),a=n(13),s=new o.ContainerModule((function(t,e,n){t(r.TYPES.MouseListener).to(i.MoveMouseListener),a.configureCommand({bind:t,isBound:n},i.MoveCommand),t(i.LocationPostprocessor).toSelf().inSingletonScope(),t(r.TYPES.IVNodePostprocessor).toService(i.LocationPostprocessor),t(r.TYPES.HiddenVNodePostprocessor).toService(i.LocationPostprocessor)}));e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=n(1),i=n(85),a=new o.ContainerModule((function(t){t(r.TYPES.MouseListener).to(i.OpenMouseListener)}));e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=n(1),i=n(86),a=n(54),s=n(122),u=n(123),c=n(29),d=n(23),l=new o.ContainerModule((function(t){t(d.EdgeRouterRegistry).toSelf().inSingletonScope(),t(c.AnchorComputerRegistry).toSelf().inSingletonScope(),t(i.ManhattanEdgeRouter).toSelf().inSingletonScope(),t(r.TYPES.IEdgeRouter).toService(i.ManhattanEdgeRouter),t(r.TYPES.IAnchorComputer).to(s.ManhattanEllipticAnchor).inSingletonScope(),t(r.TYPES.IAnchorComputer).to(s.ManhattanRectangularAnchor).inSingletonScope(),t(r.TYPES.IAnchorComputer).to(s.ManhattanDiamondAnchor).inSingletonScope(),t(a.PolylineEdgeRouter).toSelf().inSingletonScope(),t(r.TYPES.IEdgeRouter).toService(a.PolylineEdgeRouter),t(r.TYPES.IAnchorComputer).to(u.EllipseAnchor),t(r.TYPES.IAnchorComputer).to(u.RectangleAnchor),t(r.TYPES.IAnchorComputer).to(u.DiamondAnchor)}));e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=n(1),i=n(43),a=n(13),s=new o.ContainerModule((function(t,e,n){a.configureCommand({bind:t,isBound:n},i.SelectCommand),a.configureCommand({bind:t,isBound:n},i.SelectAllCommand),a.configureCommand({bind:t,isBound:n},i.GetSelectionCommand),t(r.TYPES.KeyListener).to(i.SelectKeyboardListener),t(r.TYPES.MouseListener).to(i.SelectMouseListener)}));e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=n(1),i=n(63),a=new o.ContainerModule((function(t){t(r.TYPES.KeyListener).to(i.UndoRedoKeyListener)}));e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=n(13),i=n(59),a=new o.ContainerModule((function(t,e,n){r.configureCommand({bind:t,isBound:n},i.UpdateModelCommand)}));e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=n(1),i=n(55),a=n(30),s=n(125),u=n(79),c=n(13),d=new o.ContainerModule((function(t,e,n){c.configureCommand({bind:t,isBound:n},i.CenterCommand),c.configureCommand({bind:t,isBound:n},i.FitToScreenCommand),c.configureCommand({bind:t,isBound:n},a.SetViewportCommand),c.configureCommand({bind:t,isBound:n},a.GetViewportCommand),t(r.TYPES.KeyListener).to(i.CenterKeyboardListener),t(r.TYPES.MouseListener).to(s.ScrollMouseListener),t(r.TYPES.MouseListener).to(u.ZoomMouseListener)}));e.default=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=n(13),i=n(73),a=new o.ContainerModule((function(t,e,n){r.configureCommand({bind:t,isBound:n},i.BringToFrontCommand)}));e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=n(13),i=n(1),a=n(56),s=n(46),u=new o.ContainerModule((function(t,e,n){t(i.TYPES.ModelSourceProvider).toProvider((function(t){return function(){return new Promise((function(e){e(t.container.get(i.TYPES.ModelSource))}))}})),r.configureCommand({bind:t,isBound:n},a.CommitModelCommand),t(i.TYPES.IActionHandlerInitializer).toService(i.TYPES.ModelSource),t(s.ComputedBoundsApplicator).toSelf().inSingletonScope()}));e.default=u},function(t,e,n){"use strict";function o(t,e,n,o,r){return{sel:t,data:e,children:n,text:o,elm:r,key:void 0===e?void 0:e.key}}Object.defineProperty(e,"__esModule",{value:!0}),e.vnode=o,e.default=o},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),a=n(3),s=n(4),u=n(28),c=n(11),d=n(36),l=n(29),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),Object.defineProperty(e.prototype,"anchorKind",{get:function(){return l.ELLIPTIC_ANCHOR_KIND},enumerable:!0,configurable:!0}),e}(d.SNode);e.CircularNode=f;var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),Object.defineProperty(e.prototype,"anchorKind",{get:function(){return l.RECTANGULAR_ANCHOR_KIND},enumerable:!0,configurable:!0}),e}(d.SNode);e.RectangularNode=p;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),Object.defineProperty(e.prototype,"anchorKind",{get:function(){return l.DIAMOND_ANCHOR_KIND},enumerable:!0,configurable:!0}),e}(d.SNode);e.DiamondNode=h;var y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),Object.defineProperty(e.prototype,"anchorKind",{get:function(){return l.ELLIPTIC_ANCHOR_KIND},enumerable:!0,configurable:!0}),e}(d.SPort);e.CircularPort=y;var g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),Object.defineProperty(e.prototype,"anchorKind",{get:function(){return l.RECTANGULAR_ANCHOR_KIND},enumerable:!0,configurable:!0}),e}(d.SPort);e.RectangularPort=g;var v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.classes=[],e}return r(e,t),e}(i.SModelRoot);e.HtmlRoot=v;var m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e}(i.SChildElement);e.PreRenderedElement=m;var b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.position=a.ORIGIN_POINT,e.size=a.EMPTY_DIMENSION,e.selected=!1,e.alignment=a.ORIGIN_POINT,e}return r(e,t),Object.defineProperty(e.prototype,"bounds",{get:function(){return{x:this.position.x,y:this.position.y,width:this.size.width,height:this.size.height}},set:function(t){this.position={x:t.x,y:t.y},this.size={width:t.width,height:t.height}},enumerable:!0,configurable:!0}),e.DEFAULT_FEATURES=[u.moveFeature,s.boundsFeature,c.selectFeature,s.alignFeature],e}(m);e.ShapedPreRenderedElement=b;var _=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),Object.defineProperty(e.prototype,"bounds",{get:function(){return a.isValidDimension(this.size)?{x:this.position.x,y:this.position.y,width:this.size.width,height:this.size.height}:s.isBoundsAware(this.parent)?{x:this.position.x,y:this.position.y,width:this.parent.bounds.width,height:this.parent.bounds.height}:a.EMPTY_BOUNDS},enumerable:!0,configurable:!0}),e}(b);e.ForeignObjectElement=_},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},a=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var u=n(148),c=n(0),d=n(32),l=n(1),f=n(41),p=n(81),h=n(37),y=n(57),g=n(85),v=n(59),m=n(46);function b(t){return void 0!==t&&t.hasOwnProperty("action")}e.isActionMessage=b;var _=function(){function t(){this.kind=t.KIND}return t.KIND="serverStatus",t}();e.ServerStatusAction=_;var w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.currentRoot={type:"NONE",id:"ROOT"},e}return r(e,t),e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),e.register(f.ComputedBoundsAction.KIND,this),e.register(f.RequestBoundsCommand.KIND,this),e.register(y.RequestPopupModelAction.KIND,this),e.register(p.CollapseExpandAction.KIND,this),e.register(p.CollapseExpandAllAction.KIND,this),e.register(g.OpenAction.KIND,this),e.register(_.KIND,this),this.clientId||(this.clientId=this.viewerOptions.baseDiv)},e.prototype.handle=function(t){this.handleLocally(t)&&this.forwardToServer(t)},e.prototype.forwardToServer=function(t){var e={clientId:this.clientId,action:t};this.logger.log(this,"sending",e),this.sendMessage(e)},e.prototype.messageReceived=function(t){var e=this,n="string"==typeof t?JSON.parse(t):t;b(n)&&n.action?n.clientId&&n.clientId!==this.clientId||(n.action.__receivedFromServer=!0,this.logger.log(this,"receiving",n),this.actionDispatcher.dispatch(n.action).then((function(){e.storeNewModel(n.action)}))):this.logger.error(this,"received data is not an action message",n)},e.prototype.handleLocally=function(t){switch(this.storeNewModel(t),t.kind){case f.ComputedBoundsAction.KIND:return this.handleComputedBounds(t);case d.RequestModelAction.KIND:return this.handleRequestModel(t);case f.RequestBoundsCommand.KIND:return!1;case h.ExportSvgAction.KIND:return this.handleExportSvgAction(t);case _.KIND:return this.handleServerStateAction(t)}return!t.__receivedFromServer},e.prototype.storeNewModel=function(t){if(t.kind===d.SetModelCommand.KIND||t.kind===v.UpdateModelCommand.KIND||t.kind===f.RequestBoundsCommand.KIND){var e=t.newRoot;e&&(this.currentRoot=e,t.kind!==d.SetModelCommand.KIND&&t.kind!==v.UpdateModelCommand.KIND||(this.lastSubmittedModelType=e.type))}},e.prototype.handleRequestModel=function(t){var e=i({needsClientLayout:this.viewerOptions.needsClientLayout,needsServerLayout:this.viewerOptions.needsServerLayout},t.options),n=i(i({},t),{options:e});return this.forwardToServer(n),!1},e.prototype.handleComputedBounds=function(t){if(this.viewerOptions.needsServerLayout)return!0;var e=this.currentRoot;return this.computedBoundsApplicator.apply(e,t),e.type===this.lastSubmittedModelType?this.actionDispatcher.dispatch(new v.UpdateModelAction(e)):this.actionDispatcher.dispatch(new d.SetModelAction(e)),this.lastSubmittedModelType=e.type,!1},e.prototype.handleExportSvgAction=function(t){var e=new Blob([t.svg],{type:"text/plain;charset=utf-8"});return u.saveAs(e,"diagram.svg"),!1},e.prototype.handleServerStateAction=function(t){return!1},e.prototype.commitModel=function(t){var e=this.currentRoot;return this.currentRoot=t,e},a([c.inject(l.TYPES.ILogger),s("design:type",Object)],e.prototype,"logger",void 0),a([c.inject(m.ComputedBoundsApplicator),s("design:type",m.ComputedBoundsApplicator)],e.prototype,"computedBoundsApplicator",void 0),e=a([c.injectable()],e)}(m.ModelSource);e.DiagramServer=w},function(t,e,n){(function(n){var o,r,i;r=[],void 0===(i="function"==typeof(o=function(){"use strict";function e(t,e,n){var o=new XMLHttpRequest;o.open("GET",t),o.responseType="blob",o.onload=function(){a(o.response,e,n)},o.onerror=function(){console.error("could not download file")},o.send()}function o(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function r(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(n){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n&&n.global===n?n:void 0,a=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype?function(t,n,a){var s=i.URL||i.webkitURL,u=document.createElement("a");n=n||t.name||"download",u.download=n,u.rel="noopener","string"==typeof t?(u.href=t,u.origin===location.origin?r(u):o(u.href)?e(t,n,a):r(u,u.target="_blank")):(u.href=s.createObjectURL(t),setTimeout((function(){s.revokeObjectURL(u.href)}),4e4),setTimeout((function(){r(u)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,n,i){if(n=n||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,i),n);else if(o(t))e(t,n,i);else{var a=document.createElement("a");a.href=t,a.target="_blank",setTimeout((function(){r(a)}))}}:function(t,n,o,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof t)return e(t,n,o);var a="application/octet-stream"===t.type,s=/constructor/i.test(i.HTMLElement)||i.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||a&&s)&&"object"==typeof FileReader){var c=new FileReader;c.onloadend=function(){var t=c.result;t=u?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=t:location=t,r=null},c.readAsDataURL(t)}else{var d=i.URL||i.webkitURL,l=d.createObjectURL(t);r?r.location=l:location.href=l,r=null,setTimeout((function(){d.revokeObjectURL(l)}),4e4)}});i.saveAs=a.saveAs=a,t.exports=a})?o.apply(e,r):o)||(t.exports=i)}).call(this,n(88))},function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0}),e.SvgExporter=void 0;var i=n(14),a=n(14),s=n(14),u=n(14),c=n(0),d=function(){function t(){}return t.prototype.export=function(t){if("undefined"!=typeof document){var e=document.getElementById(this.options.baseDiv);if(null!==e&&e.firstElementChild&&"svg"===e.firstElementChild.tagName){var n=e.firstElementChild,o=this.createSvg(n);this.actionDispatcher.dispatch(new i.ExportSvgAction(o,t?t.requestId:""))}}},t.prototype.createSvg=function(t){var e=new XMLSerializer,n=e.serializeToString(t),o=document.createElement("iframe");if(document.body.appendChild(o),!o.contentWindow)throw new Error("IFrame has no contentWindow");var r=o.contentWindow.document;r.open(),r.write(n),r.close();var i=r.getElementById(t.id);i.removeAttribute("opacity"),this.copyStyles(t,i,["width","height","opacity"]),i.setAttribute("version","1.1");var a=u.EMPTY_BOUNDS,s=i.firstElementChild;s&&"g"===s.tagName&&(a=s.getBoundingClientRect()),i.setAttribute("viewBox",a.x-20+" "+(a.y-20)+" "+(a.width+40)+" "+(a.height+40)),i.removeAttribute("style");var c=e.serializeToString(i);return document.body.removeChild(o),c},t.prototype.copyStyles=function(t,e,n){for(var o=getComputedStyle(t),r=getComputedStyle(e),i="",a=0;a<o.length;a++){var s=o[a];if(-1===n.indexOf(s)){var u=o.getPropertyValue(s);r.getPropertyValue(s)!==u&&(i+=s+":"+u+";")}}""!==i&&e.setAttribute("style",i),e.removeAttribute("class"),e.removeAttribute("id");for(a=0;a<t.childNodes.length;++a){var c=t.childNodes[a],d=e.childNodes[a];c instanceof Element&&this.copyStyles(c,d,[])}},o([c.inject(s.TYPES.ViewerOptions),r("design:type",Object)],t.prototype,"options",void 0),o([c.inject(s.TYPES.IActionDispatcher),r("design:type",a.ActionDispatcher)],t.prototype,"actionDispatcher",void 0),o([c.inject(s.TYPES.ILogger),r("design:type",Object)],t.prototype,"log",void 0),t=o([c.injectable()],t)}();e.SvgExporter=d},function(t,e,n){"use strict";function o(t,e,n,o,r){return{sel:t,data:e,children:n,text:o,elm:r,key:void 0===e?void 0:e.key}}n.r(e),n.d(e,"h",(function(){return u})),n.d(e,"thunk",(function(){return f})),n.d(e,"init",(function(){return b}));var r=o,i=Array.isArray;function a(t){return"string"==typeof t||"number"==typeof t}var s={createElement:function(t){return document.createElement(t)},createElementNS:function(t,e){return document.createElementNS(t,e)},createTextNode:function(t){return document.createTextNode(t)},createComment:function(t){return document.createComment(t)},insertBefore:function(t,e,n){t.insertBefore(e,n)},removeChild:function(t,e){t.removeChild(e)},appendChild:function(t,e){t.appendChild(e)},parentNode:function(t){return t.parentNode},nextSibling:function(t){return t.nextSibling},tagName:function(t){return t.tagName},setTextContent:function(t,e){t.textContent=e},getTextContent:function(t){return t.textContent},isElement:function(t){return 1===t.nodeType},isText:function(t){return 3===t.nodeType},isComment:function(t){return 8===t.nodeType}};function u(t,e,n){var r,s,u,c={};if(void 0!==n?(c=e,i(n)?r=n:a(n)?s=n:n&&n.sel&&(r=[n])):void 0!==e&&(i(e)?r=e:a(e)?s=e:e&&e.sel?r=[e]:c=e),void 0!==r)for(u=0;u<r.length;++u)a(r[u])&&(r[u]=o(void 0,void 0,void 0,r[u],void 0));return"s"!==t[0]||"v"!==t[1]||"g"!==t[2]||3!==t.length&&"."!==t[3]&&"#"!==t[3]||function t(e,n,o){if(e.ns="http://www.w3.org/2000/svg","foreignObject"!==o&&void 0!==n)for(var r=0;r<n.length;++r){var i=n[r].data;void 0!==i&&t(i,n[r].children,n[r].sel)}}(c,r,t),o(t,c,r,s,void 0)}function c(t,e){e.elm=t.elm,t.data.fn=e.data.fn,t.data.args=e.data.args,e.data=t.data,e.children=t.children,e.text=t.text,e.elm=t.elm}function d(t){var e=t.data;c(e.fn.apply(void 0,e.args),t)}function l(t,e){var n,o=t.data,r=e.data,i=o.args,a=r.args;if(o.fn===r.fn&&i.length===a.length){for(n=0;n<a.length;++n)if(i[n]!==a[n])return void c(r.fn.apply(void 0,a),e);c(t,e)}else c(r.fn.apply(void 0,a),e)}var f=function(t,e,n,o){return void 0===o&&(o=n,n=e,e=void 0),u(t,{key:e,hook:{init:d,prepatch:l},fn:n,args:o})};function p(t){return void 0===t}function h(t){return void 0!==t}var y=r("",{},[],void 0,void 0);function g(t,e){return t.key===e.key&&t.sel===e.sel}function v(t,e,n){var o,r,i,a={};for(o=e;o<=n;++o)null!=(i=t[o])&&void 0!==(r=i.key)&&(a[r]=o);return a}var m=["create","update","remove","destroy","pre","post"];function b(t,e){var n,o,u={},c=void 0!==e?e:s;for(n=0;n<m.length;++n)for(u[m[n]]=[],o=0;o<t.length;++o){var d=t[o][m[n]];void 0!==d&&u[m[n]].push(d)}function l(t,e){return function(){if(0==--e){var n=c.parentNode(t);c.removeChild(n,t)}}}function f(t,e){var n,o=t.data;void 0!==o&&h(n=o.hook)&&h(n=n.init)&&(n(t),o=t.data);var r=t.children,s=t.sel;if("!"===s)p(t.text)&&(t.text=""),t.elm=c.createComment(t.text);else if(void 0!==s){var d=s.indexOf("#"),l=s.indexOf(".",d),g=d>0?d:s.length,v=l>0?l:s.length,m=-1!==d||-1!==l?s.slice(0,Math.min(g,v)):s,b=t.elm=h(o)&&h(n=o.ns)?c.createElementNS(n,m):c.createElement(m);for(g<v&&b.setAttribute("id",s.slice(g+1,v)),l>0&&b.setAttribute("class",s.slice(v+1).replace(/\./g," ")),n=0;n<u.create.length;++n)u.create[n](y,t);if(i(r))for(n=0;n<r.length;++n){var _=r[n];null!=_&&c.appendChild(b,f(_,e))}else a(t.text)&&c.appendChild(b,c.createTextNode(t.text));h(n=t.data.hook)&&(n.create&&n.create(y,t),n.insert&&e.push(t))}else t.elm=c.createTextNode(t.text);return t.elm}function b(t,e,n,o,r,i){for(;o<=r;++o){var a=n[o];null!=a&&c.insertBefore(t,f(a,i),e)}}function _(t){var e,n,o=t.data;if(void 0!==o){for(h(e=o.hook)&&h(e=e.destroy)&&e(t),e=0;e<u.destroy.length;++e)u.destroy[e](t);if(void 0!==t.children)for(n=0;n<t.children.length;++n)null!=(e=t.children[n])&&"string"!=typeof e&&_(e)}}function w(t,e,n,o){for(;n<=o;++n){var r=void 0,i=void 0,a=void 0,s=e[n];if(null!=s)if(h(s.sel)){for(_(s),i=u.remove.length+1,a=l(s.elm,i),r=0;r<u.remove.length;++r)u.remove[r](s,a);h(r=s.data)&&h(r=r.hook)&&h(r=r.remove)?r(s,a):a()}else c.removeChild(t,s.elm)}}function S(t,e,n){var o,r;h(o=e.data)&&h(r=o.hook)&&h(o=r.prepatch)&&o(t,e);var i=e.elm=t.elm,a=t.children,s=e.children;if(t!==e){if(void 0!==e.data){for(o=0;o<u.update.length;++o)u.update[o](t,e);h(o=e.data.hook)&&h(o=o.update)&&o(t,e)}p(e.text)?h(a)&&h(s)?a!==s&&function(t,e,n,o){for(var r,i,a,s=0,u=0,d=e.length-1,l=e[0],h=e[d],y=n.length-1,m=n[0],_=n[y];s<=d&&u<=y;)null==l?l=e[++s]:null==h?h=e[--d]:null==m?m=n[++u]:null==_?_=n[--y]:g(l,m)?(S(l,m,o),l=e[++s],m=n[++u]):g(h,_)?(S(h,_,o),h=e[--d],_=n[--y]):g(l,_)?(S(l,_,o),c.insertBefore(t,l.elm,c.nextSibling(h.elm)),l=e[++s],_=n[--y]):g(h,m)?(S(h,m,o),c.insertBefore(t,h.elm,l.elm),h=e[--d],m=n[++u]):(void 0===r&&(r=v(e,s,d)),p(i=r[m.key])?(c.insertBefore(t,f(m,o),l.elm),m=n[++u]):((a=e[i]).sel!==m.sel?c.insertBefore(t,f(m,o),l.elm):(S(a,m,o),e[i]=void 0,c.insertBefore(t,a.elm,l.elm)),m=n[++u]));(s<=d||u<=y)&&(s>d?b(t,null==n[y+1]?null:n[y+1].elm,n,u,y,o):w(t,e,s,d))}(i,a,s,n):h(s)?(h(t.text)&&c.setTextContent(i,""),b(i,null,s,0,s.length-1,n)):h(a)?w(i,a,0,a.length-1):h(t.text)&&c.setTextContent(i,""):t.text!==e.text&&(h(a)&&w(i,a,0,a.length-1),c.setTextContent(i,e.text)),h(r)&&h(o=r.postpatch)&&o(t,e)}}return function(t,e){var n,o,i,a=[];for(n=0;n<u.pre.length;++n)u.pre[n]();for(function(t){return void 0!==t.sel}(t)||(t=function(t){var e=t.id?"#"+t.id:"",n=t.className?"."+t.className.split(" ").join("."):"";return r(c.tagName(t).toLowerCase()+e+n,{},[],void 0,t)}(t)),g(t,e)?S(t,e,a):(o=t.elm,i=c.parentNode(o),f(e,a),null!==i&&(c.insertBefore(i,e.elm,c.nextSibling(o)),w(i,[t],0,0))),n=0;n<a.length;++n)a[n].data.hook.insert(a[n]);for(n=0;n<u.post.length;++n)u.post[n]();return e}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(152);var o=n(14),r=n(213).default().get(o.TYPES.ModelSource);window.updateModel=function(t,e){window.graphMap.set(t,e),r.setGraph(t)},window.centerView=function(){r.actionDispatcher.dispatch(new o.CenterAction([]))},window.fillView=function(){r.actionDispatcher.dispatch(new o.FitToScreenAction([]))},window.goBack=function(){r.goBack()},window.exportSVG=function(){r.actionDispatcher.dispatch(new o.SelectAllAction(!1)),r.actionDispatcher.dispatch(new o.FitToScreenAction([])),r.actionDispatcher.dispatch(o.RequestExportSvgAction.create())},window.graphMap=new Map},function(t,e,n){(function(t,e){
/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var n;!function(n){!function(o){var r="object"==typeof e?e:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),i=a(n);function a(t,e){return function(n,o){"function"!=typeof t[n]&&Object.defineProperty(t,n,{configurable:!0,writable:!0,value:o}),e&&e(n,o)}}void 0===r.Reflect?r.Reflect=n:i=a(r.Reflect,i),function(e){var n=Object.prototype.hasOwnProperty,o="function"==typeof Symbol,r=o&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",i=o&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",a="function"==typeof Object.create,s={__proto__:[]}instanceof Array,u=!a&&!s,c={create:a?function(){return C(Object.create(null))}:s?function(){return C({__proto__:null})}:function(){return C({})},has:u?function(t,e){return n.call(t,e)}:function(t,e){return e in t},get:u?function(t,e){return n.call(t,e)?t[e]:void 0}:function(t,e){return t[e]}},d=Object.getPrototypeOf(Function),l="object"==typeof t&&t.env&&"true"===t.env.REFLECT_METADATA_USE_MAP_POLYFILL,f=l||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var t={},e=[],n=function(){function t(t,e,n){this._index=0,this._keys=t,this._values=e,this._selector=n}return t.prototype["@@iterator"]=function(){return this},t.prototype[i]=function(){return this},t.prototype.next=function(){var t=this._index;if(t>=0&&t<this._keys.length){var n=this._selector(this._keys[t],this._values[t]);return t+1>=this._keys.length?(this._index=-1,this._keys=e,this._values=e):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},t.prototype.throw=function(t){throw this._index>=0&&(this._index=-1,this._keys=e,this._values=e),t},t.prototype.return=function(t){return this._index>=0&&(this._index=-1,this._keys=e,this._values=e),{value:t,done:!0}},t}();return function(){function e(){this._keys=[],this._values=[],this._cacheKey=t,this._cacheIndex=-2}return Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.has=function(t){return this._find(t,!1)>=0},e.prototype.get=function(t){var e=this._find(t,!1);return e>=0?this._values[e]:void 0},e.prototype.set=function(t,e){var n=this._find(t,!0);return this._values[n]=e,this},e.prototype.delete=function(e){var n=this._find(e,!1);if(n>=0){for(var o=this._keys.length,r=n+1;r<o;r++)this._keys[r-1]=this._keys[r],this._values[r-1]=this._values[r];return this._keys.length--,this._values.length--,e===this._cacheKey&&(this._cacheKey=t,this._cacheIndex=-2),!0}return!1},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=t,this._cacheIndex=-2},e.prototype.keys=function(){return new n(this._keys,this._values,o)},e.prototype.values=function(){return new n(this._keys,this._values,r)},e.prototype.entries=function(){return new n(this._keys,this._values,a)},e.prototype["@@iterator"]=function(){return this.entries()},e.prototype[i]=function(){return this.entries()},e.prototype._find=function(t,e){return this._cacheKey!==t&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=t)),this._cacheIndex<0&&e&&(this._cacheIndex=this._keys.length,this._keys.push(t),this._values.push(void 0)),this._cacheIndex},e}();function o(t,e){return t}function r(t,e){return e}function a(t,e){return[t,e]}}():Map,p=l||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function t(){this._map=new f}return Object.defineProperty(t.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this._map.has(t)},t.prototype.add=function(t){return this._map.set(t,t),this},t.prototype.delete=function(t){return this._map.delete(t)},t.prototype.clear=function(){this._map.clear()},t.prototype.keys=function(){return this._map.keys()},t.prototype.values=function(){return this._map.values()},t.prototype.entries=function(){return this._map.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[i]=function(){return this.keys()},t}():Set,h=new(l||"function"!=typeof WeakMap?function(){var t=c.create(),e=o();return function(){function t(){this._key=o()}return t.prototype.has=function(t){var e=r(t,!1);return void 0!==e&&c.has(e,this._key)},t.prototype.get=function(t){var e=r(t,!1);return void 0!==e?c.get(e,this._key):void 0},t.prototype.set=function(t,e){return r(t,!0)[this._key]=e,this},t.prototype.delete=function(t){var e=r(t,!1);return void 0!==e&&delete e[this._key]},t.prototype.clear=function(){this._key=o()},t}();function o(){var e;do{e="@@WeakMap@@"+a()}while(c.has(t,e));return t[e]=!0,e}function r(t,o){if(!n.call(t,e)){if(!o)return;Object.defineProperty(t,e,{value:c.create()})}return t[e]}function i(t,e){for(var n=0;n<e;++n)t[n]=255*Math.random()|0;return t}function a(){var t,e=(t=16,"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):i(new Uint8Array(t),t):i(new Array(t),t));e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var n="",o=0;o<16;++o){var r=e[o];4!==o&&6!==o&&8!==o||(n+="-"),r<16&&(n+="0"),n+=r.toString(16).toLowerCase()}return n}}():WeakMap);function y(t,e,n){var o=h.get(t);if(w(o)){if(!n)return;o=new f,h.set(t,o)}var r=o.get(e);if(w(r)){if(!n)return;r=new f,o.set(e,r)}return r}function g(t,e,n){var o=y(e,n,!1);return!w(o)&&!!o.has(t)}function v(t,e,n){var o=y(e,n,!1);if(!w(o))return o.get(t)}function m(t,e,n,o){y(n,o,!0).set(t,e)}function b(t,e){var n=[],o=y(t,e,!1);if(w(o))return n;for(var r=function(t){var e=I(t,i);if(!R(e))throw new TypeError;var n=e.call(t);if(!P(n))throw new TypeError;return n}(o.keys()),a=0;;){var s=A(r);if(!s)return n.length=a,n;var u=s.value;try{n[a]=u}catch(t){try{M(r)}finally{throw t}}a++}}function _(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function w(t){return void 0===t}function S(t){return null===t}function P(t){return"object"==typeof t?null!==t:"function"==typeof t}function O(t,e){switch(_(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}var n=3===e?"string":5===e?"number":"default",o=I(t,r);if(void 0!==o){var i=o.call(t,n);if(P(i))throw new TypeError;return i}return function(t,e){if("string"===e){var n=t.toString;if(R(n))if(!P(r=n.call(t)))return r;if(R(o=t.valueOf))if(!P(r=o.call(t)))return r}else{var o;if(R(o=t.valueOf))if(!P(r=o.call(t)))return r;var r,i=t.toString;if(R(i))if(!P(r=i.call(t)))return r}throw new TypeError}(t,"default"===n?"number":n)}function E(t){var e=O(t,3);return"symbol"==typeof e?e:function(t){return""+t}(e)}function x(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function R(t){return"function"==typeof t}function T(t){return"function"==typeof t}function I(t,e){var n=t[e];if(null!=n){if(!R(n))throw new TypeError;return n}}function A(t){var e=t.next();return!e.done&&e}function M(t){var e=t.return;e&&e.call(t)}function j(t){var e=Object.getPrototypeOf(t);if("function"!=typeof t||t===d)return e;if(e!==d)return e;var n=t.prototype,o=n&&Object.getPrototypeOf(n);if(null==o||o===Object.prototype)return e;var r=o.constructor;return"function"!=typeof r||r===t?e:r}function C(t){return t.__=void 0,delete t.__,t}e("decorate",(function(t,e,n,o){if(w(n)){if(!x(t))throw new TypeError;if(!T(e))throw new TypeError;return function(t,e){for(var n=t.length-1;n>=0;--n){var o=(0,t[n])(e);if(!w(o)&&!S(o)){if(!T(o))throw new TypeError;e=o}}return e}(t,e)}if(!x(t))throw new TypeError;if(!P(e))throw new TypeError;if(!P(o)&&!w(o)&&!S(o))throw new TypeError;return S(o)&&(o=void 0),function(t,e,n,o){for(var r=t.length-1;r>=0;--r){var i=(0,t[r])(e,n,o);if(!w(i)&&!S(i)){if(!P(i))throw new TypeError;o=i}}return o}(t,e,n=E(n),o)})),e("metadata",(function(t,e){return function(n,o){if(!P(n))throw new TypeError;if(!w(o)&&!function(t){switch(_(t)){case 3:case 4:return!0;default:return!1}}(o))throw new TypeError;m(t,e,n,o)}})),e("defineMetadata",(function(t,e,n,o){if(!P(n))throw new TypeError;return w(o)||(o=E(o)),m(t,e,n,o)})),e("hasMetadata",(function(t,e,n){if(!P(e))throw new TypeError;return w(n)||(n=E(n)),function t(e,n,o){if(g(e,n,o))return!0;var r=j(n);return!S(r)&&t(e,r,o)}(t,e,n)})),e("hasOwnMetadata",(function(t,e,n){if(!P(e))throw new TypeError;return w(n)||(n=E(n)),g(t,e,n)})),e("getMetadata",(function(t,e,n){if(!P(e))throw new TypeError;return w(n)||(n=E(n)),function t(e,n,o){if(g(e,n,o))return v(e,n,o);var r=j(n);return S(r)?void 0:t(e,r,o)}(t,e,n)})),e("getOwnMetadata",(function(t,e,n){if(!P(e))throw new TypeError;return w(n)||(n=E(n)),v(t,e,n)})),e("getMetadataKeys",(function(t,e){if(!P(t))throw new TypeError;return w(e)||(e=E(e)),function t(e,n){var o=b(e,n),r=j(e);if(null===r)return o;var i=t(r,n);if(i.length<=0)return o;if(o.length<=0)return i;for(var a=new p,s=[],u=0,c=o;u<c.length;u++){var d=c[u];a.has(d)||(a.add(d),s.push(d))}for(var l=0,f=i;l<f.length;l++){d=f[l];a.has(d)||(a.add(d),s.push(d))}return s}(t,e)})),e("getOwnMetadataKeys",(function(t,e){if(!P(t))throw new TypeError;return w(e)||(e=E(e)),b(t,e)})),e("deleteMetadata",(function(t,e,n){if(!P(e))throw new TypeError;w(n)||(n=E(n));var o=y(e,n,!1);if(w(o))return!1;if(!o.delete(t))return!1;if(o.size>0)return!0;var r=h.get(e);return r.delete(n),r.size>0||h.delete(e),!0}))}(i)}()}(n||(n={}))}).call(this,n(153),n(88))},function(t,e){var n,o,r=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(t){o=a}}();var u,c=[],d=!1,l=-1;function f(){d&&u&&(d=!1,u.length?c=u.concat(c):l=-1,c.length&&p())}function p(){if(!d){var t=s(f);d=!0;for(var e=c.length;e;){for(u=c,c=[];++l<e;)u&&u[l].run();l=-1,e=c.length}u=null,d=!1,function(t){if(o===clearTimeout)return clearTimeout(t);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{o(t)}catch(e){try{return o.call(null,t)}catch(e){return o.call(this,t)}}}(t)}}function h(t,e){this.fun=t,this.array=e}function y(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new h(t,e)),1!==c.length||d||s(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=y,r.addListener=y,r.once=y,r.off=y,r.removeListener=y,r.removeAllListeners=y,r.emit=y,r.prependListener=y,r.prependOnceListener=y,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function a(t){try{u(o.next(t))}catch(t){i(t)}}function s(t){try{u(o.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((o=o.apply(t,e||[])).next())}))},r=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Container=void 0;var i=n(155),a=n(10),s=n(18),u=n(7),c=n(89),d=n(156),l=n(163),f=n(165),p=n(26),h=n(38),y=n(168),g=n(169),v=function(){function t(t){var e=t||{};if("object"!=typeof e)throw new Error(""+a.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(void 0===e.defaultScope)e.defaultScope=s.BindingScopeEnum.Transient;else if(e.defaultScope!==s.BindingScopeEnum.Singleton&&e.defaultScope!==s.BindingScopeEnum.Transient&&e.defaultScope!==s.BindingScopeEnum.Request)throw new Error(""+a.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(void 0===e.autoBindInjectable)e.autoBindInjectable=!1;else if("boolean"!=typeof e.autoBindInjectable)throw new Error(""+a.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(void 0===e.skipBaseClassChecks)e.skipBaseClassChecks=!1;else if("boolean"!=typeof e.skipBaseClassChecks)throw new Error(""+a.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:e.autoBindInjectable,defaultScope:e.defaultScope,skipBaseClassChecks:e.skipBaseClassChecks},this.id=p.id(),this._bindingDictionary=new g.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new c.MetadataReader}return t.merge=function(e,n){var o=new t,r=d.getBindingDictionary(o),i=d.getBindingDictionary(e),a=d.getBindingDictionary(n);function s(t,e){t.traverse((function(t,n){n.forEach((function(t){e.add(t.serviceIdentifier,t.clone())}))}))}return s(i,r),s(a,r),o},t.prototype.load=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=this._getContainerModuleHelpersFactory(),o=0,r=t;o<r.length;o++){var i=r[o],a=n(i.id);i.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)}},t.prototype.loadAsync=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o(this,void 0,void 0,(function(){var e,n,o,i,a;return r(this,(function(r){switch(r.label){case 0:e=this._getContainerModuleHelpersFactory(),n=0,o=t,r.label=1;case 1:return n<o.length?(i=o[n],a=e(i.id),[4,i.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)]):[3,4];case 2:r.sent(),r.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},t.prototype.unload=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var o=function(t){return function(e){return e.moduleId===t}};e.forEach((function(e){var n=o(e.id);t._bindingDictionary.removeByCondition(n)}))},t.prototype.bind=function(t){var e=this.options.defaultScope||s.BindingScopeEnum.Transient,n=new i.Binding(t,e);return this._bindingDictionary.add(t,n),new f.BindingToSyntax(n)},t.prototype.rebind=function(t){return this.unbind(t),this.bind(t)},t.prototype.unbind=function(t){try{this._bindingDictionary.remove(t)}catch(e){throw new Error(a.CANNOT_UNBIND+" "+h.getServiceIdentifierAsString(t))}},t.prototype.unbindAll=function(){this._bindingDictionary=new g.Lookup},t.prototype.isBound=function(t){var e=this._bindingDictionary.hasKey(t);return!e&&this.parent&&(e=this.parent.isBound(t)),e},t.prototype.isBoundNamed=function(t,e){return this.isBoundTagged(t,u.NAMED_TAG,e)},t.prototype.isBoundTagged=function(t,e,n){var o=!1;if(this._bindingDictionary.hasKey(t)){var r=this._bindingDictionary.get(t),i=d.createMockRequest(this,t,e,n);o=r.some((function(t){return t.constraint(i)}))}return!o&&this.parent&&(o=this.parent.isBoundTagged(t,e,n)),o},t.prototype.snapshot=function(){this._snapshots.push(y.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},t.prototype.restore=function(){var t=this._snapshots.pop();if(void 0===t)throw new Error(a.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=t.bindings,this._middleware=t.middleware},t.prototype.createChild=function(e){var n=new t(e||this.options);return n.parent=this,n},t.prototype.applyMiddleware=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._middleware?this._middleware:this._planAndResolve();this._middleware=t.reduce((function(t,e){return e(t)}),n)},t.prototype.applyCustomMetadataReader=function(t){this._metadataReader=t},t.prototype.get=function(t){return this._get(!1,!1,s.TargetTypeEnum.Variable,t)},t.prototype.getTagged=function(t,e,n){return this._get(!1,!1,s.TargetTypeEnum.Variable,t,e,n)},t.prototype.getNamed=function(t,e){return this.getTagged(t,u.NAMED_TAG,e)},t.prototype.getAll=function(t){return this._get(!0,!0,s.TargetTypeEnum.Variable,t)},t.prototype.getAllTagged=function(t,e,n){return this._get(!1,!0,s.TargetTypeEnum.Variable,t,e,n)},t.prototype.getAllNamed=function(t,e){return this.getAllTagged(t,u.NAMED_TAG,e)},t.prototype.resolve=function(t){var e=this.createChild();return e.bind(t).toSelf(),e.get(t)},t.prototype._getContainerModuleHelpersFactory=function(){var t=this,e=function(t,e){t._binding.moduleId=e},n=function(n){return function(o){var r=t.rebind.bind(t)(o);return e(r,n),r}};return function(o){return{bindFunction:(r=o,function(n){var o=t.bind.bind(t)(n);return e(o,r),o}),isboundFunction:function(e){return t.isBound.bind(t)(e)},rebindFunction:n(o),unbindFunction:function(e){t.unbind.bind(t)(e)}};var r}},t.prototype._get=function(t,e,n,o,r,i){var s=null,u={avoidConstraints:t,contextInterceptor:function(t){return t},isMultiInject:e,key:r,serviceIdentifier:o,targetType:n,value:i};if(this._middleware){if(null==(s=this._middleware(u)))throw new Error(a.INVALID_MIDDLEWARE_RETURN)}else s=this._planAndResolve()(u);return s},t.prototype._planAndResolve=function(){var t=this;return function(e){var n=d.plan(t._metadataReader,t,e.isMultiInject,e.targetType,e.serviceIdentifier,e.key,e.value,e.avoidConstraints);return n=e.contextInterceptor(n),l.resolve(n)}},t}();e.Container=v},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Binding=void 0;var o=n(18),r=n(26),i=function(){function t(t,e){this.id=r.id(),this.activated=!1,this.serviceIdentifier=t,this.scope=e,this.type=o.BindingTypeEnum.Invalid,this.constraint=function(t){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return t.prototype.clone=function(){var e=new t(this.serviceIdentifier,this.scope);return e.activated=!1,e.implementationType=this.implementationType,e.dynamicValue=this.dynamicValue,e.scope=this.scope,e.type=this.type,e.factory=this.factory,e.provider=this.provider,e.constraint=this.constraint,e.onActivation=this.onActivation,e.cache=this.cache,e},t}();e.Binding=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getBindingDictionary=e.createMockRequest=e.plan=void 0;var o=n(157),r=n(10),i=n(18),a=n(7),s=n(90),u=n(38),c=n(158),d=n(15),l=n(159),f=n(160),p=n(162),h=n(92);function y(t){return t._bindingDictionary}function g(t,e,n,i,a){var s=v(n.container,a.serviceIdentifier),c=[];return s.length===o.BindingCount.NoBindingsAvailable&&n.container.options.autoBindInjectable&&"function"==typeof a.serviceIdentifier&&t.getConstructorMetadata(a.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(a.serviceIdentifier).toSelf(),s=v(n.container,a.serviceIdentifier)),c=e?s:s.filter((function(t){var e=new p.Request(t.serviceIdentifier,n,i,t,a);return t.constraint(e)})),function(t,e,n,i){switch(e.length){case o.BindingCount.NoBindingsAvailable:if(n.isOptional())return e;var a=u.getServiceIdentifierAsString(t),s=r.NOT_REGISTERED;throw s+=u.listMetadataForTarget(a,n),s+=u.listRegisteredBindingsForServiceIdentifier(i,a,v),new Error(s);case o.BindingCount.OnlyOneBindingAvailable:if(!n.isArray())return e;case o.BindingCount.MultipleBindingsAvailable:default:if(n.isArray())return e;a=u.getServiceIdentifierAsString(t),s=r.AMBIGUOUS_MATCH+" "+a;throw s+=u.listRegisteredBindingsForServiceIdentifier(i,a,v),new Error(s)}}(a.serviceIdentifier,c,a,n.container),c}function v(t,e){var n=[],o=y(t);return o.hasKey(e)?n=o.get(e):null!==t.parent&&(n=v(t.parent,e)),n}e.getBindingDictionary=y,e.plan=function(t,e,n,o,y,v,m,b){void 0===b&&(b=!1);var _=new c.Context(e),w=function(t,e,n,o,r,i){var s=t?a.MULTI_INJECT_TAG:a.INJECT_TAG,u=new d.Metadata(s,n),c=new h.Target(e,o,n,u);if(void 0!==r){var l=new d.Metadata(r,i);c.metadata.push(l)}return c}(n,o,y,"",v,m);try{return function t(e,n,o,a,s,u){var c,d;if(null===s){c=g(e,n,a,null,u),d=new p.Request(o,a,null,c,u);var h=new l.Plan(a,d);a.addPlan(h)}else c=g(e,n,a,s,u),d=s.addChildRequest(u.serviceIdentifier,c,u);c.forEach((function(n){var o=null;if(u.isArray())o=d.addChildRequest(n.serviceIdentifier,n,u);else{if(n.cache)return;o=d}if(n.type===i.BindingTypeEnum.Instance&&null!==n.implementationType){var s=f.getDependencies(e,n.implementationType);if(!a.container.options.skipBaseClassChecks){var c=f.getBaseClassDependencyCount(e,n.implementationType);if(s.length<c){var l=r.ARGUMENTS_LENGTH_MISMATCH(f.getFunctionName(n.implementationType));throw new Error(l)}}s.forEach((function(n){t(e,!1,n.serviceIdentifier,a,o,n)}))}}))}(t,b,y,_,null,w),_}catch(t){throw s.isStackOverflowExeption(t)&&_.plan&&u.circularDependencyToException(_.plan.rootRequest),t}},e.createMockRequest=function(t,e,n,o){var r=new h.Target(i.TargetTypeEnum.Variable,"",e,new d.Metadata(n,o)),a=new c.Context(t);return new p.Request(e,a,null,[],r)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingCount=void 0;e.BindingCount={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Context=void 0;var o=n(26),r=function(){function t(t){this.id=o.id(),this.container=t}return t.prototype.addPlan=function(t){this.plan=t},t.prototype.setCurrentRequest=function(t){this.currentRequest=t},t}();e.Context=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Plan=void 0;var o=function(t,e){this.parentContext=t,this.rootRequest=e};e.Plan=o},function(t,e,n){"use strict";var o=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,r++)o[r]=i[a];return o};Object.defineProperty(e,"__esModule",{value:!0}),e.getFunctionName=e.getBaseClassDependencyCount=e.getDependencies=void 0;var r=n(91),i=n(10),a=n(18),s=n(7),u=n(38);Object.defineProperty(e,"getFunctionName",{enumerable:!0,get:function(){return u.getFunctionName}});var c=n(92);function d(t,e,n,r){var s=t.getConstructorMetadata(n),u=s.compilerGeneratedMetadata;if(void 0===u){var d=i.MISSING_INJECTABLE_ANNOTATION+" "+e+".";throw new Error(d)}var p=s.userGeneratedMetadata,h=Object.keys(p),y=function(t,e,n,o,r){for(var i=[],a=0;a<r;a++){var s=l(a,t,e,n,o);null!==s&&i.push(s)}return i}(r,e,u,p,0===n.length&&h.length>0?h.length:n.length),g=function t(e,n){for(var r=e.getPropertiesMetadata(n),i=[],s=Object.keys(r),u=0,d=s;u<d.length;u++){var l=d[u],p=r[l],h=f(r[l]),y=h.targetName||l,g=h.inject||h.multiInject,v=new c.Target(a.TargetTypeEnum.ClassProperty,y,g);v.metadata=p,i.push(v)}var m=Object.getPrototypeOf(n.prototype).constructor;if(m!==Object){var b=t(e,m);i=o(i,b)}return i}(t,n);return o(y,g)}function l(t,e,n,o,s){var u=s[t.toString()]||[],d=f(u),l=!0!==d.unmanaged,p=o[t],h=d.inject||d.multiInject;if((p=h||p)instanceof r.LazyServiceIdentifer&&(p=p.unwrap()),l){if(!e&&(p===Object||p===Function||void 0===p)){var y=i.MISSING_INJECT_ANNOTATION+" argument "+t+" in class "+n+".";throw new Error(y)}var g=new c.Target(a.TargetTypeEnum.ConstructorArgument,d.targetName,p);return g.metadata=u,g}return null}function f(t){var e={};return t.forEach((function(t){e[t.key.toString()]=t.value})),{inject:e[s.INJECT_TAG],multiInject:e[s.MULTI_INJECT_TAG],targetName:e[s.NAME_TAG],unmanaged:e[s.UNMANAGED_TAG]}}e.getDependencies=function(t,e){return d(t,u.getFunctionName(e),e,!1)},e.getBaseClassDependencyCount=function t(e,n){var o=Object.getPrototypeOf(n.prototype).constructor;if(o!==Object){var r=d(e,u.getFunctionName(o),o,!0),i=r.map((function(t){return t.metadata.filter((function(t){return t.key===s.UNMANAGED_TAG}))})),a=[].concat.apply([],i).length,c=r.length-a;return c>0?c:t(e,o)}return 0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryableString=void 0;var o=function(){function t(t){this.str=t}return t.prototype.startsWith=function(t){return 0===this.str.indexOf(t)},t.prototype.endsWith=function(t){var e,n=t.split("").reverse().join("");return e=this.str.split("").reverse().join(""),this.startsWith.call({str:e},n)},t.prototype.contains=function(t){return-1!==this.str.indexOf(t)},t.prototype.equals=function(t){return this.str===t},t.prototype.value=function(){return this.str},t}();e.QueryableString=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Request=void 0;var o=n(26),r=function(){function t(t,e,n,r,i){this.id=o.id(),this.serviceIdentifier=t,this.parentContext=e,this.parentRequest=n,this.target=i,this.childRequests=[],this.bindings=Array.isArray(r)?r:[r],this.requestScope=null===n?new Map:null}return t.prototype.addChildRequest=function(e,n,o){var r=new t(e,this.parentContext,this,n,o);return this.childRequests.push(r),r},t}();e.Request=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.resolve=void 0;var o=n(10),r=n(18),i=n(90),a=n(38),s=n(164),u=function(t,e,n){try{return n()}catch(n){throw i.isStackOverflowExeption(n)?new Error(o.CIRCULAR_DEPENDENCY_IN_FACTORY(t,e.toString())):n}},c=function(t){return function(e){e.parentContext.setCurrentRequest(e);var n=e.bindings,i=e.childRequests,d=e.target&&e.target.isArray(),l=!(e.parentRequest&&e.parentRequest.target&&e.target&&e.parentRequest.target.matchesArray(e.target.serviceIdentifier));if(d&&l)return i.map((function(e){return c(t)(e)}));var f=null;if(!e.target.isOptional()||0!==n.length){var p=n[0],h=p.scope===r.BindingScopeEnum.Singleton,y=p.scope===r.BindingScopeEnum.Request;if(h&&p.activated)return p.cache;if(y&&null!==t&&t.has(p.id))return t.get(p.id);if(p.type===r.BindingTypeEnum.ConstantValue)f=p.cache;else if(p.type===r.BindingTypeEnum.Function)f=p.cache;else if(p.type===r.BindingTypeEnum.Constructor)f=p.implementationType;else if(p.type===r.BindingTypeEnum.DynamicValue&&null!==p.dynamicValue)f=u("toDynamicValue",p.serviceIdentifier,(function(){return p.dynamicValue(e.parentContext)}));else if(p.type===r.BindingTypeEnum.Factory&&null!==p.factory)f=u("toFactory",p.serviceIdentifier,(function(){return p.factory(e.parentContext)}));else if(p.type===r.BindingTypeEnum.Provider&&null!==p.provider)f=u("toProvider",p.serviceIdentifier,(function(){return p.provider(e.parentContext)}));else{if(p.type!==r.BindingTypeEnum.Instance||null===p.implementationType){var g=a.getServiceIdentifierAsString(e.serviceIdentifier);throw new Error(o.INVALID_BINDING_TYPE+" "+g)}f=s.resolveInstance(p.implementationType,i,c(t))}return"function"==typeof p.onActivation&&(f=p.onActivation(e.parentContext,f)),h&&(p.cache=f,p.activated=!0),y&&null!==t&&!t.has(p.id)&&t.set(p.id,f),f}}};e.resolve=function(t){return c(t.plan.rootRequest.requestScope)(t.plan.rootRequest)}},function(t,e,n){"use strict";var o=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,r++)o[r]=i[a];return o};Object.defineProperty(e,"__esModule",{value:!0}),e.resolveInstance=void 0;var r=n(10),i=n(18),a=n(7);e.resolveInstance=function(t,e,n){var s,u,c=null;if(e.length>0){var d=e.filter((function(t){return null!==t.target&&t.target.type===i.TargetTypeEnum.ConstructorArgument})).map(n);u=d,c=function(t,e,n){var o=e.filter((function(t){return null!==t.target&&t.target.type===i.TargetTypeEnum.ClassProperty})),r=o.map(n);return o.forEach((function(e,n){var o;o=e.target.name.value();var i=r[n];t[o]=i})),t}(c=new((s=t).bind.apply(s,o([void 0],u))),e,n)}else c=new t;return function(t,e){if(Reflect.hasMetadata(a.POST_CONSTRUCT,t)){var n=Reflect.getMetadata(a.POST_CONSTRUCT,t);try{e[n.value]()}catch(e){throw new Error(r.POST_CONSTRUCT_ERROR(t.name,e.message))}}}(t,c),c}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingToSyntax=void 0;var o=n(10),r=n(18),i=n(166),a=n(93),s=function(){function t(t){this._binding=t}return t.prototype.to=function(t){return this._binding.type=r.BindingTypeEnum.Instance,this._binding.implementationType=t,new i.BindingInWhenOnSyntax(this._binding)},t.prototype.toSelf=function(){if("function"!=typeof this._binding.serviceIdentifier)throw new Error(""+o.INVALID_TO_SELF_VALUE);var t=this._binding.serviceIdentifier;return this.to(t)},t.prototype.toConstantValue=function(t){return this._binding.type=r.BindingTypeEnum.ConstantValue,this._binding.cache=t,this._binding.dynamicValue=null,this._binding.implementationType=null,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toDynamicValue=function(t){return this._binding.type=r.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=t,this._binding.implementationType=null,new i.BindingInWhenOnSyntax(this._binding)},t.prototype.toConstructor=function(t){return this._binding.type=r.BindingTypeEnum.Constructor,this._binding.implementationType=t,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toFactory=function(t){return this._binding.type=r.BindingTypeEnum.Factory,this._binding.factory=t,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toFunction=function(t){if("function"!=typeof t)throw new Error(o.INVALID_FUNCTION_BINDING);var e=this.toConstantValue(t);return this._binding.type=r.BindingTypeEnum.Function,e},t.prototype.toAutoFactory=function(t){return this._binding.type=r.BindingTypeEnum.Factory,this._binding.factory=function(e){return function(){return e.container.get(t)}},new a.BindingWhenOnSyntax(this._binding)},t.prototype.toProvider=function(t){return this._binding.type=r.BindingTypeEnum.Provider,this._binding.provider=t,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toService=function(t){this.toDynamicValue((function(e){return e.container.get(t)}))},t}();e.BindingToSyntax=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingInWhenOnSyntax=void 0;var o=n(167),r=n(61),i=n(62),a=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new i.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new r.BindingOnSyntax(this._binding),this._bindingInSyntax=new o.BindingInSyntax(t)}return t.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},t.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},t.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t}();e.BindingInWhenOnSyntax=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingInSyntax=void 0;var o=n(18),r=n(93),i=function(){function t(t){this._binding=t}return t.prototype.inRequestScope=function(){return this._binding.scope=o.BindingScopeEnum.Request,new r.BindingWhenOnSyntax(this._binding)},t.prototype.inSingletonScope=function(){return this._binding.scope=o.BindingScopeEnum.Singleton,new r.BindingWhenOnSyntax(this._binding)},t.prototype.inTransientScope=function(){return this._binding.scope=o.BindingScopeEnum.Transient,new r.BindingWhenOnSyntax(this._binding)},t}();e.BindingInSyntax=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContainerSnapshot=void 0;var o=function(){function t(){}return t.of=function(e,n){var o=new t;return o.bindings=e,o.middleware=n,o},t}();e.ContainerSnapshot=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Lookup=void 0;var o=n(10),r=function(){function t(){this._map=new Map}return t.prototype.getMap=function(){return this._map},t.prototype.add=function(t,e){if(null==t)throw new Error(o.NULL_ARGUMENT);if(null==e)throw new Error(o.NULL_ARGUMENT);var n=this._map.get(t);void 0!==n?(n.push(e),this._map.set(t,n)):this._map.set(t,[e])},t.prototype.get=function(t){if(null==t)throw new Error(o.NULL_ARGUMENT);var e=this._map.get(t);if(void 0!==e)return e;throw new Error(o.KEY_NOT_FOUND)},t.prototype.remove=function(t){if(null==t)throw new Error(o.NULL_ARGUMENT);if(!this._map.delete(t))throw new Error(o.KEY_NOT_FOUND)},t.prototype.removeByCondition=function(t){var e=this;this._map.forEach((function(n,o){var r=n.filter((function(e){return!t(e)}));r.length>0?e._map.set(o,r):e._map.delete(o)}))},t.prototype.hasKey=function(t){if(null==t)throw new Error(o.NULL_ARGUMENT);return this._map.has(t)},t.prototype.clone=function(){var e=new t;return this._map.forEach((function(t,n){t.forEach((function(t){return e.add(n,t.clone())}))})),e},t.prototype.traverse=function(t){this._map.forEach((function(e,n){t(n,e)}))},t}();e.Lookup=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncContainerModule=e.ContainerModule=void 0;var o=n(26),r=function(t){this.id=o.id(),this.registry=t};e.ContainerModule=r;var i=function(t){this.id=o.id(),this.registry=t};e.AsyncContainerModule=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.injectable=void 0;var o=n(10),r=n(7);e.injectable=function(){return function(t){if(Reflect.hasOwnMetadata(r.PARAM_TYPES,t))throw new Error(o.DUPLICATED_INJECTABLE_DECORATOR);var e=Reflect.getMetadata(r.DESIGN_PARAM_TYPES,t)||[];return Reflect.defineMetadata(r.PARAM_TYPES,e,t),t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tagged=void 0;var o=n(15),r=n(25);e.tagged=function(t,e){return function(n,i,a){var s=new o.Metadata(t,e);"number"==typeof a?r.tagParameter(n,i,a,s):r.tagProperty(n,i,s)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.named=void 0;var o=n(7),r=n(15),i=n(25);e.named=function(t){return function(e,n,a){var s=new r.Metadata(o.NAMED_TAG,t);"number"==typeof a?i.tagParameter(e,n,a,s):i.tagProperty(e,n,s)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.optional=void 0;var o=n(7),r=n(15),i=n(25);e.optional=function(){return function(t,e,n){var a=new r.Metadata(o.OPTIONAL_TAG,!0);"number"==typeof n?i.tagParameter(t,e,n,a):i.tagProperty(t,e,a)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unmanaged=void 0;var o=n(7),r=n(15),i=n(25);e.unmanaged=function(){return function(t,e,n){var a=new r.Metadata(o.UNMANAGED_TAG,!0);i.tagParameter(t,e,n,a)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.multiInject=void 0;var o=n(7),r=n(15),i=n(25);e.multiInject=function(t){return function(e,n,a){var s=new r.Metadata(o.MULTI_INJECT_TAG,t);"number"==typeof a?i.tagParameter(e,n,a,s):i.tagProperty(e,n,s)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.targetName=void 0;var o=n(7),r=n(15),i=n(25);e.targetName=function(t){return function(e,n,a){var s=new r.Metadata(o.NAME_TAG,t);i.tagParameter(e,n,a,s)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.postConstruct=void 0;var o=n(10),r=n(7),i=n(15);e.postConstruct=function(){return function(t,e,n){var a=new i.Metadata(r.POST_CONSTRUCT,e);if(Reflect.hasOwnMetadata(r.POST_CONSTRUCT,t.constructor))throw new Error(o.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(r.POST_CONSTRUCT,a,t.constructor)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.multiBindToService=void 0,e.multiBindToService=function(t){return function(e){return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return n.forEach((function(n){return t.bind(n).toService(e)}))}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))};e.Deferred=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(1);e.overrideCommandStackOptions=function(t,e){var n=t.get(o.TYPES.CommandStackOptions);for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n}},function(t,e,n){"use strict";function o(t,e){var n,o,r=e.elm,i=t.data.props,a=e.data.props;if((i||a)&&i!==a){for(n in a=a||{},i=i||{})a[n]||delete r[n];for(n in a)o=a[n],i[n]===o||"value"===n&&r[n]===o||(r[n]=o)}}Object.defineProperty(e,"__esModule",{value:!0}),e.propsModule={create:o,update:o},e.default=e.propsModule},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function o(t,e){var n,o=e.elm,r=t.data.attrs,i=e.data.attrs;if((r||i)&&r!==i){for(n in r=r||{},i=i||{}){var a=i[n];r[n]!==a&&(!0===a?o.setAttribute(n,""):!1===a?o.removeAttribute(n):120!==n.charCodeAt(0)?o.setAttribute(n,a):58===n.charCodeAt(3)?o.setAttributeNS("http://www.w3.org/XML/1998/namespace",n,a):58===n.charCodeAt(5)?o.setAttributeNS("http://www.w3.org/1999/xlink",n,a):o.setAttribute(n,a))}for(n in r)n in i||o.removeAttribute(n)}}e.attributesModule={create:o,update:o},e.default=e.attributesModule},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o="undefined"!=typeof window&&window.requestAnimationFrame.bind(window)||setTimeout,r=!1;function i(t,e,n){var r;r=function(){t[e]=n},o((function(){o(r)}))}function a(t,e){var n,o,r=e.elm,a=t.data.style,s=e.data.style;if((a||s)&&a!==s){s=s||{};var u="delayed"in(a=a||{});for(o in a)s[o]||("-"===o[0]&&"-"===o[1]?r.style.removeProperty(o):r.style[o]="");for(o in s)if(n=s[o],"delayed"===o&&s.delayed)for(var c in s.delayed)n=s.delayed[c],u&&n===a.delayed[c]||i(r.style,c,n);else"remove"!==o&&n!==a[o]&&("-"===o[0]&&"-"===o[1]?r.style.setProperty(o,n):r.style[o]=n)}}e.styleModule={pre:function(){r=!1},create:a,update:a,destroy:function(t){var e,n,o=t.elm,r=t.data.style;if(r&&(e=r.destroy))for(n in e)o.style[n]=e[n]},remove:function(t,e){var n=t.data.style;if(n&&n.remove){r||(getComputedStyle(document.body).transform,r=!0);var o,i=t.elm,a=0,s=n.remove,u=0,c=[];for(o in s)c.push(o),i.style[o]=s[o];for(var d=getComputedStyle(i)["transition-property"].split(", ");a<d.length;++a)-1!==c.indexOf(d[a])&&u++;i.addEventListener("transitionend",(function(t){t.target===i&&--u,0===u&&e()}))}else e()}},e.default=e.styleModule},function(t,e,n){"use strict";function o(t,e){var n=t.type,o=e.data.on;o&&o[n]&&function t(e,n,o){if("function"==typeof e)e.call(n,o,n);else if("object"==typeof e)if("function"==typeof e[0])if(2===e.length)e[0].call(n,e[1],o,n);else{var r=e.slice(1);r.push(o),r.push(n),e[0].apply(n,r)}else for(var i=0;i<e.length;i++)t(e[i],n,o)}(o[n],e,t)}function r(t,e){var n,r=t.data.on,i=t.listener,a=t.elm,s=e&&e.data.on,u=e&&e.elm;if(r!==s){if(r&&i)if(s)for(n in r)s[n]||a.removeEventListener(n,i,!1);else for(n in r)a.removeEventListener(n,i,!1);if(s){var c=e.listener=t.listener||function t(e){o(e,t.vnode)};if(c.vnode=e,r)for(n in s)r[n]||u.addEventListener(n,c,!1);else for(n in s)u.addEventListener(n,c,!1)}}}Object.defineProperty(e,"__esModule",{value:!0}),e.eventListenersModule={create:r,update:r,destroy:r},e.default=e.eventListenersModule},function(t,e,n){"use strict";function o(t,e){var n,o,r=e.elm,i=t.data.class,a=e.data.class;if((i||a)&&i!==a){for(o in a=a||{},i=i||{})a[o]||r.classList.remove(o);for(o in a)(n=a[o])!==i[o]&&r.classList[n?"add":"remove"](o)}}Object.defineProperty(e,"__esModule",{value:!0}),e.classModule={create:o,update:o},e.default=e.classModule},function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),a=n(1),s=n(40),u=n(9),c=function(){function t(){}return t.prototype.decorate=function(t,e){var n=u.getAttrs(t);return void 0!==n.id&&this.logger.warn(t,"Overriding id of vnode ("+n.id+"). Make sure not to set it manually in view."),n.id=this.domHelper.createUniqueDOMElementId(e),t.key||(t.key=e.id),t},t.prototype.postUpdate=function(){},o([i.inject(a.TYPES.ILogger),r("design:type",Object)],t.prototype,"logger",void 0),o([i.inject(a.TYPES.DOMHelper),r("design:type",s.DOMHelper)],t.prototype,"domHelper",void 0),t=o([i.injectable()],t)}();e.IdPostprocessor=c},function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var r=n(9),i=n(0),a=n(8),s=function(){function t(){}return t.prototype.decorate=function(t,e){if(e.cssClasses)for(var n=0,o=e.cssClasses;n<o.length;n++){var i=o[n];r.setClass(t,i,!0)}var s=a.getSubType(e);return s&&s!==e.type&&r.setClass(t,s,!0),t},t.prototype.postUpdate=function(){},t=o([i.injectable()],t)}();e.CssClassPostprocessor=s},function(t,e,n){t.exports=function(){"use strict";return function(t){var e,n,o=document,r=o.createElement("div"),i=r.style,a=navigator.userAgent,s=-1!==a.indexOf("Firefox")&&-1!==a.indexOf("Mobile"),u=t.debounceWaitMs||0,c=t.preventSubmit||!1,d=s?"input":"keyup",l=[],f="",p=2,h=t.showOnFocus,y=0;if(void 0!==t.minLength&&(p=t.minLength),!t.input)throw new Error("input undefined");var g=t.input;function v(){n&&window.clearTimeout(n)}function m(){return!!r.parentNode}function b(){var t;y++,l=[],f="",e=void 0,(t=r.parentNode)&&t.removeChild(r)}function _(){for(;r.firstChild;)r.removeChild(r.firstChild);var n=function(t,e){var n=o.createElement("div");return n.textContent=t.label||"",n};t.render&&(n=t.render);var a=function(t,e){var n=o.createElement("div");return n.textContent=t,n};t.renderGroup&&(a=t.renderGroup);var s=o.createDocumentFragment(),u="#9?$";if(l.forEach((function(o){if(o.group&&o.group!==u){u=o.group;var r=a(o.group,f);r&&(r.className+=" group",s.appendChild(r))}var i=n(o,f);i&&(i.addEventListener("click",(function(e){t.onSelect(o,g),b(),e.preventDefault(),e.stopPropagation()})),o===e&&(i.className+=" selected"),s.appendChild(i))})),r.appendChild(s),l.length<1){if(!t.emptyMsg)return void b();var c=o.createElement("div");c.className="empty",c.textContent=t.emptyMsg,r.appendChild(c)}r.parentNode||o.body.appendChild(r),function(){if(m()){i.height="auto",i.width=g.offsetWidth+"px";var e=g.getBoundingClientRect(),n=e.top+g.offsetHeight,o=window.innerHeight-n;o<0&&(o=0),i.top=n+"px",i.bottom="",i.left=e.left+"px",i.maxHeight=o+"px",t.customize&&t.customize(g,e,r,o)}}(),function(){var t=r.getElementsByClassName("selected");if(t.length>0){var e=t[0],n=e.previousElementSibling;if(n&&-1!==n.className.indexOf("group")&&!n.previousElementSibling&&(e=n),e.offsetTop<r.scrollTop)r.scrollTop=e.offsetTop;else{var o=e.offsetTop+e.offsetHeight,i=r.scrollTop+r.offsetHeight;o>i&&(r.scrollTop+=o-i)}}}()}function w(){m()&&_()}function S(){w()}function P(t){t.target!==r?w():t.preventDefault()}function O(t){for(var e=t.which||t.keyCode||0,n=0,o=[38,13,27,39,37,16,17,18,20,91,9];n<o.length;n++)if(e===o[n])return;40===e&&m()||R(0)}function E(n){var o=n.which||n.keyCode||0;if(38===o||40===o||27===o){var r=m();if(27===o)b();else{if(!m||l.length<1)return;38===o?function(){if(l.length<1)e=void 0;else if(e===l[0])e=l[l.length-1];else for(var t=l.length-1;t>0;t--)if(e===l[t]||1===t){e=l[t-1];break}}():function(){if(l.length<1&&(e=void 0),e&&e!==l[l.length-1]){for(var t=0;t<l.length-1;t++)if(e===l[t]){e=l[t+1];break}}else e=l[0]}(),_()}return n.preventDefault(),void(r&&n.stopPropagation())}13===o&&(e&&(t.onSelect(e,g),b()),c&&n.preventDefault())}function x(){h&&R(1)}function R(o){var r=++y,i=g.value;i.length>=p||1===o?(v(),n=window.setTimeout((function(){t.fetch(i,(function(t){y===r&&t&&(f=i,e=(l=t).length>0?l[0]:void 0,_())}),0)}),0===o?u:0)):b()}function T(){setTimeout((function(){o.activeElement!==g&&b()}),200)}return r.className="autocomplete "+(t.className||""),i.position="fixed",r.addEventListener("mousedown",(function(t){t.stopPropagation(),t.preventDefault()})),g.addEventListener("keydown",E),g.addEventListener(d,O),g.addEventListener("blur",T),g.addEventListener("focus",x),window.addEventListener("resize",S),o.addEventListener("scroll",P,!0),{destroy:function(){g.removeEventListener("focus",x),g.removeEventListener("keydown",E),g.removeEventListener(d,O),g.removeEventListener("blur",T),window.removeEventListener("resize",S),o.removeEventListener("scroll",P,!0),v(),b(),y++}}}}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toAnchor=function(t){return t instanceof HTMLElement?{x:t.offsetLeft,y:t.offsetTop}:t}},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(5),c=n(2),d=n(0),l=n(1),f=function(){function t(e,n){this.containerId=e,this.elementSchema=n,this.kind=t.KIND}return t.KIND="createElement",t}();e.CreateElementAction=f;var p=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n}return r(e,t),e.prototype.execute=function(t){var e=t.root.index.getById(this.action.containerId);return e instanceof c.SParentElement&&(this.container=e,this.newElement=t.modelFactory.createElement(this.action.elementSchema),this.container.add(this.newElement)),t.root},e.prototype.undo=function(t){return this.container.remove(this.newElement),t.root},e.prototype.redo=function(t){return this.container.add(this.newElement),t.root},e.KIND=f.KIND,e=i([d.injectable(),s(0,d.inject(l.TYPES.Action)),a("design:paramtypes",[f])],e)}(u.Command);e.CreateElementCommand=p},function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var r=n(22),i=n(82),a=n(8),s=n(0),u=function(){function t(){}return t.prototype.render=function(t,e){var n=a.findParentByFeature(t,i.isExpandable),o=void 0!==n&&n.expanded?"M 1,5 L 8,12 L 15,5 Z":"M 1,8 L 8,15 L 8,1 Z";return r.svg("g",{"class-sprotty-button":"{true}","class-enabled":"{button.enabled}"},r.svg("rect",{x:0,y:0,width:16,height:16,opacity:0}),r.svg("path",{d:o}))},t=o([s.injectable()],t)}();e.ExpandButtonView=u},function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(4),a=function(){function t(){}return Object.defineProperty(t.prototype,"gridX",{get:function(){return 10},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gridY",{get:function(){return 10},enumerable:!0,configurable:!0}),t.prototype.snap=function(t,e){return e&&i.isBoundsAware(e)?{x:Math.round((t.x+.5*e.bounds.width)/this.gridX)*this.gridX-.5*e.bounds.width,y:Math.round((t.y+.5*e.bounds.height)/this.gridY)*this.gridY-.5*e.bounds.height}:{x:Math.round(t.x/this.gridX)*this.gridX,y:Math.round(t.y/this.gridY)*this.gridY}},t=o([r.injectable()],t)}();e.CenterGridSnapper=a},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e,n,o,r){void 0===r&&(r=!1);var i=t.call(this,o)||this;return i.model=e,i.elementResizes=n,i.reverse=r,i}return r(e,t),e.prototype.tween=function(t){var e=this;return this.elementResizes.forEach((function(n){var o=n.element,r=e.reverse?{width:(1-t)*n.toDimension.width+t*n.fromDimension.width,height:(1-t)*n.toDimension.height+t*n.fromDimension.height}:{width:(1-t)*n.fromDimension.width+t*n.toDimension.width,height:(1-t)*n.fromDimension.height+t*n.toDimension.height};o.bounds={x:o.bounds.x,y:o.bounds.y,width:r.width,height:r.height}})),this.model},e}(n(33).Animation);e.ResizeAnimation=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=n(1),i=n(126),a=new o.ContainerModule((function(t,e,n,o){o(r.TYPES.IModelFactory).to(i.SGraphFactory).inSingletonScope()}));e.default=a},function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),a=n(1),s=function(){function t(){}return t.prototype.decorate=function(t,e){return t},t.prototype.postUpdate=function(){var t=document.getElementById(this.options.popupDiv);if(null!==t&&"undefined"!=typeof window){var e=t.getBoundingClientRect();window.innerHeight<e.height+e.top&&(t.style.top=window.pageYOffset+window.innerHeight-e.height-5+"px"),window.innerWidth<e.left+e.width&&(t.style.left=window.pageXOffset+window.innerWidth-e.width-5+"px"),e.left<0&&(t.style.left="0px"),e.top<0&&(t.style.top="0px")}},o([i.inject(a.TYPES.ViewerOptions),r("design:type",Object)],t.prototype,"options",void 0),t=o([i.injectable()],t)}();e.PopupPositionUpdater=s},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),u=n(22),c=n(8),d=n(9),l=n(52),f=n(45),p=n(6),h=n(23),y=n(124),g=function(){function t(){}return t.prototype.render=function(t,e){var n="scale("+t.zoom+") translate("+-t.scroll.x+","+-t.scroll.y+")";return u.svg("svg",{"class-sprotty-graph":!0},u.svg("g",{transform:n},e.renderChildren(t)))},t=i([s.injectable()],t)}();e.SGraphView=g;var v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.render=function(t,e){var n=this.edgeRouterRegistry.get(t.routerKind).route(t);if(0===n.length)return this.renderDanglingEdge("Cannot compute route",t,e);if(!this.isVisible(t,n,e)){if(0===t.children.length)return;return u.svg("g",null,e.renderChildren(t,{route:n}))}return u.svg("g",{"class-sprotty-edge":!0,"class-mouseover":t.hoverFeedback},this.renderLine(t,n,e),this.renderAdditionals(t,n,e),e.renderChildren(t,{route:n}))},e.prototype.renderLine=function(t,e,n){for(var o=e[0],r="M "+o.x+","+o.y,i=1;i<e.length;i++){var a=e[i];r+=" L "+a.x+","+a.y}return u.svg("path",{d:r})},e.prototype.renderAdditionals=function(t,e,n){return[]},e.prototype.renderDanglingEdge=function(t,e,n){return u.svg("text",{"class-sprotty-edge-dangling":!0,title:t},"?")},i([s.inject(h.EdgeRouterRegistry),a("design:type",h.EdgeRouterRegistry)],e.prototype,"edgeRouterRegistry",void 0),e=i([s.injectable()],e)}(y.RoutableView);e.PolylineEdgeView=v;var m=function(){function t(){this.minimalPointDistance=10}return t.prototype.render=function(t,e,n){if(n&&n.route&&t.parent instanceof p.SRoutableElement){var o=this.edgeRouterRegistry.get(t.parent.routerKind),r=void 0===n.route?o.route(t.parent):n.route,i=o.getHandlePosition(t.parent,r,t);if(void 0!==i){var a=u.svg("circle",{"class-sprotty-routing-handle":!0,"class-selected":t.selected,"class-mouseover":t.hoverFeedback,cx:i.x,cy:i.y,r:this.getRadius()});return d.setAttr(a,"data-kind",t.kind),a}}return u.svg("g",null)},t.prototype.getRadius=function(){return 7},i([s.inject(h.EdgeRouterRegistry),a("design:type",h.EdgeRouterRegistry)],t.prototype,"edgeRouterRegistry",void 0),t=i([s.injectable()],t)}();e.SRoutingHandleView=m;var b=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.render=function(t,e){if(f.isEdgeLayoutable(t)||this.isVisible(t,e)){var n=u.svg("text",{"class-sprotty-label":!0},t.text),o=c.getSubType(t);return o&&d.setAttr(n,"class",o),n}},e=i([s.injectable()],e)}(l.ShapeView);e.SLabelView=b;var _=function(){function t(){}return t.prototype.render=function(t,e){var n="translate("+t.bounds.x+", "+t.bounds.y+")",o=u.svg("g",{transform:n,"class-sprotty-comp":"{true}"},e.renderChildren(t)),r=c.getSubType(t);return r&&d.setAttr(o,"class",r),o},t=i([s.injectable()],t)}();e.SCompartmentView=_},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(104),r=n(144),i=n(127),a=n(128),s=n(129),u=n(130),c=n(131),d=n(75),l=n(115),f=n(132),p=n(133),h=n(134),y=n(135),g=n(136),v=n(137),m=n(138),b=n(139),_=n(140),w=n(141),S=n(142),P=n(143);e.loadDefaultModules=function(t,e){var n=[o.default,r.default,i.default,a.default,s.default,u.default,c.default,l.edgeEditModule,d.default,f.default,p.default,h.default,y.default,l.labelEditModule,l.labelEditUiModule,g.default,v.default,m.default,b.default,_.default,w.default,S.default,P.default];if(e&&e.exclude)for(var O=0,E=e.exclude;O<E.length;O++){var x=E[O],R=n.indexOf(x);R>=0&&n.splice(R,1)}t.load.apply(t,n)}},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n(22),u=n(200),c=n(9),d=n(52),l=n(146),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.render=function(t,e){if(!(t instanceof l.ShapedPreRenderedElement)||this.isVisible(t,e)){var n=u.default(t.code);return this.correctNamespace(n),n}},e.prototype.correctNamespace=function(t){"svg"!==t.sel&&"g"!==t.sel||c.setNamespace(t,"http://www.w3.org/2000/svg")},e=i([a.injectable()],e)}(d.ShapeView);e.PreRenderedView=f;var p=function(){function t(){}return t.prototype.render=function(t,e){var n=u.default(t.code),o=s.svg("g",null,s.svg("foreignObject",{requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility",height:t.bounds.height,width:t.bounds.width,x:0,y:0},n),e.renderChildren(t));return c.setAttr(o,"class",t.type),c.setNamespace(n,t.namespace),o},t=i([a.injectable()],t)}();e.ForeignObjectView=p},function(t,e,n){t.exports=n(201)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=e.context||document;if(!t)return null;var r=[],i=u((0,o.default)(t),r,n),a=void 0;return a=i?1===i.length?i[0]:i:c({type:"text",content:t},r,n),e.hooks&&e.hooks.create&&r.forEach((function(t){e.hooks.create(t)})),a};var o=a(n(202)),r=a(n(205)),i=n(207);function a(t){return t&&t.__esModule?t:{default:t}}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t,e,n){return t instanceof Array&&t.length>0?t.map((function(t){return c(t,e,n)})):void 0}function c(t,e,n){var o=void 0;return o="text"===t.type?(0,i.createTextVNode)(t.content,n):(0,r.default)(t.name,function(t,e){var n={};if(!t.attrs)return n;var o=Object.keys(t.attrs).reduce((function(n,o){if("style"!==o&&"class"!==o){var r=(0,i.unescapeEntities)(t.attrs[o],e);n?n[o]=r:n=s({},o,r)}return n}),null);o&&(n.attrs=o);var r=function(t){try{return t.attrs.style.split(";").reduce((function(t,e){var n=e.split(":"),o=(0,i.transformName)(n[0].trim());if(o){var r=n[1].replace("!important","").trim();t?t[o]=r:t=s({},o,r)}return t}),null)}catch(t){return null}}(t);r&&(n.style=r);var a=function(t){try{return t.attrs.class.split(" ").reduce((function(t,e){return(e=e.trim())&&(t?t[e]=!0:t=s({},e,!0)),t}),null)}catch(t){return null}}(t);a&&(n.class=a);return n}(t,n),u(t.children,e,n)),e.push(o),o}},function(t,e,n){var o=/(?:<!--[\S\s]*?-->|<(?:"[^"]*"['"]*|'[^']*'['"]*|[^'">])+>)/g,r=n(203),i=Object.create?Object.create(null):{};function a(t,e,n,o,r){var i=e.indexOf("<",o),a=e.slice(o,-1===i?void 0:i);/^\s*$/.test(a)&&(a=" "),(!r&&i>-1&&n+t.length>=0||" "!==a)&&t.push({type:"text",content:a})}t.exports=function(t,e){e||(e={}),e.components||(e.components=i);var n,s=[],u=-1,c=[],d={},l=!1;return t.replace(o,(function(o,i){if(l){if(o!=="</"+n.name+">")return;l=!1}var f,p="/"!==o.charAt(1),h=0===o.indexOf("\x3c!--"),y=i+o.length,g=t.charAt(y);p&&!h&&(u++,"tag"===(n=r(o)).type&&e.components[n.name]&&(n.type="component",l=!0),n.voidElement||l||!g||"<"===g||a(n.children,t,u,y,e.ignoreWhitespace),d[n.tagName]=n,0===u&&s.push(n),(f=c[u-1])&&f.children.push(n),c[u]=n),(h||!p||n.voidElement)&&(h||u--,!l&&"<"!==g&&g&&a(f=-1===u?s:c[u].children,t,u,y,e.ignoreWhitespace))})),!s.length&&t.length&&a(s,t,0,0,e.ignoreWhitespace),s}},function(t,e,n){var o=/([\w-]+)|=|(['"])([.\s\S]*?)\2/g,r=n(204);t.exports=function(t){var e,n=0,i=!0,a={type:"tag",name:"",voidElement:!1,attrs:{},children:[]};return t.replace(o,(function(o){if("="===o)return i=!0,void n++;i?0===n?((r[o]||"/"===t.charAt(t.length-2))&&(a.voidElement=!0),a.name=o):(a.attrs[e]=o.replace(/^['"]|['"]$/g,""),e=void 0):(e&&(a.attrs[e]=e),e=o),n++,i=!1})),a}},function(t,e){t.exports={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,menuitem:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(145),r=n(206);function i(t,e,n){var i,a,s,u={};if(void 0!==n?(u=e,r.array(n)?i=n:r.primitive(n)?a=n:n&&n.sel&&(i=[n])):void 0!==e&&(r.array(e)?i=e:r.primitive(e)?a=e:e&&e.sel?i=[e]:u=e),void 0!==i)for(s=0;s<i.length;++s)r.primitive(i[s])&&(i[s]=o.vnode(void 0,void 0,void 0,i[s],void 0));return"s"!==t[0]||"v"!==t[1]||"g"!==t[2]||3!==t.length&&"."!==t[3]&&"#"!==t[3]||function t(e,n,o){if(e.ns="http://www.w3.org/2000/svg","foreignObject"!==o&&void 0!==n)for(var r=0;r<n.length;++r){var i=n[r].data;void 0!==i&&t(i,n[r].children,n[r].sel)}}(u,i,t),o.vnode(t,u,i,a,void 0)}e.h=i,e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.array=Array.isArray,e.primitive=function(t){return"string"==typeof t||"number"==typeof t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createTextVNode=function(t,e){return(0,i.default)(void 0,void 0,void 0,u(t,e))},e.transformName=function(t){return""+(t=t.replace(/-(\w)/g,(function(t,e){return e.toUpperCase()}))).charAt(0).toLowerCase()+t.substring(1)},e.unescapeEntities=u;var o,r=n(145),i=(o=r)&&o.__esModule?o:{default:o};var a=new RegExp("&[a-z0-9#]+;","gi"),s=null;function u(t,e){return s||(s=e.createElement("div")),t.replace(a,(function(t){return s.innerHTML=t,s.textContent}))}},function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var r=n(22),i=n(9),a=n(0),s=function(){function t(){}return t.prototype.render=function(t,e){for(var n=r.html("div",null,e.renderChildren(t)),o=0,a=t.classes;o<a.length;o++){var s=a[o];i.setClass(n,s,!0)}return n},t=o([a.injectable()],t)}();e.HtmlRootView=s},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function a(t){try{u(o.next(t))}catch(t){i(t)}}function s(t){try{u(o.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((o=o.apply(t,e||[])).next())}))},u=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var c=n(148),d=n(0),l=n(1),f=n(32),p=n(2),h=n(8),y=n(19),g=n(41),v=n(30),m=n(37),b=n(57),_=n(87),w=n(59),S=n(43),P=n(46),O=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.currentRoot=y.EMPTY_ROOT,e}return r(e,t),Object.defineProperty(e.prototype,"model",{get:function(){return this.currentRoot},set:function(t){this.setModel(t)},enumerable:!0,configurable:!0}),e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),e.register(g.ComputedBoundsAction.KIND,this),e.register(b.RequestPopupModelAction.KIND,this)},e.prototype.setModel=function(t){return this.currentRoot=t,this.submitModel(t,!1)},e.prototype.commitModel=function(t){var e=this.currentRoot;return this.currentRoot=t,e},e.prototype.updateModel=function(t){return void 0===t?this.submitModel(this.currentRoot,!0):(this.currentRoot=t,this.submitModel(t,!0))},e.prototype.getSelection=function(){return s(this,void 0,void 0,(function(){var t,e;return u(this,(function(n){switch(n.label){case 0:return[4,this.actionDispatcher.request(S.GetSelectionAction.create())];case 1:return t=n.sent(),(e=new p.SModelIndex).add(this.currentRoot),[2,e.all().filter((function(e){return t.selectedElementsIDs.indexOf(e.id)>=0}))]}}))}))},e.prototype.getViewport=function(){return s(this,void 0,void 0,(function(){var t;return u(this,(function(e){switch(e.label){case 0:return[4,this.actionDispatcher.request(v.GetViewportAction.create())];case 1:return[2,{scroll:(t=e.sent()).viewport.scroll,zoom:t.viewport.zoom,canvasBounds:t.canvasBounds}]}}))}))},e.prototype.submitModel=function(t,e,n){return s(this,void 0,void 0,(function(){var o,r;return u(this,(function(i){switch(i.label){case 0:return this.viewerOptions.needsClientLayout?[4,this.actionDispatcher.request(g.RequestBoundsAction.create(t))]:[3,3];case 1:return o=i.sent(),r=this.computedBoundsApplicator.apply(this.currentRoot,o),[4,this.doSubmitModel(t,!0,n,r)];case 2:return i.sent(),[3,5];case 3:return[4,this.doSubmitModel(t,e,n)];case 4:i.sent(),i.label=5;case 5:return[2]}}))}))},e.prototype.doSubmitModel=function(t,e,n,o){return s(this,void 0,void 0,(function(){var r,i,a,s,c;return u(this,(function(u){switch(u.label){case 0:if(void 0===this.layoutEngine)return[3,6];u.label=1;case 1:return u.trys.push([1,5,,6]),(r=this.layoutEngine.layout(t,o))instanceof Promise?[4,r]:[3,3];case 2:return t=u.sent(),[3,4];case 3:void 0!==r&&(t=r),u.label=4;case 4:return[3,6];case 5:return i=u.sent(),this.logger.error(this,i.toString(),i.stack),[3,6];case 6:return a=this.lastSubmittedModelType,this.lastSubmittedModelType=t.type,n&&n.kind===f.RequestModelAction.KIND&&n.requestId?(s=n,[4,this.actionDispatcher.dispatch(new f.SetModelAction(t,s.requestId))]):[3,8];case 7:return u.sent(),[3,12];case 8:return e&&t.type===a?(c=Array.isArray(e)?e:t,[4,this.actionDispatcher.dispatch(new w.UpdateModelAction(c,!0,n))]):[3,10];case 9:return u.sent(),[3,12];case 10:return[4,this.actionDispatcher.dispatch(new f.SetModelAction(t))];case 11:u.sent(),u.label=12;case 12:return[2]}}))}))},e.prototype.applyMatches=function(t){var e=this.currentRoot;return _.applyMatches(e,t),this.submitModel(e,t)},e.prototype.addElements=function(t){for(var e=[],n=0,o=t;n<o.length;n++){var r=o[n];void 0!==r.element&&void 0!==r.parentId?e.push({right:r.element,rightParentId:r.parentId}):void 0!==r.id&&e.push({right:r,rightParentId:this.currentRoot.id})}return this.applyMatches(e)},e.prototype.removeElements=function(t){var e=[],n=new p.SModelIndex;n.add(this.currentRoot);for(var o=0,r=t;o<r.length;o++){var i,a=r[o];if(void 0!==a.elementId&&void 0!==a.parentId)void 0!==(i=n.getById(a.elementId))&&e.push({left:i,leftParentId:a.parentId});else void 0!==(i=n.getById(a))&&e.push({left:i,leftParentId:this.currentRoot.id})}return this.applyMatches(e)},e.prototype.handle=function(t){switch(t.kind){case f.RequestModelAction.KIND:this.handleRequestModel(t);break;case g.ComputedBoundsAction.KIND:this.computedBoundsApplicator.apply(this.currentRoot,t);break;case b.RequestPopupModelAction.KIND:this.handleRequestPopupModel(t);break;case m.ExportSvgAction.KIND:this.handleExportSvgAction(t)}},e.prototype.handleRequestModel=function(t){this.submitModel(this.currentRoot,!1,t)},e.prototype.handleRequestPopupModel=function(t){if(void 0!==this.popupModelProvider){var e=h.findElement(this.currentRoot,t.elementId),n=this.popupModelProvider.getPopupModel(t,e);void 0!==n&&(n.canvasBounds=t.bounds,this.actionDispatcher.dispatch(new b.SetPopupModelAction(n,t.requestId)))}},e.prototype.handleExportSvgAction=function(t){var e=new Blob([t.svg],{type:"text/plain;charset=utf-8"});c.saveAs(e,"diagram.svg")},i([d.inject(l.TYPES.ILogger),a("design:type",Object)],e.prototype,"logger",void 0),i([d.inject(P.ComputedBoundsApplicator),a("design:type",P.ComputedBoundsApplicator)],e.prototype,"computedBoundsApplicator",void 0),i([d.inject(l.TYPES.IPopupModelProvider),d.optional(),a("design:type",Object)],e.prototype,"popupModelProvider",void 0),i([d.inject(l.TYPES.IModelLayoutEngine),d.optional(),a("design:type",Object)],e.prototype,"layoutEngine",void 0),e=i([d.injectable()],e)}(P.ModelSource);e.LocalModelSource=O},function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},i=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,r++)o[r]=i[a];return o};Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n(66),u=n(1),c=function(){function t(e,n,o,r,i){this.severity=e,this.time=n,this.caller=o,this.message=r,this.params=i,this.kind=t.KIND}return t.KIND="logging",t}();e.LoggingAction=c;var d=function(){function t(){}return t.prototype.error=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];this.logLevel>=s.LogLevel.error&&this.forward(t,e,s.LogLevel.error,n)},t.prototype.warn=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];this.logLevel>=s.LogLevel.warn&&this.forward(t,e,s.LogLevel.warn,n)},t.prototype.info=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];this.logLevel>=s.LogLevel.info&&this.forward(t,e,s.LogLevel.info,n)},t.prototype.log=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(this.logLevel>=s.LogLevel.log)try{var r="object"==typeof t?t.constructor.name:String(t);console.log.apply(t,i([r+": "+e],n))}catch(t){}},t.prototype.forward=function(t,e,n,o){var r=new Date,i=new c(s.LogLevel[n],r.toLocaleTimeString(),"object"==typeof t?t.constructor.name:String(t),e,o.map((function(t){return JSON.stringify(t)})));this.modelSourceProvider().then((function(n){try{n.handle(i)}catch(n){try{console.log.apply(t,[e,i,n])}catch(t){}}}))},o([a.inject(u.TYPES.ModelSourceProvider),r("design:type",Function)],t.prototype,"modelSourceProvider",void 0),o([a.inject(u.TYPES.LogLevel),r("design:type",Number)],t.prototype,"logLevel",void 0),t=o([a.injectable()],t)}();e.ForwardingLogger=d},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.listen=function(t){var e=this;t.addEventListener("message",(function(t){e.messageReceived(t.data)})),t.addEventListener("error",(function(t){e.logger.error(e,"error event received",t)})),this.webSocket=t},e.prototype.disconnect=function(){this.webSocket&&(this.webSocket.close(),this.webSocket=void 0)},e.prototype.sendMessage=function(t){if(!this.webSocket)throw new Error("WebSocket is not connected");this.webSocket.send(JSON.stringify(t))},e=i([a.injectable()],e)}(n(147).DiagramServer);e.WebSocketDiagramServer=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.rgb=function(t,e,n){return{red:t,green:e,blue:n}},e.toSVG=function(t){return"rgb("+t.red+","+t.green+","+t.blue+")"};var o=function(){function t(t){this.stops=t}return t.prototype.getColor=function(t){t=Math.max(0,Math.min(.99999999,t));var e=Math.floor(t*this.stops.length);return this.stops[e]},t}();e.ColorMap=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=n(14),i=n(214),a=n(215),s=n(216),u=n(149),c=n(14);e.default=function(){var t=new o.ContainerModule((function(t,e,n,o){o(r.TYPES.ILogger).to(r.ConsoleLogger).inSingletonScope(),o(r.TYPES.LogLevel).toConstantValue(r.LogLevel.info),t(r.TYPES.KeyListener).to(c.ExportSvgKeyListener).inSingletonScope(),t(r.TYPES.SvgExporter).to(u.SvgExporter).inSingletonScope(),t(r.TYPES.ModelSource).to(s.GraphModelSource).inSingletonScope();var d={bind:t,unbind:e,isBound:n,rebind:o};r.configureModelElement(d,"graph",a.ElkGraph,r.SGraphView),r.configureModelElement(d,"node",a.ElkNode,i.ElkNodeView),r.configureModelElement(d,"submodule",a.SubModule,i.ElkNodeView),r.configureModelElement(d,"port",a.ElkPort,i.ElkPortView),r.configureModelElement(d,"edge",a.ElkEdge,i.ElkEdgeView),r.configureModelElement(d,"label",a.ElkLabel,i.ElkLabelView),r.configureModelElement(d,"junction",a.ElkJunction,i.JunctionView),r.configureViewerOptions(d,{needsClientLayout:!1,needsServerLayout:!1})})),e=new o.Container,n=[r.defaultModule,r.modelSourceModule,r.boundsModule,r.edgeLayoutModule,r.fadeModule,r.hoverModule,r.moveModule,r.openModule,r.routingModule,r.selectModule,r.undoRedoModule,r.viewportModule,r.zorderModule];return e.load.apply(e,n),e.load(t),e}},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0}),e.JunctionView=e.ElkLabelView=e.ElkEdgeView=e.ElkPortView=e.ElkNodeView=void 0;var a=n(22),s=n(0),u=n(14),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.render=function(t,e){return a.svg("g",null,a.svg("rect",{"class-elknode":!0,"class-mouseover":t.hoverFeedback,"class-selected":t.selected,x:"0",y:"0",width:t.bounds.width,height:t.bounds.height}),e.renderChildren(t))},e=i([s.injectable()],e)}(u.RectangularNodeView);e.ElkNodeView=c;var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.render=function(t,e){return a.svg("g",null,a.svg("rect",{"class-elkport":!0,"class-mouseover":t.hoverFeedback,"class-selected":t.selected,x:"0",y:"0",width:t.bounds.width,height:t.bounds.height}),e.renderChildren(t))},e=i([s.injectable()],e)}(u.RectangularNodeView);e.ElkPortView=d;var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.renderLine=function(t,e,n){for(var o=e[0],r="M "+o.x+","+o.y,i=1;i<e.length;i++){var s=e[i];r+=" L "+s.x+","+s.y}return a.svg("path",{"class-elkedge":!0,d:r,"class-mouseover":t.hoverFeedback,"class-selected":t.selected})},e.prototype.renderAdditionals=function(t,e,n){var o=e[e.length-2],r=e[e.length-1];return[a.svg("path",{"class-elkedge":!0,"class-arrow":!0,d:"M 0,0 L 8,-3 L 8,3 Z",transform:"rotate("+u.toDegrees(u.angleOfPoint({x:o.x-r.x,y:o.y-r.y}))+" "+r.x+" "+r.y+") translate("+r.x+" "+r.y+")"})]},e=i([s.injectable()],e)}(u.PolylineEdgeView);e.ElkEdgeView=l;var f=function(){function t(){}return t.prototype.render=function(t,e){return a.svg("text",{"class-elklabel":!0},t.text)},t=i([s.injectable()],t)}();e.ElkLabelView=f;var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.render=function(t,e){var n=this.getRadius(t);return a.svg("g",null,a.svg("circle",{"class-elkjunction":!0,r:n}))},e.prototype.getRadius=function(t){return 2},e=i([s.injectable()],e)}(u.CircularNodeView);e.JunctionView=p},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.ElkJunction=e.ElkLabel=e.ElkEdge=e.ElkPort=e.SubModule=e.ElkNode=e.ElkGraph=void 0;var i=n(14),a=n(14),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.DEFAULT_FEATURES=[a.viewportFeature,a.exportFeature],e}(i.SGraph);e.ElkGraph=s;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.DEFAULT_FEATURES=[a.connectableFeature,a.selectFeature,a.boundsFeature,a.layoutContainerFeature,a.fadeFeature,a.hoverFeedbackFeature],e}(i.RectangularNode);e.ElkNode=u;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.DEFAULT_FEATURES=[a.connectableFeature,a.selectFeature,a.boundsFeature,a.layoutContainerFeature,a.fadeFeature,a.hoverFeedbackFeature,a.openFeature],e}(u);e.SubModule=c;var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.DEFAULT_FEATURES=[a.connectableFeature,a.selectFeature,a.boundsFeature,a.layoutContainerFeature,a.fadeFeature,a.hoverFeedbackFeature],e}(i.RectangularPort);e.ElkPort=d;var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.DEFAULT_FEATURES=[a.selectFeature,a.fadeFeature,a.hoverFeedbackFeature],e}(i.SEdge);e.ElkEdge=l;var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.DEFAULT_FEATURES=[a.boundsFeature,a.alignFeature,a.layoutableChildFeature,a.edgeLayoutFeature,a.fadeFeature],e}(i.SLabel);e.ElkLabel=f;var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.DEFAULT_FEATURES=[a.connectableFeature,a.boundsFeature,a.layoutContainerFeature,a.fadeFeature],e}(i.SNode);e.ElkJunction=p},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0}),e.GraphModelSource=void 0;var s=n(0),u=n(14),c=n(149),d=n(217),l=function(t){function e(){var e=t.call(this)||this;return e.lastModuleStack=new d.Stack,"function"==typeof window.renderingGraph?(e.renderingGraph=window.renderingGraph,window.reset=function(){e.lastModuleStack.size()>1&&(e.lastModuleStack.clear(),e.setGraph("root"))}):e.renderingGraph=function(t){alert("Please use easysoc-diagrammer plugin instead!")},e}return r(e,t),e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),e.register(u.SwitchEditModeAction.KIND,this),e.register(u.OpenAction.KIND,this),e.register(u.RequestExportSvgAction.KIND,this)},e.prototype.handle=function(e){switch(e.kind){case u.SwitchEditModeAction.KIND:break;case u.OpenAction.KIND:this.handleOpenActionAction(e);break;case u.RequestExportSvgAction.KIND:this.handleRequestExportSvgAction(e);break;default:t.prototype.handle.call(this,e)}},e.prototype.setGraph=function(t){window.graphMap.has(t)?(this.setModel(window.graphMap.get(t)),this.actionDispatcher.dispatch(new u.FitToScreenAction([])),this.lastModuleStack.push(t),"function"==typeof window.setNavigator&&window.setNavigator(this.lastModuleStack.toString())):this.renderingGraph(t)},e.prototype.goBack=function(){if(this.lastModuleStack.size()>1){this.lastModuleStack.pop();var t=this.lastModuleStack.pop();this.setGraph(t)}},e.prototype.handleOpenActionAction=function(t){var e=t.elementId.slice(t.elementId.lastIndexOf("submodule_")).split("_");e.shift(),e.shift();var n=e.join("_");this.setGraph(n)},e.prototype.handleExportSvgAction=function(e){"function"==typeof window.saveFile?window.saveFile(e.svg):t.prototype.handleExportSvgAction.call(this,e)},e.prototype.handleRequestExportSvgAction=function(t){var e=this;this.actionDispatcher.dispatch(new u.FitToScreenAction([])).then((function(){e.svgExporter.export(t)}))},i([s.inject(u.TYPES.SvgExporter),a("design:type",c.SvgExporter)],e.prototype,"svgExporter",void 0),e=i([s.injectable(),a("design:paramtypes",[])],e)}(u.LocalModelSource);e.GraphModelSource=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Stack=void 0;var o=function(){function t(){this.items=[]}return t.prototype.push=function(t){this.items.push(t)},t.prototype.pop=function(){return this.items.pop()},t.prototype.peek=function(){return this.items[this.items.length-1]},t.prototype.clear=function(){this.items=[]},t.prototype.isEmpty=function(){return 0==this.items.length},t.prototype.size=function(){return this.items.length},t.prototype.toString=function(){for(var t="",e=this.size(),n=1,o=0,r=this.items;o<r.length;o++){t+=r[o],n<e&&(t+=" => "),n++}return t},t}();e.Stack=o}]);